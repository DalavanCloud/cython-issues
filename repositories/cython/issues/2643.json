{
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "I was looking at the definitions of `cdiv` and `cmod` in Shadow.py. These seem to give incorrect results for some operands. For example, in C99:\r\n\r\n```\r\n4 / -4 == -1    4 % -4 == 0\r\n4 / -2 == -2    4 % -2 == 0\r\n4 / -1 == -4    4 % -1 == 0\r\n```\r\n\r\nBut these functions would return:\r\n\r\n```\r\ncdiv(4, -4) == 0    cmod(4, -4) == 4\r\ncdiv(4, -2) == -1    cmod(4, -2) == 2\r\ncdiv(4, -1) == -3    cmod(4, -1) == 1\r\n```\r\n\r\nThat's based on just running those definitions in the Python interpreter. Perhaps Cython handles them specially, and doesn't in fact give the incorrect results above. Still, why not include correct Python code? The following would work:\r\n\r\n```\r\ndef cdiv(a, b):\r\n    if a < 0:\r\n        a = -a\r\n        b = -b\r\n    if b < 0:\r\n        return (a + b + 1) // b\r\n    return a // b\r\n\r\ndef cmod(a, b):\r\n    r = a % b\r\n    if (a*b) < 0 and r: r -= b\r\n    return r\r\n```\r\n\r\nSorry if this is just me misunderstanding some magic behind the scenes stuff.",
    "closed_at": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "Thanks for looking at this! Please feel free to send a PR, or if you don't have the time I can fix them. ",
            "created_at": "2018-10-05T08:55:15Z",
            "html_url": "https://github.com/cython/cython/issues/2643#issuecomment-427293656",
            "id": 427293656,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2643",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQyNzI5MzY1Ng==",
            "updated_at": "2018-10-05T08:55:15Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/427293656",
            "user": {
                "avatar_url": "https://avatars3.githubusercontent.com/u/486017?v=4",
                "events_url": "https://api.github.com/users/robertwb/events{/privacy}",
                "followers_url": "https://api.github.com/users/robertwb/followers",
                "following_url": "https://api.github.com/users/robertwb/following{/other_user}",
                "gists_url": "https://api.github.com/users/robertwb/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/robertwb",
                "id": 486017,
                "login": "robertwb",
                "node_id": "MDQ6VXNlcjQ4NjAxNw==",
                "organizations_url": "https://api.github.com/users/robertwb/orgs",
                "received_events_url": "https://api.github.com/users/robertwb/received_events",
                "repos_url": "https://api.github.com/users/robertwb/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/robertwb/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/robertwb/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/robertwb"
            }
        }
    ],
    "comments": 1,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/2643/comments",
    "created_at": "2018-10-04T16:57:58Z",
    "event_data": [],
    "events_url": "https://api.github.com/repos/cython/cython/issues/2643/events",
    "html_url": "https://github.com/cython/cython/issues/2643",
    "id": 366882649,
    "labels": [],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/2643/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDU6SXNzdWUzNjY4ODI2NDk=",
    "number": 2643,
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "open",
    "title": "cdiv and cmod incorrect?",
    "updated_at": "2018-10-05T08:55:15Z",
    "url": "https://api.github.com/repos/cython/cython/issues/2643",
    "user": {
        "avatar_url": "https://avatars0.githubusercontent.com/u/232158?v=4",
        "events_url": "https://api.github.com/users/dubiousjim/events{/privacy}",
        "followers_url": "https://api.github.com/users/dubiousjim/followers",
        "following_url": "https://api.github.com/users/dubiousjim/following{/other_user}",
        "gists_url": "https://api.github.com/users/dubiousjim/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/dubiousjim",
        "id": 232158,
        "login": "dubiousjim",
        "node_id": "MDQ6VXNlcjIzMjE1OA==",
        "organizations_url": "https://api.github.com/users/dubiousjim/orgs",
        "received_events_url": "https://api.github.com/users/dubiousjim/received_events",
        "repos_url": "https://api.github.com/users/dubiousjim/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/dubiousjim/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/dubiousjim/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/dubiousjim"
    }
}