{
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "Hi there,\r\nWe have in our finite-difference magnetics code [Fidimag](https://github.com/computationalmodelling/fidimag) a wrapper for the C time-integration library SUNDIALS. We've recently had a user contact us who wasn't able to install our software, and we've tracked it down to a change between versions 27 and 28 of Cython, but we've not been able to identify how to fix it after looking through the changelogs.\r\n\r\nThe short version is - SUNDIALS defines the typename 'realtype' which is just typedef'd to double. We previously had the following in the pxd file:\r\n\r\n```\r\ncdef extern from \"sundials/sundials_types.h\":\r\n    ctypedef double realtype\r\n```\r\n\r\nand in the pyx files, we defined functions like:\r\n\r\n```\r\ncdef inline somefunction(np.ndarray[realtype, ndim=1, mode='c'] array):\r\n    \"\"\"\r\n    Some code here\r\n    \"\"\"\r\n```\r\n\r\nDoes anyone have any suggestions?\r\n\r\n",
    "closed_at": "2018-04-10T17:54:30Z",
    "comment_data": [
        {
            "author_association": "NONE",
            "body": "We've managed to fix the issue, but I'm still not sure whether this is a deliberate change in Cython or a bug. We've always done the naming convention:\r\n\r\n'source.pyx' containing the code\r\n'source.pxd' containing the information from header files and type declarations.\r\n\r\nWithout importing the pxd file within the pyx file, things just worked. I tried doing in the pyx file:\r\n```\r\nfrom source cimport *\r\n```\r\nBut this did not work. What did work was renaming `source.pxd` to `sourcedecl.pxd` and then doing \r\n```\r\nfrom sourcedecl import *\r\n```\r\n\r\nIs this an intentional feature or a bug?\r\n\r\nThanks,\r\nRyan\r\n",
            "created_at": "2018-04-10T16:15:40Z",
            "html_url": "https://github.com/cython/cython/issues/2200#issuecomment-380159890",
            "id": 380159890,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2200",
            "node_id": "MDEyOklzc3VlQ29tbWVudDM4MDE1OTg5MA==",
            "updated_at": "2018-04-10T16:15:40Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/380159890",
            "user": {
                "avatar_url": "https://avatars3.githubusercontent.com/u/8539474?v=4",
                "events_url": "https://api.github.com/users/rpep/events{/privacy}",
                "followers_url": "https://api.github.com/users/rpep/followers",
                "following_url": "https://api.github.com/users/rpep/following{/other_user}",
                "gists_url": "https://api.github.com/users/rpep/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/rpep",
                "id": 8539474,
                "login": "rpep",
                "node_id": "MDQ6VXNlcjg1Mzk0NzQ=",
                "organizations_url": "https://api.github.com/users/rpep/orgs",
                "received_events_url": "https://api.github.com/users/rpep/received_events",
                "repos_url": "https://api.github.com/users/rpep/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/rpep/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/rpep/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/rpep"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "You didn't say what kind of problem/error you faced, but:\r\n\r\n> 'source.pyx' containing the code\r\n> 'source.pxd' containing the information from header files and type declarations.\r\n\r\nThat's not how it should be. A `.pxd` file with the same name (and path) as a `.pyx` file is meant to contain declarations *of the code* in the `.pyx` file, and they both share the same namespace. The `.pxd` file allows sharing declarations of the `.pyx` module for reuse in other modules. If you `cimport` anything from such a namespace, you create a dependency on the `.pyx` module, which is probably not what you want.\r\n\r\nIf you want to provide a namespace for external declarations, use a different file name.",
            "created_at": "2018-04-10T17:54:30Z",
            "html_url": "https://github.com/cython/cython/issues/2200#issuecomment-380191031",
            "id": 380191031,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2200",
            "node_id": "MDEyOklzc3VlQ29tbWVudDM4MDE5MTAzMQ==",
            "updated_at": "2018-04-10T17:54:30Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/380191031",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "author_association": "NONE",
            "body": "Right, got it. I think we had a fundamental misunderstanding about what those files were for.\r\n\r\nThe error was just that 'realtype' wasn't defined in the pyx file, so that it stopped working isn't surprising if we had the wrong assumptions.\r\n\r\nThanks a lot for the quick response and tip!",
            "created_at": "2018-04-10T18:30:13Z",
            "html_url": "https://github.com/cython/cython/issues/2200#issuecomment-380202366",
            "id": 380202366,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2200",
            "node_id": "MDEyOklzc3VlQ29tbWVudDM4MDIwMjM2Ng==",
            "updated_at": "2018-04-10T18:30:13Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/380202366",
            "user": {
                "avatar_url": "https://avatars3.githubusercontent.com/u/8539474?v=4",
                "events_url": "https://api.github.com/users/rpep/events{/privacy}",
                "followers_url": "https://api.github.com/users/rpep/followers",
                "following_url": "https://api.github.com/users/rpep/following{/other_user}",
                "gists_url": "https://api.github.com/users/rpep/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/rpep",
                "id": 8539474,
                "login": "rpep",
                "node_id": "MDQ6VXNlcjg1Mzk0NzQ=",
                "organizations_url": "https://api.github.com/users/rpep/orgs",
                "received_events_url": "https://api.github.com/users/rpep/received_events",
                "repos_url": "https://api.github.com/users/rpep/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/rpep/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/rpep/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/rpep"
            }
        }
    ],
    "comments": 3,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/2200/comments",
    "created_at": "2018-04-10T15:58:49Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2018-04-10T17:54:30Z",
            "event": "closed",
            "id": 1566807329,
            "node_id": "MDExOkNsb3NlZEV2ZW50MTU2NjgwNzMyOQ==",
            "url": "https://api.github.com/repos/cython/cython/issues/events/1566807329"
        }
    ],
    "events_url": "https://api.github.com/repos/cython/cython/issues/2200/events",
    "html_url": "https://github.com/cython/cython/issues/2200",
    "id": 312987690,
    "labels": [],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/2200/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDU6SXNzdWUzMTI5ODc2OTA=",
    "number": 2200,
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "closed",
    "title": "Externally defined type no longer works after upgrading to 28.1",
    "updated_at": "2018-04-10T18:30:13Z",
    "url": "https://api.github.com/repos/cython/cython/issues/2200",
    "user": {
        "avatar_url": "https://avatars3.githubusercontent.com/u/8539474?v=4",
        "events_url": "https://api.github.com/users/rpep/events{/privacy}",
        "followers_url": "https://api.github.com/users/rpep/followers",
        "following_url": "https://api.github.com/users/rpep/following{/other_user}",
        "gists_url": "https://api.github.com/users/rpep/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/rpep",
        "id": 8539474,
        "login": "rpep",
        "node_id": "MDQ6VXNlcjg1Mzk0NzQ=",
        "organizations_url": "https://api.github.com/users/rpep/orgs",
        "received_events_url": "https://api.github.com/users/rpep/received_events",
        "repos_url": "https://api.github.com/users/rpep/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/rpep/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/rpep/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/rpep"
    }
}