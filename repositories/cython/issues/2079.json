{
    "assignee": null,
    "assignees": [],
    "author_association": "OWNER",
    "body": "Currently, all header files are included before the Cython file declarations in order to make external types available for the Cython code. In some cases, however, it's desirable to also make declarations in Cython code available to C include files.\r\n\r\nAttempts so far: #1650, #1896\r\n",
    "closed_at": null,
    "comment_data": [
        {
            "author_association": "OWNER",
            "body": "One idea is to add an explicit declaration or directive after all, but we could also move includes behind Cython declarations if they actually occur behind Cython declarations in the user code. I.e., if you write this:\r\n```\r\ncdef extern from \"abc.h\": ...\r\nctypedef int huhu\r\ncdef extern from \"xyz.h\": ...\r\n```\r\nthen `abc.h` would be an early include and `xyz.h` would be a late include that could thus make use of `huhu` and also the declarations in `abc.h`. That way, it is at least visible in the code what goes on. I think it would still be ok in that case to only have two places where includes are generated, and disallow any complex interleaving for now. That could still be added later if truly necessary.",
            "created_at": "2018-01-21T10:58:41Z",
            "html_url": "https://github.com/cython/cython/issues/2079#issuecomment-359239769",
            "id": 359239769,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2079",
            "updated_at": "2018-01-21T11:06:40Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/359239769",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Personally, I have always been of the opinion that explicit syntax is the best solution. Something like\r\n```\r\ncdef extern from \"abc.h\" late\r\n```\r\nor the proposal from #1650 \r\n```\r\ncdef extern from \"|abc.h\"\r\n```",
            "created_at": "2018-01-21T15:42:03Z",
            "html_url": "https://github.com/cython/cython/issues/2079#issuecomment-359257396",
            "id": 359257396,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2079",
            "updated_at": "2018-01-21T15:42:03Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/359257396",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/3625785?v=4",
                "events_url": "https://api.github.com/users/jdemeyer/events{/privacy}",
                "followers_url": "https://api.github.com/users/jdemeyer/followers",
                "following_url": "https://api.github.com/users/jdemeyer/following{/other_user}",
                "gists_url": "https://api.github.com/users/jdemeyer/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/jdemeyer",
                "id": 3625785,
                "login": "jdemeyer",
                "organizations_url": "https://api.github.com/users/jdemeyer/orgs",
                "received_events_url": "https://api.github.com/users/jdemeyer/received_events",
                "repos_url": "https://api.github.com/users/jdemeyer/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/jdemeyer/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/jdemeyer/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/jdemeyer"
            }
        },
        {
            "author_association": "OWNER",
            "body": "I realised now that there are actually not two but four different types of declarations that need ordering.\r\n- cimported extern\r\n- cimported\r\n- local extern\r\n- local\r\n\r\nJust saying `late` does not make a distinction between cimported and local declarations.\r\n\r\nIs there a way to stick strictly to the ordering in the main module? Meaning, if cimports come after local declarations, can we make sure that their declarations really appear after the local ones? And can we assure the same for extern declarations following local Cython declarations?\r\n\r\nIf we can achieve that, then we might still break existing code, but it should at least be obvious for users how to repair it, and also obvious for those who read the code afterwards.",
            "created_at": "2018-01-23T05:45:24Z",
            "html_url": "https://github.com/cython/cython/issues/2079#issuecomment-359683020",
            "id": 359683020,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2079",
            "updated_at": "2018-01-23T05:45:24Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/359683020",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        }
    ],
    "comments": 3,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/2079/comments",
    "created_at": "2018-01-21T10:57:35Z",
    "event_data": [],
    "events_url": "https://api.github.com/repos/cython/cython/issues/2079/events",
    "html_url": "https://github.com/cython/cython/issues/2079",
    "id": 290263794,
    "labels": [],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/2079/labels{/name}",
    "locked": false,
    "milestone": null,
    "number": 2079,
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "open",
    "title": "Allow making Cython declarations available to C include files",
    "updated_at": "2018-01-23T05:45:24Z",
    "url": "https://api.github.com/repos/cython/cython/issues/2079",
    "user": {
        "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
        "events_url": "https://api.github.com/users/scoder/events{/privacy}",
        "followers_url": "https://api.github.com/users/scoder/followers",
        "following_url": "https://api.github.com/users/scoder/following{/other_user}",
        "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/scoder",
        "id": 491659,
        "login": "scoder",
        "organizations_url": "https://api.github.com/users/scoder/orgs",
        "received_events_url": "https://api.github.com/users/scoder/received_events",
        "repos_url": "https://api.github.com/users/scoder/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/scoder"
    }
}