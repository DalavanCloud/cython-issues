{
    "assignee": null,
    "assignees": [],
    "author_association": "MEMBER",
    "body": "Especially when using fused types, some code section may or may not require the GIL. Currently, the only way to release the GIL in these cases is to duplicate the code sections and wrap one in a `with nogil` block but not the other, e.g.\r\n```\r\n    if fusedtype is object:\r\n        ...  # complicated code here\r\n    else:\r\n        with nogil:\r\n            ... # complicated code repeated here\r\n```\r\nThe normal reflex of moving the code into a cdef function also does not work out because the function then has the same declaration problem.\r\n\r\nAt least for cases where the distinction is known at compile time (which includes type checks for fused types), there should be a way to base the `nogil` case on a condition.\r\n\r\n**Constraints**:\r\n\r\nThe solution should be as obvious from a Python perspective as possible. `with nogil` is currently special-cased in Cython, but that shouldn't impact its use. An obvious approach in Python would be, for example:\r\n```\r\n    cm = nogil if condition else dummy\r\n    with cm:\r\n        ...\r\n```\r\nbut this is difficult to match with the need for special casing `nogil` in Cython at compile time.\r\n\r\nAlso, while an initial implementation could be restricted to compile time constant conditions, the same syntax should still be applicable when allowing the decision to be taken at runtime (by implicitly generating a duplicate code block in C).\r\n\r\n`nogil` is not only a (special) context manager in Cython but also a decorator, so `nogil(True)` might not be easy to distinguish from `@nogil`, especially in pure Python code (`Shadow.py`). Still, also allowing `@nogil(True)` as a decorator would be nice.\r\n\r\n**Approach**:\r\n\r\nGiven that directives like `with boundscheck(True)` already exist, `with nogil(True)` is probably the way to go. Thus, allow `with nogil(flag)` and detect the decorator case in pure Python mode by checking for callables in the dummy implementation in `Shadow.py`.\r\n\r\nThe `InterpretCompilerDirectives` transform in [ParseTreeTransforms.py](https://github.com/cython/cython/blob/master/Cython/Compiler/ParseTreeTransforms.py) is the place where compiler directives are evaluated. For `with nogil` and `with gil`, a `Nodes.GILStatNode` is created. Note that this is run *before* transforming normal with-statements (with is not relevant for this special case) and constant folding (in the `ConstantFolding` tree transform, which determines the compile time value of the condition), and also long before type analysis (`AnalyseExpressionsTransform`) where fused types are evaluated (see the order in [Pipeline.py](https://github.com/cython/cython/blob/master/Cython/Compiler/Pipeline.py)), so the directive condition will not be finally known until constant folding and type analysis have run, and must therefore be stored as a syntax tree node instead of a boolean flag.\r\n\r\nThe type analysis step should be able to take the final decision about the condition value in `Nodes.GILStatNode`. However, it could well be that certain syntax tree nodes in the code block have already decided by then that they are in a `nogil` context. That might need to be revised to make sure they only take that decision after the compile time condition is evaluated and the final GIL state known.",
    "closed_at": "2019-02-26T18:41:57Z",
    "comment_data": [
        {
            "author_association": "NONE",
            "body": "@scoder \r\nThere is a somewhat similar challenge with prange.\r\n\r\nFor example:\r\n```\r\nif use_parallelism:   # use_parallelism is a python boolean object\r\n  with nogil:\r\n    for i in range(K):\r\n       ... # complicated code\r\nelse:\r\n  with nogil:\r\n    for i in prange(K):\r\n      ... # complicated code repeated here\r\n```\r\n\r\nI wonder if it's possible to make a solution such as\r\n```\r\nrng = prange(K) if use_parallelism else range(K)\r\n```\r\n\r\nAnother thing is that the schedule strategy of prange also has to be decided at compile time and it would be nice to be able to decide it at runtime.",
            "created_at": "2019-01-17T08:49:56Z",
            "html_url": "https://github.com/cython/cython/issues/2579#issuecomment-455090662",
            "id": 455090662,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2579",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ1NTA5MDY2Mg==",
            "updated_at": "2019-01-17T08:49:56Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/455090662",
            "user": {
                "avatar_url": "https://avatars1.githubusercontent.com/u/6236499?v=4",
                "events_url": "https://api.github.com/users/noamher/events{/privacy}",
                "followers_url": "https://api.github.com/users/noamher/followers",
                "following_url": "https://api.github.com/users/noamher/following{/other_user}",
                "gists_url": "https://api.github.com/users/noamher/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/noamher",
                "id": 6236499,
                "login": "noamher",
                "node_id": "MDQ6VXNlcjYyMzY0OTk=",
                "organizations_url": "https://api.github.com/users/noamher/orgs",
                "received_events_url": "https://api.github.com/users/noamher/received_events",
                "repos_url": "https://api.github.com/users/noamher/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/noamher/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/noamher/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/noamher"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "With prange/OpenMP, you can set the thread count to 1 or configure the schedule with the `OMP_SCHEDULE` environment variable.",
            "created_at": "2019-01-17T17:30:15Z",
            "html_url": "https://github.com/cython/cython/issues/2579#issuecomment-455258560",
            "id": 455258560,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2579",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ1NTI1ODU2MA==",
            "updated_at": "2019-01-17T17:30:15Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/455258560",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "author_association": "NONE",
            "body": "@scoder, I would like to try to take this task on and I would like to hear if you think I'm on the right track.\r\n\r\nBoundcheck is first identified as a function used as a decorator but in the InterpretCompilerDirectives it is transform into a CompilerDirectivesNode (which contains the decorated function). Before creating the CompilerDirectivesNode, the expression used as the boundscheck argument is verified to be a BoolNode (so either True or False, without any need to evaluated the expression).\r\n\r\nI imagine GILStatNode will have to be modified to accept an optional condition (an ExprNode).\r\nIf no condition is provided, the GilStatNode will be used exactly as it is used today. e.g.\r\n\r\n```\r\nwith nogil / gil:\r\n    ...\r\n```\r\n\r\nIf a condition is provided, e.g.\r\n\r\n```\r\nwith nogil / gil(numeric is int):\r\n   ...\r\n```\r\n\r\nThen the condition is stored as the expression of the condition of the GILStatNode.\r\n\r\nA later transformation (after the fused type function is \"unpacked\" into multiple functions in the AnalyseDeclarationsTransform phase) will have to check whether the condition is a valid condition (either a constant boolean or an expression such as \"numeric is int\".\r\n\r\nThe logic to check for expressions such as \"numeric is int\" already exist in the ReplaceFusedTypeChecks visitor which is also called during the AnalyseDeclarationsTransform phase).\r\n\r\nReplaceFusedTypeChecks replaces conditions such as \"numeric is int\" with a BoolNode (True / False) which I believe is pruned later (the IfClauseNode is removed along with it's body if it the condition is False, or the IfClauseNode is removed but the body remains if the condition is True).\r\n\r\nPerhaps ReplaceFusedTypeChecks can also be used to replace the condition of the GILStatNode with True / False.\r\n\r\nAn alternative is to create another Node to represent the conditional nogil.\r\n\r\nWhat do you think?\r\n",
            "created_at": "2019-02-16T16:24:14Z",
            "html_url": "https://github.com/cython/cython/issues/2579#issuecomment-464360101",
            "id": 464360101,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2579",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ2NDM2MDEwMQ==",
            "updated_at": "2019-02-16T16:24:14Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/464360101",
            "user": {
                "avatar_url": "https://avatars1.githubusercontent.com/u/6236499?v=4",
                "events_url": "https://api.github.com/users/noamher/events{/privacy}",
                "followers_url": "https://api.github.com/users/noamher/followers",
                "following_url": "https://api.github.com/users/noamher/following{/other_user}",
                "gists_url": "https://api.github.com/users/noamher/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/noamher",
                "id": 6236499,
                "login": "noamher",
                "node_id": "MDQ6VXNlcjYyMzY0OTk=",
                "organizations_url": "https://api.github.com/users/noamher/orgs",
                "received_events_url": "https://api.github.com/users/noamher/received_events",
                "repos_url": "https://api.github.com/users/noamher/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/noamher/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/noamher/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/noamher"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Perfect analysis. The evaluation of the condition is already implemented, so all the `GILStateNode` has to do is to raise an `error(...)` for anything with `not self.condition.has_constant_result()`, and otherwise look at the truth value of `self.condition.constant_result`. A `GILStatNode` with a falsy condition result can be discarded.\r\n\r\nNote that `ReplaceFusedTypeChecks` won't do much in non-fused functions, so this is not the right place to discard `GILStatNode`s. I think the best place for this is the `ConstantFolding` transform, which is executed relatively early in the pipeline (where it can cover all trivially constant conditions), and then runs again later for fused functions to resolve type checks etc. So this transform should cover all use cases. Note that, since it runs twice (and since it's generally a \"best effort\" transform), it's not the right place to raise a compiler error, since the first run will not be able to resolve all cases. It might be enough to raise the error only in the late `GilCheck` transform, which checks for GIL violations after all other tree transformations have run.\r\n\r\nNow, the final question is whether all of this happens in the right order in the compiler pipeline. It might be that we already need to know about `nogil` sections before we know the truth value of the expression, at least in the case of fused functions. That would be unfortunate, although I guess we might get away with some ambiguity here in the case of fused types, where the code block would usually have to work without the GIL, at least in some cases. Tests will have to tell us if things \"just work\" or if we need to fix more things up, so quite a bit of work here is to write an extensive set of tests that mixes conditional gil/nogil blocks together with several language features to make sure that we didn't break them. Especially features like try-finally, nested gil/nogil scenarios (with and without conditions), and fused types, also mixed Python/non-Python fused types (e.g. `int` and `object`).\r\n\r\nAll positive tests for this should go into a single new test file under `tests/run/`, take a look at `nogil.pyx` and `with_gil.pyx`. You will also need an error test for invalid conditions and GIL violations. Look at `tests/errors/nogil.pyx` for that, and add a new test file next to it.\r\n\r\nI hope I answered all your questions so far. Keep asking if you need more help.",
            "created_at": "2019-02-16T18:08:24Z",
            "html_url": "https://github.com/cython/cython/issues/2579#issuecomment-464368349",
            "id": 464368349,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2579",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ2NDM2ODM0OQ==",
            "updated_at": "2019-02-16T18:08:24Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/464368349",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "author_association": "NONE",
            "body": "Would it be necessary to discard  GILStatNodes outside of non fused types functions?",
            "created_at": "2019-02-16T20:49:16Z",
            "html_url": "https://github.com/cython/cython/issues/2579#issuecomment-464383660",
            "id": 464383660,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2579",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ2NDM4MzY2MA==",
            "updated_at": "2019-02-16T20:49:16Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/464383660",
            "user": {
                "avatar_url": "https://avatars1.githubusercontent.com/u/6236499?v=4",
                "events_url": "https://api.github.com/users/noamher/events{/privacy}",
                "followers_url": "https://api.github.com/users/noamher/followers",
                "following_url": "https://api.github.com/users/noamher/following{/other_user}",
                "gists_url": "https://api.github.com/users/noamher/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/noamher",
                "id": 6236499,
                "login": "noamher",
                "node_id": "MDQ6VXNlcjYyMzY0OTk=",
                "organizations_url": "https://api.github.com/users/noamher/orgs",
                "received_events_url": "https://api.github.com/users/noamher/received_events",
                "repos_url": "https://api.github.com/users/noamher/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/noamher/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/noamher/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/noamher"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> Would it be necessary to discard GILStatNodes outside of non fused types functions?\r\n\r\nThey somehow have to do nothing when disabled, and I think that discarding them is the easiest way to do that. Fused functions are not the only use case for this feature. You could also just imagine a global `DEF` constant that disables certain `nogil` usages, e.g. for profiling, debugging, performance comparisons, … I think it's best to _not_ make fused functions special at all in that regard.",
            "created_at": "2019-02-16T20:55:48Z",
            "html_url": "https://github.com/cython/cython/issues/2579#issuecomment-464384390",
            "id": 464384390,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2579",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ2NDM4NDM5MA==",
            "updated_at": "2019-02-16T20:55:48Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/464384390",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "author_association": "NONE",
            "body": "should I use a compile time expression or a (normal) expression as the condition of the gil/nogil statement ?",
            "created_at": "2019-02-22T10:16:01Z",
            "html_url": "https://github.com/cython/cython/issues/2579#issuecomment-466346972",
            "id": 466346972,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2579",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ2NjM0Njk3Mg==",
            "updated_at": "2019-02-22T10:16:01Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/466346972",
            "user": {
                "avatar_url": "https://avatars1.githubusercontent.com/u/6236499?v=4",
                "events_url": "https://api.github.com/users/noamher/events{/privacy}",
                "followers_url": "https://api.github.com/users/noamher/followers",
                "following_url": "https://api.github.com/users/noamher/following{/other_user}",
                "gists_url": "https://api.github.com/users/noamher/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/noamher",
                "id": 6236499,
                "login": "noamher",
                "node_id": "MDQ6VXNlcjYyMzY0OTk=",
                "organizations_url": "https://api.github.com/users/noamher/orgs",
                "received_events_url": "https://api.github.com/users/noamher/received_events",
                "repos_url": "https://api.github.com/users/noamher/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/noamher/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/noamher/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/noamher"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Anything constant (`.has_constant_result()`). Compile time expressions become regular constant values after parsing.",
            "created_at": "2019-02-22T10:22:46Z",
            "html_url": "https://github.com/cython/cython/issues/2579#issuecomment-466348917",
            "id": 466348917,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2579",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ2NjM0ODkxNw==",
            "updated_at": "2019-02-22T10:22:46Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/466348917",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "author_association": "NONE",
            "body": "> so all the `GILStateNode` has to do is to raise an `error(...)` for anything with `not self.condition.has_constant_result()`\r\n\r\nShould that occur in the c'tor of GILStateNode, during parsing (in Parsing.py -> p_with_items), or in the GILCheck transform?",
            "created_at": "2019-02-22T10:47:33Z",
            "html_url": "https://github.com/cython/cython/issues/2579#issuecomment-466355778",
            "id": 466355778,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2579",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ2NjM1NTc3OA==",
            "updated_at": "2019-02-22T10:47:33Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/466355778",
            "user": {
                "avatar_url": "https://avatars1.githubusercontent.com/u/6236499?v=4",
                "events_url": "https://api.github.com/users/noamher/events{/privacy}",
                "followers_url": "https://api.github.com/users/noamher/followers",
                "following_url": "https://api.github.com/users/noamher/following{/other_user}",
                "gists_url": "https://api.github.com/users/noamher/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/noamher",
                "id": 6236499,
                "login": "noamher",
                "node_id": "MDQ6VXNlcjYyMzY0OTk=",
                "organizations_url": "https://api.github.com/users/noamher/orgs",
                "received_events_url": "https://api.github.com/users/noamher/received_events",
                "repos_url": "https://api.github.com/users/noamher/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/noamher/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/noamher/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/noamher"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "I'd actually do it in the `ConstantFolding` transform, when we know the result of the condition. Implement a `visit_GILStatNode(self, node)` method there and check if there is a condition with a constant result, then either set the condition attribute to `None` or return the node body instead of the node to discard it. Then we can raise a compile error in `GILStatNode` itself if it still has a condition expression during the gil checking phase.",
            "created_at": "2019-02-22T10:53:12Z",
            "html_url": "https://github.com/cython/cython/issues/2579#issuecomment-466357320",
            "id": 466357320,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2579",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ2NjM1NzMyMA==",
            "updated_at": "2019-02-22T11:27:28Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/466357320",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "author_association": "NONE",
            "body": "So during Parsing I should use `p_compile_time_expr` rather than `p_test` ?",
            "created_at": "2019-02-22T11:39:23Z",
            "html_url": "https://github.com/cython/cython/issues/2579#issuecomment-466368762",
            "id": 466368762,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2579",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ2NjM2ODc2Mg==",
            "updated_at": "2019-02-22T11:39:23Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/466368762",
            "user": {
                "avatar_url": "https://avatars1.githubusercontent.com/u/6236499?v=4",
                "events_url": "https://api.github.com/users/noamher/events{/privacy}",
                "followers_url": "https://api.github.com/users/noamher/followers",
                "following_url": "https://api.github.com/users/noamher/following{/other_user}",
                "gists_url": "https://api.github.com/users/noamher/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/noamher",
                "id": 6236499,
                "login": "noamher",
                "node_id": "MDQ6VXNlcjYyMzY0OTk=",
                "organizations_url": "https://api.github.com/users/noamher/orgs",
                "received_events_url": "https://api.github.com/users/noamher/received_events",
                "repos_url": "https://api.github.com/users/noamher/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/noamher/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/noamher/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/noamher"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "No, `p_test()` is good. Any expression will do, it doesn't have to be constant at _parse_ time. It's enough if it's constant after the `ConstantFolding` transform has run over it (recursively), i.e. right before you look at the `GILStatNode` itself.",
            "created_at": "2019-02-22T11:44:45Z",
            "html_url": "https://github.com/cython/cython/issues/2579#issuecomment-466370025",
            "id": 466370025,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2579",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ2NjM3MDAyNQ==",
            "updated_at": "2019-02-22T11:44:45Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/466370025",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "author_association": "NONE",
            "body": "In `ConstantFolding`, no base class of `GILStatNode` has a visit method implemented so I'm assuming that the children of a `GILStatNode` (including the statements in the body) are no currently optimized.\r\nAm I getting it wrong?\r\n\r\nIf they are not currently optimized (using `ConstantFolding`), should they be?\r\nIf so, `self.visitchildren(node)` is the way?",
            "created_at": "2019-02-22T11:53:46Z",
            "html_url": "https://github.com/cython/cython/issues/2579#issuecomment-466372040",
            "id": 466372040,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2579",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ2NjM3MjA0MA==",
            "updated_at": "2019-02-22T11:53:46Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/466372040",
            "user": {
                "avatar_url": "https://avatars1.githubusercontent.com/u/6236499?v=4",
                "events_url": "https://api.github.com/users/noamher/events{/privacy}",
                "followers_url": "https://api.github.com/users/noamher/followers",
                "following_url": "https://api.github.com/users/noamher/following{/other_user}",
                "gists_url": "https://api.github.com/users/noamher/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/noamher",
                "id": 6236499,
                "login": "noamher",
                "node_id": "MDQ6VXNlcjYyMzY0OTk=",
                "organizations_url": "https://api.github.com/users/noamher/orgs",
                "received_events_url": "https://api.github.com/users/noamher/received_events",
                "repos_url": "https://api.github.com/users/noamher/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/noamher/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/noamher/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/noamher"
            }
        },
        {
            "author_association": "NONE",
            "body": "Or does the base class of `ConstantFolding` take care of visiting all nodes (including the body of `GILStatNode`)?",
            "created_at": "2019-02-22T11:55:18Z",
            "html_url": "https://github.com/cython/cython/issues/2579#issuecomment-466372390",
            "id": 466372390,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2579",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ2NjM3MjM5MA==",
            "updated_at": "2019-02-22T11:55:18Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/466372390",
            "user": {
                "avatar_url": "https://avatars1.githubusercontent.com/u/6236499?v=4",
                "events_url": "https://api.github.com/users/noamher/events{/privacy}",
                "followers_url": "https://api.github.com/users/noamher/followers",
                "following_url": "https://api.github.com/users/noamher/following{/other_user}",
                "gists_url": "https://api.github.com/users/noamher/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/noamher",
                "id": 6236499,
                "login": "noamher",
                "node_id": "MDQ6VXNlcjYyMzY0OTk=",
                "organizations_url": "https://api.github.com/users/noamher/orgs",
                "received_events_url": "https://api.github.com/users/noamher/received_events",
                "repos_url": "https://api.github.com/users/noamher/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/noamher/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/noamher/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/noamher"
            }
        },
        {
            "author_association": "NONE",
            "body": "Okay, I just saw the line\r\n```\r\nvisit_Node = Visitor.VisitorTransform.recurse_to_children\r\n```\r\n\r\nSo I should definitely have the `self.visitchildren(node)` line.",
            "created_at": "2019-02-22T11:58:27Z",
            "html_url": "https://github.com/cython/cython/issues/2579#issuecomment-466373109",
            "id": 466373109,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2579",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ2NjM3MzEwOQ==",
            "updated_at": "2019-02-22T11:58:27Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/466373109",
            "user": {
                "avatar_url": "https://avatars1.githubusercontent.com/u/6236499?v=4",
                "events_url": "https://api.github.com/users/noamher/events{/privacy}",
                "followers_url": "https://api.github.com/users/noamher/followers",
                "following_url": "https://api.github.com/users/noamher/following{/other_user}",
                "gists_url": "https://api.github.com/users/noamher/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/noamher",
                "id": 6236499,
                "login": "noamher",
                "node_id": "MDQ6VXNlcjYyMzY0OTk=",
                "organizations_url": "https://api.github.com/users/noamher/orgs",
                "received_events_url": "https://api.github.com/users/noamher/received_events",
                "repos_url": "https://api.github.com/users/noamher/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/noamher/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/noamher/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/noamher"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "There is a default handler for the node base class `Node` that matches all nodes and simply traverses to their children. When you add a new visit method, you'd usually visit all children first, and then take a look at what became of the node and its children after that. Whatever you return will replace the node.",
            "created_at": "2019-02-22T11:58:43Z",
            "html_url": "https://github.com/cython/cython/issues/2579#issuecomment-466373153",
            "id": 466373153,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2579",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ2NjM3MzE1Mw==",
            "updated_at": "2019-02-22T11:58:43Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/466373153",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "author_association": "NONE",
            "body": "should the children of `GILStatNode` include the `test` member I added or just the body (as was until now)?\r\n\r\nThis question I believe is relevant to all visitors that visit GILStatNode.",
            "created_at": "2019-02-22T12:01:33Z",
            "html_url": "https://github.com/cython/cython/issues/2579#issuecomment-466373861",
            "id": 466373861,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2579",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ2NjM3Mzg2MQ==",
            "updated_at": "2019-02-22T12:01:33Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/466373861",
            "user": {
                "avatar_url": "https://avatars1.githubusercontent.com/u/6236499?v=4",
                "events_url": "https://api.github.com/users/noamher/events{/privacy}",
                "followers_url": "https://api.github.com/users/noamher/followers",
                "following_url": "https://api.github.com/users/noamher/following{/other_user}",
                "gists_url": "https://api.github.com/users/noamher/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/noamher",
                "id": 6236499,
                "login": "noamher",
                "node_id": "MDQ6VXNlcjYyMzY0OTk=",
                "organizations_url": "https://api.github.com/users/noamher/orgs",
                "received_events_url": "https://api.github.com/users/noamher/received_events",
                "repos_url": "https://api.github.com/users/noamher/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/noamher/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/noamher/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/noamher"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "When you add a new attribute, you have to add it to the `child_attrs` class attribute in order to have the transforms traverse it. Is that what you meant? (Oh, and call the attribute `condition`, not `test`.) And otherwise just pass it into the constructor in the parser.",
            "created_at": "2019-02-22T12:14:10Z",
            "html_url": "https://github.com/cython/cython/issues/2579#issuecomment-466376942",
            "id": 466376942,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2579",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ2NjM3Njk0Mg==",
            "updated_at": "2019-02-22T12:14:10Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/466376942",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "author_association": "NONE",
            "body": "@scoder do you have an idea how I can write a test which checks whether the gil is taken?\r\n\r\nI guess I can write a test which will fail if the gil is not taken (using some PyObject method for example).",
            "created_at": "2019-02-22T21:51:16Z",
            "html_url": "https://github.com/cython/cython/issues/2579#issuecomment-466560443",
            "id": 466560443,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2579",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ2NjU2MDQ0Mw==",
            "updated_at": "2019-02-22T21:51:16Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/466560443",
            "user": {
                "avatar_url": "https://avatars1.githubusercontent.com/u/6236499?v=4",
                "events_url": "https://api.github.com/users/noamher/events{/privacy}",
                "followers_url": "https://api.github.com/users/noamher/followers",
                "following_url": "https://api.github.com/users/noamher/following{/other_user}",
                "gists_url": "https://api.github.com/users/noamher/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/noamher",
                "id": 6236499,
                "login": "noamher",
                "node_id": "MDQ6VXNlcjYyMzY0OTk=",
                "organizations_url": "https://api.github.com/users/noamher/orgs",
                "received_events_url": "https://api.github.com/users/noamher/received_events",
                "repos_url": "https://api.github.com/users/noamher/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/noamher/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/noamher/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/noamher"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Yes, I think a test that uses some arbitrary Python operations in `nogil(False)` and does not use them in `nogil(True)` would be a good start. Testing explicitly for the GIL seems difficult. I mean, Python operations can crash there, but that's not a good test … Better just test that Cython does the right GIL checks at the end.",
            "created_at": "2019-02-23T07:23:49Z",
            "html_url": "https://github.com/cython/cython/issues/2579#issuecomment-466625067",
            "id": 466625067,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2579",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ2NjYyNTA2Nw==",
            "updated_at": "2019-02-23T07:23:49Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/466625067",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        }
    ],
    "comments": 20,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/2579/comments",
    "created_at": "2018-08-25T09:48:47Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2018-08-25T09:48:47Z",
            "event": "labeled",
            "id": 1808937020,
            "label": {
                "color": "0e8a16",
                "name": "help wanted"
            },
            "node_id": "MDEyOkxhYmVsZWRFdmVudDE4MDg5MzcwMjA=",
            "url": "https://api.github.com/repos/cython/cython/issues/events/1808937020"
        },
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2018-08-25T09:48:47Z",
            "event": "labeled",
            "id": 1808937021,
            "label": {
                "color": "444444",
                "name": "enhancement"
            },
            "node_id": "MDEyOkxhYmVsZWRFdmVudDE4MDg5MzcwMjE=",
            "url": "https://api.github.com/repos/cython/cython/issues/events/1808937021"
        },
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2018-08-25T09:48:47Z",
            "event": "labeled",
            "id": 1808937022,
            "label": {
                "color": "444444",
                "name": "Cython Language Feature"
            },
            "node_id": "MDEyOkxhYmVsZWRFdmVudDE4MDg5MzcwMjI=",
            "url": "https://api.github.com/repos/cython/cython/issues/events/1808937022"
        },
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": "5ea5a0f5e14c89515189ed937890be75732908a1",
            "commit_url": "https://api.github.com/repos/cython/cython/commits/5ea5a0f5e14c89515189ed937890be75732908a1",
            "created_at": "2018-09-14T21:19:04Z",
            "event": "referenced",
            "id": 1847063414,
            "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDE4NDcwNjM0MTQ=",
            "url": "https://api.github.com/repos/cython/cython/issues/events/1847063414"
        },
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2019-01-17T08:49:56Z",
            "event": "mentioned",
            "id": 2079572472,
            "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MjA3OTU3MjQ3Mg==",
            "url": "https://api.github.com/repos/cython/cython/issues/events/2079572472"
        },
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2019-01-17T08:49:56Z",
            "event": "subscribed",
            "id": 2079572475,
            "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDIwNzk1NzI0NzU=",
            "url": "https://api.github.com/repos/cython/cython/issues/events/2079572475"
        },
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2019-02-16T16:24:14Z",
            "event": "mentioned",
            "id": 2144252763,
            "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MjE0NDI1Mjc2Mw==",
            "url": "https://api.github.com/repos/cython/cython/issues/events/2144252763"
        },
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2019-02-16T16:24:14Z",
            "event": "subscribed",
            "id": 2144252764,
            "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDIxNDQyNTI3NjQ=",
            "url": "https://api.github.com/repos/cython/cython/issues/events/2144252764"
        },
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2019-02-22T21:51:16Z",
            "event": "mentioned",
            "id": 2159048750,
            "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MjE1OTA0ODc1MA==",
            "url": "https://api.github.com/repos/cython/cython/issues/events/2159048750"
        },
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2019-02-22T21:51:16Z",
            "event": "subscribed",
            "id": 2159048751,
            "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDIxNTkwNDg3NTE=",
            "url": "https://api.github.com/repos/cython/cython/issues/events/2159048751"
        },
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2019-02-23T07:55:29Z",
            "event": "labeled",
            "id": 2159473370,
            "label": {
                "color": "c2e0c6",
                "name": "feature"
            },
            "node_id": "MDEyOkxhYmVsZWRFdmVudDIxNTk0NzMzNzA=",
            "url": "https://api.github.com/repos/cython/cython/issues/events/2159473370"
        },
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2019-02-23T07:55:29Z",
            "event": "unlabeled",
            "id": 2159473371,
            "label": {
                "color": "444444",
                "name": "enhancement"
            },
            "node_id": "MDE0OlVubGFiZWxlZEV2ZW50MjE1OTQ3MzM3MQ==",
            "url": "https://api.github.com/repos/cython/cython/issues/events/2159473371"
        },
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2019-02-23T07:55:39Z",
            "event": "unlabeled",
            "id": 2159473435,
            "label": {
                "color": "0e8a16",
                "name": "help wanted"
            },
            "node_id": "MDE0OlVubGFiZWxlZEV2ZW50MjE1OTQ3MzQzNQ==",
            "url": "https://api.github.com/repos/cython/cython/issues/events/2159473435"
        },
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2019-02-26T18:41:53Z",
            "event": "milestoned",
            "id": 2165791328,
            "milestone": {
                "title": "3.0"
            },
            "node_id": "MDE1Ok1pbGVzdG9uZWRFdmVudDIxNjU3OTEzMjg=",
            "url": "https://api.github.com/repos/cython/cython/issues/events/2165791328"
        },
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2019-02-26T18:41:57Z",
            "event": "closed",
            "id": 2165791462,
            "node_id": "MDExOkNsb3NlZEV2ZW50MjE2NTc5MTQ2Mg==",
            "url": "https://api.github.com/repos/cython/cython/issues/events/2165791462"
        }
    ],
    "events_url": "https://api.github.com/repos/cython/cython/issues/2579/events",
    "html_url": "https://github.com/cython/cython/issues/2579",
    "id": 354000003,
    "labels": [
        {
            "color": "444444",
            "default": false,
            "id": 425559948,
            "name": "Cython Language Feature",
            "node_id": "MDU6TGFiZWw0MjU1NTk5NDg=",
            "url": "https://api.github.com/repos/cython/cython/labels/Cython%20Language%20Feature"
        },
        {
            "color": "c2e0c6",
            "default": false,
            "id": 414805463,
            "name": "feature",
            "node_id": "MDU6TGFiZWw0MTQ4MDU0NjM=",
            "url": "https://api.github.com/repos/cython/cython/labels/feature"
        }
    ],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/2579/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 40,
        "created_at": "2018-08-18T06:33:08Z",
        "creator": {
            "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
            "events_url": "https://api.github.com/users/scoder/events{/privacy}",
            "followers_url": "https://api.github.com/users/scoder/followers",
            "following_url": "https://api.github.com/users/scoder/following{/other_user}",
            "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/scoder",
            "id": 491659,
            "login": "scoder",
            "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
            "organizations_url": "https://api.github.com/users/scoder/orgs",
            "received_events_url": "https://api.github.com/users/scoder/received_events",
            "repos_url": "https://api.github.com/users/scoder/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/scoder"
        },
        "description": "Goals:\r\n– New version scheme: 3.x instead of 0.x.\r\n– Change default `language_level` from `2` to `3`.\r\n– Change default for `binding` directive from `False` to `True`.\r\n– Fix some Python compatibility issues (if possible, allowing for breaking changes).",
        "due_on": null,
        "html_url": "https://github.com/cython/cython/milestone/58",
        "id": 3580387,
        "labels_url": "https://api.github.com/repos/cython/cython/milestones/58/labels",
        "node_id": "MDk6TWlsZXN0b25lMzU4MDM4Nw==",
        "number": 58,
        "open_issues": 20,
        "state": "open",
        "title": "3.0",
        "updated_at": "2019-02-26T18:41:57Z",
        "url": "https://api.github.com/repos/cython/cython/milestones/58"
    },
    "node_id": "MDU6SXNzdWUzNTQwMDAwMDM=",
    "number": 2579,
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "closed",
    "title": "Allow (compile-time) conditional \"with nogil\" blocks",
    "updated_at": "2019-02-26T18:41:57Z",
    "url": "https://api.github.com/repos/cython/cython/issues/2579",
    "user": {
        "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
        "events_url": "https://api.github.com/users/scoder/events{/privacy}",
        "followers_url": "https://api.github.com/users/scoder/followers",
        "following_url": "https://api.github.com/users/scoder/following{/other_user}",
        "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/scoder",
        "id": 491659,
        "login": "scoder",
        "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
        "organizations_url": "https://api.github.com/users/scoder/orgs",
        "received_events_url": "https://api.github.com/users/scoder/received_events",
        "repos_url": "https://api.github.com/users/scoder/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/scoder"
    }
}