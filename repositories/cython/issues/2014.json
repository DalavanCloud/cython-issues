{
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "I tried to optimize some of my jobs with cython and compiled them as executables for use in Windows (sorry, I can not use another OS).\r\nEvery time when using DASK or JOBLIB, I could not run the job, but my executable behaves as a Multiprocessing bomb.\r\nAt first I found out, that after compilation, the workers could no longer be identified (by __name__). Further the Workers did not get startet.\r\nFurther details to the problem can be found (and some solution ideas are given also over there) at my thread [StackOverflow](https://stackoverflow.com/questions/47325297/compiling-executable-with-dask-or-joblib-multiprocessing-with-cython-results-in) .",
    "closed_at": "2017-11-22T19:05:09Z",
    "comment_data": [
        {
            "author_association": "NONE",
            "body": "If I understand the behavior you're seeing correctly, it may also be alleviated by a block similar to this:\r\n\r\n```python\r\nif __name__ == '__main__':\r\n    setattr(sys, 'frozen', True)\r\n    multiprocessing.freeze_support()\r\n    main()\r\n```\r\n\r\nAs multiprocessing does some [funky things](https://github.com/python/cpython/blob/bd73e72b4a9f019be514954b1d40e64dc3a5e81c/Lib/multiprocessing/spawn.py#L78) to support \"frozen\" (i.e. made by py2exe or a few other tools) executables on windows systems, and it predicates this by checking for `sys.frozen` which is just kinda a convention some tools follow from what I understand.",
            "created_at": "2017-11-20T19:29:42Z",
            "html_url": "https://github.com/cython/cython/issues/2014#issuecomment-345802963",
            "id": 345802963,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2014",
            "updated_at": "2017-11-20T19:31:33Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/345802963",
            "user": {
                "avatar_url": "https://avatars1.githubusercontent.com/u/126290?v=4",
                "events_url": "https://api.github.com/users/jdodds/events{/privacy}",
                "followers_url": "https://api.github.com/users/jdodds/followers",
                "following_url": "https://api.github.com/users/jdodds/following{/other_user}",
                "gists_url": "https://api.github.com/users/jdodds/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/jdodds",
                "id": 126290,
                "login": "jdodds",
                "organizations_url": "https://api.github.com/users/jdodds/orgs",
                "received_events_url": "https://api.github.com/users/jdodds/received_events",
                "repos_url": "https://api.github.com/users/jdodds/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/jdodds/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/jdodds/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/jdodds"
            }
        },
        {
            "author_association": "NONE",
            "body": "Hi @jdodds ,\r\nI just tried with your block.\r\nWhile running from python it won't work - it results in many unsuccessful tries to start the subprocesses - with the command output\r\n\r\n```\r\nUnknown option: --\r\nusage: C:\\Users\\EbelingB\\AppData\\Local\\Continuum\\Anaconda3\\python.exe [option] ... [-c cmd | -m mod | file | -] [arg] ...\r\nTry `python -h' for more information.\r\n```\r\n\r\nThis messages pops up unlimited until control-C.\r\n\r\n**But now the good news: compiling the code (with your block) with cython and gcc runs fine.** That is fine - do you have an idea how to find a solution running from python and compiled?\r\nAnd would it be possible to include something in the cython code to solve that issue?\r\n\r\nAnother think I'm wondering about is:\r\nWouldn't there be a way to distinguish the (cython-compiled) processes as within python? Running from intertreter `python.exe` the `__name__` reads\r\n\r\n```\r\n__main__\r\n__mp_main__\r\n__mp_main__\r\n__mp_main__\r\n__mp_main__\r\n__mp_main__\r\n```\r\n\r\n\r\nwhile after compiling it reads\r\n\r\n```\r\n__main__\r\n__main__\r\n__main__\r\n__main__\r\n__main__\r\n__main__\r\n```\r\n\r\nThx\r\n",
            "created_at": "2017-11-21T06:27:50Z",
            "html_url": "https://github.com/cython/cython/issues/2014#issuecomment-345929717",
            "id": 345929717,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2014",
            "updated_at": "2017-11-21T07:09:00Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/345929717",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/230051?v=4",
                "events_url": "https://api.github.com/users/Barry1/events{/privacy}",
                "followers_url": "https://api.github.com/users/Barry1/followers",
                "following_url": "https://api.github.com/users/Barry1/following{/other_user}",
                "gists_url": "https://api.github.com/users/Barry1/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Barry1",
                "id": 230051,
                "login": "Barry1",
                "organizations_url": "https://api.github.com/users/Barry1/orgs",
                "received_events_url": "https://api.github.com/users/Barry1/received_events",
                "repos_url": "https://api.github.com/users/Barry1/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Barry1/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Barry1/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Barry1"
            }
        },
        {
            "author_association": "NONE",
            "body": "I further tried around with your input @jdodds resulting in the following solution\r\n\r\n```\r\nif __name__ == '__main__':\r\n    if sys.argv[0][-4:] == '.exe':\r\n        setattr(sys, 'frozen', True)\r\n    multiprocessing.freeze_support()\r\n    YOURMAINROUTINE()\r\n```\r\n\r\nwhich I also posted on [StackOverflow](https://stackoverflow.com/a/47410972/617339).\r\nThat one seems to be most elegant for me and it is working for python call and beeing compiled as an windows-executable.",
            "created_at": "2017-11-21T10:42:35Z",
            "html_url": "https://github.com/cython/cython/issues/2014#issuecomment-345987427",
            "id": 345987427,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2014",
            "updated_at": "2017-11-21T10:42:35Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/345987427",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/230051?v=4",
                "events_url": "https://api.github.com/users/Barry1/events{/privacy}",
                "followers_url": "https://api.github.com/users/Barry1/followers",
                "following_url": "https://api.github.com/users/Barry1/following{/other_user}",
                "gists_url": "https://api.github.com/users/Barry1/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Barry1",
                "id": 230051,
                "login": "Barry1",
                "organizations_url": "https://api.github.com/users/Barry1/orgs",
                "received_events_url": "https://api.github.com/users/Barry1/received_events",
                "repos_url": "https://api.github.com/users/Barry1/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Barry1/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Barry1/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Barry1"
            }
        },
        {
            "author_association": "OWNER",
            "body": "Closing as solved. Also, this is more of a support question, for which the bug tracker is the wrong place.",
            "created_at": "2017-11-22T19:05:09Z",
            "html_url": "https://github.com/cython/cython/issues/2014#issuecomment-346445340",
            "id": 346445340,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2014",
            "updated_at": "2017-11-22T19:05:09Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/346445340",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        }
    ],
    "comments": 4,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/2014/comments",
    "created_at": "2017-11-20T14:21:59Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars1.githubusercontent.com/u/126290?v=4",
                "events_url": "https://api.github.com/users/jdodds/events{/privacy}",
                "followers_url": "https://api.github.com/users/jdodds/followers",
                "following_url": "https://api.github.com/users/jdodds/following{/other_user}",
                "gists_url": "https://api.github.com/users/jdodds/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/jdodds",
                "id": 126290,
                "login": "jdodds",
                "organizations_url": "https://api.github.com/users/jdodds/orgs",
                "received_events_url": "https://api.github.com/users/jdodds/received_events",
                "repos_url": "https://api.github.com/users/jdodds/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/jdodds/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/jdodds/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/jdodds"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2017-11-21T06:27:50Z",
            "event": "mentioned",
            "id": 1351330738,
            "url": "https://api.github.com/repos/cython/cython/issues/events/1351330738"
        },
        {
            "actor": {
                "avatar_url": "https://avatars1.githubusercontent.com/u/126290?v=4",
                "events_url": "https://api.github.com/users/jdodds/events{/privacy}",
                "followers_url": "https://api.github.com/users/jdodds/followers",
                "following_url": "https://api.github.com/users/jdodds/following{/other_user}",
                "gists_url": "https://api.github.com/users/jdodds/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/jdodds",
                "id": 126290,
                "login": "jdodds",
                "organizations_url": "https://api.github.com/users/jdodds/orgs",
                "received_events_url": "https://api.github.com/users/jdodds/received_events",
                "repos_url": "https://api.github.com/users/jdodds/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/jdodds/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/jdodds/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/jdodds"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2017-11-21T06:27:50Z",
            "event": "subscribed",
            "id": 1351330739,
            "url": "https://api.github.com/repos/cython/cython/issues/events/1351330739"
        },
        {
            "actor": {
                "avatar_url": "https://avatars1.githubusercontent.com/u/126290?v=4",
                "events_url": "https://api.github.com/users/jdodds/events{/privacy}",
                "followers_url": "https://api.github.com/users/jdodds/followers",
                "following_url": "https://api.github.com/users/jdodds/following{/other_user}",
                "gists_url": "https://api.github.com/users/jdodds/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/jdodds",
                "id": 126290,
                "login": "jdodds",
                "organizations_url": "https://api.github.com/users/jdodds/orgs",
                "received_events_url": "https://api.github.com/users/jdodds/received_events",
                "repos_url": "https://api.github.com/users/jdodds/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/jdodds/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/jdodds/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/jdodds"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2017-11-21T10:42:35Z",
            "event": "mentioned",
            "id": 1351701123,
            "url": "https://api.github.com/repos/cython/cython/issues/events/1351701123"
        },
        {
            "actor": {
                "avatar_url": "https://avatars1.githubusercontent.com/u/126290?v=4",
                "events_url": "https://api.github.com/users/jdodds/events{/privacy}",
                "followers_url": "https://api.github.com/users/jdodds/followers",
                "following_url": "https://api.github.com/users/jdodds/following{/other_user}",
                "gists_url": "https://api.github.com/users/jdodds/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/jdodds",
                "id": 126290,
                "login": "jdodds",
                "organizations_url": "https://api.github.com/users/jdodds/orgs",
                "received_events_url": "https://api.github.com/users/jdodds/received_events",
                "repos_url": "https://api.github.com/users/jdodds/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/jdodds/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/jdodds/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/jdodds"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2017-11-21T10:42:35Z",
            "event": "subscribed",
            "id": 1351701124,
            "url": "https://api.github.com/repos/cython/cython/issues/events/1351701124"
        },
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2017-11-22T19:04:31Z",
            "event": "labeled",
            "id": 1354695636,
            "label": {
                "color": "fef2c0",
                "name": "support question"
            },
            "url": "https://api.github.com/repos/cython/cython/issues/events/1354695636"
        },
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2017-11-22T19:05:09Z",
            "event": "closed",
            "id": 1354696563,
            "url": "https://api.github.com/repos/cython/cython/issues/events/1354696563"
        }
    ],
    "events_url": "https://api.github.com/repos/cython/cython/issues/2014/events",
    "html_url": "https://github.com/cython/cython/issues/2014",
    "id": 275371914,
    "labels": [
        {
            "color": "fef2c0",
            "default": false,
            "id": 414800623,
            "name": "support question",
            "url": "https://api.github.com/repos/cython/cython/labels/support%20question"
        }
    ],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/2014/labels{/name}",
    "locked": false,
    "milestone": null,
    "number": 2014,
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "closed",
    "title": "Spawning-Problem when Cython-Compiling (to executable) DASK or JOBLIB multiprocessing on Windows",
    "updated_at": "2017-11-22T19:05:09Z",
    "url": "https://api.github.com/repos/cython/cython/issues/2014",
    "user": {
        "avatar_url": "https://avatars0.githubusercontent.com/u/230051?v=4",
        "events_url": "https://api.github.com/users/Barry1/events{/privacy}",
        "followers_url": "https://api.github.com/users/Barry1/followers",
        "following_url": "https://api.github.com/users/Barry1/following{/other_user}",
        "gists_url": "https://api.github.com/users/Barry1/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/Barry1",
        "id": 230051,
        "login": "Barry1",
        "organizations_url": "https://api.github.com/users/Barry1/orgs",
        "received_events_url": "https://api.github.com/users/Barry1/received_events",
        "repos_url": "https://api.github.com/users/Barry1/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/Barry1/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Barry1/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/Barry1"
    }
}