{
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "Cython seems to be crashing on travis ubuntu for py2 and 3 using the latest version from pip with `from libc.stdint cimport int64_t, uint64_t, int32_t, uint32_t, uint16_t, int16_t, uint8_t, int8_t, uintptr_t` in this file https://github.com/matham/ffpyplayer/blob/master/ffpyplayer/includes/ffmpeg.pxi.\r\n\r\nThe error traceback is:\r\n\r\n```\r\ncythoning ffpyplayer/pic.pyx to ffpyplayer/pic.c\r\n\r\nError compiling Cython file:\r\n------------------------------------------------------------\r\n...\r\n\r\nfrom libc.stdint cimport int64_t, uint64_t, int32_t, uint32_t, uint16_t,\\\r\n^\r\n------------------------------------------------------------\r\n\r\nffpyplayer/includes/ffmpeg.pxi:2:0: Compiler crash in AnalyseDeclarationsTransform\r\n\r\nFile 'ModuleNode.py', line 122, in analyse_declarations: ModuleNode(pic.pxd:1:0,\r\n    full_module_name = 'ffpyplayer.pic',\r\n    is_pxd = True)\r\nFile 'Nodes.py', line 417, in analyse_declarations: StatListNode(pic.pxd:1:0)\r\nFile 'Nodes.py', line 417, in analyse_declarations: StatListNode(ffmpeg.pxi:2:0)\r\nFile 'Nodes.py', line 7529, in analyse_declarations: FromCImportStatNode(ffmpeg.pxi:2:0,\r\n    imported_names = [...]/9,\r\n    module_name = u'libc.stdint')\r\n\r\nCompiler crash traceback from this point on:\r\n  File \"/home/travis/virtualenv/python2.7.13/lib/python2.7/site-packages/Cython/Compiler/Nodes.py\", line 7529, in analyse_declarations\r\n    module_scope = env.find_module(self.module_name, self.pos, relative_level=self.relative_level)\r\n  File \"/home/travis/virtualenv/python2.7.13/lib/python2.7/site-packages/Cython/Compiler/Symtab.py\", line 1222, in find_module\r\n    module_name, relative_to=relative_to, pos=pos, absolute_fallback=absolute_fallback)\r\n  File \"/home/travis/virtualenv/python2.7.13/lib/python2.7/site-packages/Cython/Compiler/Main.py\", line 178, in find_module\r\n    pxd_pathname = self.find_pxd_file(qualified_name, pos)\r\n  File \"/home/travis/virtualenv/python2.7.13/lib/python2.7/site-packages/Cython/Compiler/Main.py\", line 239, in find_pxd_file\r\n    pxd = self.search_include_directories(qualified_name, \".pxd\", pos, sys_path=sys_path)\r\n  File \"/home/travis/virtualenv/python2.7.13/lib/python2.7/site-packages/Cython/Compiler/Main.py\", line 280, in search_include_directories\r\n    tuple(self.include_directories), qualified_name, suffix, pos, include, sys_path)\r\n  File \"/home/travis/virtualenv/python2.7.13/lib/python2.7/site-packages/Cython/Utils.py\", line 30, in wrapper\r\n    res = cache[args] = f(*args)\r\n  File \"/home/travis/virtualenv/python2.7.13/lib/python2.7/site-packages/Cython/Utils.py\", line 148, in search_include_directories\r\n    path = os.path.join(dir, dotted_filename)\r\n  File \"/home/travis/virtualenv/python2.7.13/lib/python2.7/posixpath.py\", line 70, in join\r\n    elif path == '' or path.endswith('/'):\r\nAttributeError: 'NoneType' object has no attribute 'endswith'\r\n```",
    "closed_at": null,
    "comment_data": [
        {
            "author_association": "OWNER",
            "body": "Is there any chance you have a `None` in your `sys.path` ?",
            "created_at": "2017-11-28T21:02:38Z",
            "html_url": "https://github.com/cython/cython/issues/2024#issuecomment-347662459",
            "id": 347662459,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2024",
            "updated_at": "2017-11-28T21:02:38Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/347662459",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "author_association": "NONE",
            "body": "`sys.path` prints as `['', '/home/travis/build/matham/ffpyplayer', '/home/travis/virtualenv/python3.5.3/lib/python35.zip', '/home/travis/virtualenv/python3.5.3/lib/python3.5', '/home/travis/virtualenv/python3.5.3/lib/python3.5/plat-linux', '/home/travis/virtualenv/python3.5.3/lib/python3.5/lib-dynload', '/opt/python/3.5.3/lib/python3.5', '/opt/python/3.5.3/lib/python3.5/plat-linux', '/home/travis/virtualenv/python3.5.3/lib/python3.5/site-packages']`.",
            "created_at": "2017-11-29T22:37:08Z",
            "html_url": "https://github.com/cython/cython/issues/2024#issuecomment-348020242",
            "id": 348020242,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2024",
            "updated_at": "2017-11-29T22:37:08Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/348020242",
            "user": {
                "avatar_url": "https://avatars2.githubusercontent.com/u/1644286?v=4",
                "events_url": "https://api.github.com/users/matham/events{/privacy}",
                "followers_url": "https://api.github.com/users/matham/followers",
                "following_url": "https://api.github.com/users/matham/following{/other_user}",
                "gists_url": "https://api.github.com/users/matham/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/matham",
                "id": 1644286,
                "login": "matham",
                "organizations_url": "https://api.github.com/users/matham/orgs",
                "received_events_url": "https://api.github.com/users/matham/received_events",
                "repos_url": "https://api.github.com/users/matham/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/matham/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/matham/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/matham"
            }
        },
        {
            "author_association": "OWNER",
            "body": "It looks like `None` values can occur in the `include_dirs` that you are building in your `setup.py` script, e.g. when certain environment variables are not passed.",
            "created_at": "2017-11-30T21:09:29Z",
            "html_url": "https://github.com/cython/cython/issues/2024#issuecomment-348321500",
            "id": 348321500,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2024",
            "updated_at": "2017-11-30T21:09:29Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/348321500",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "author_association": "NONE",
            "body": "Seems you're right and that there was a None there. But cython should probably catch that and raise a better error? Because from the error it wasn't clear that it's dealing with a None value.",
            "created_at": "2017-12-05T01:59:29Z",
            "html_url": "https://github.com/cython/cython/issues/2024#issuecomment-349170390",
            "id": 349170390,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2024",
            "updated_at": "2017-12-05T01:59:29Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/349170390",
            "user": {
                "avatar_url": "https://avatars2.githubusercontent.com/u/1644286?v=4",
                "events_url": "https://api.github.com/users/matham/events{/privacy}",
                "followers_url": "https://api.github.com/users/matham/followers",
                "following_url": "https://api.github.com/users/matham/following{/other_user}",
                "gists_url": "https://api.github.com/users/matham/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/matham",
                "id": 1644286,
                "login": "matham",
                "organizations_url": "https://api.github.com/users/matham/orgs",
                "received_events_url": "https://api.github.com/users/matham/received_events",
                "repos_url": "https://api.github.com/users/matham/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/matham/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/matham/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/matham"
            }
        }
    ],
    "comments": 4,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/2024/comments",
    "created_at": "2017-11-25T20:59:18Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars2.githubusercontent.com/u/1644286?v=4",
                "events_url": "https://api.github.com/users/matham/events{/privacy}",
                "followers_url": "https://api.github.com/users/matham/followers",
                "following_url": "https://api.github.com/users/matham/following{/other_user}",
                "gists_url": "https://api.github.com/users/matham/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/matham",
                "id": 1644286,
                "login": "matham",
                "organizations_url": "https://api.github.com/users/matham/orgs",
                "received_events_url": "https://api.github.com/users/matham/received_events",
                "repos_url": "https://api.github.com/users/matham/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/matham/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/matham/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/matham"
            },
            "commit_id": "e4a1d5da8b71cbad7f64cb57d5b79e864c2cf1e8",
            "commit_url": "https://api.github.com/repos/matham/ffpyplayer/commits/e4a1d5da8b71cbad7f64cb57d5b79e864c2cf1e8",
            "created_at": "2017-11-29T21:09:40Z",
            "event": "referenced",
            "id": 1364417792,
            "url": "https://api.github.com/repos/cython/cython/issues/events/1364417792"
        }
    ],
    "events_url": "https://api.github.com/repos/cython/cython/issues/2024/events",
    "html_url": "https://github.com/cython/cython/issues/2024",
    "id": 276777422,
    "labels": [],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/2024/labels{/name}",
    "locked": false,
    "milestone": null,
    "number": 2024,
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "open",
    "title": "Compiler crash importing from libc in pxi",
    "updated_at": "2017-12-05T01:59:29Z",
    "url": "https://api.github.com/repos/cython/cython/issues/2024",
    "user": {
        "avatar_url": "https://avatars2.githubusercontent.com/u/1644286?v=4",
        "events_url": "https://api.github.com/users/matham/events{/privacy}",
        "followers_url": "https://api.github.com/users/matham/followers",
        "following_url": "https://api.github.com/users/matham/following{/other_user}",
        "gists_url": "https://api.github.com/users/matham/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/matham",
        "id": 1644286,
        "login": "matham",
        "organizations_url": "https://api.github.com/users/matham/orgs",
        "received_events_url": "https://api.github.com/users/matham/received_events",
        "repos_url": "https://api.github.com/users/matham/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/matham/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/matham/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/matham"
    }
}