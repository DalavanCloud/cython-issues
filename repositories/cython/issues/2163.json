{
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "When I run the following code, it will always raise a segment fault. Can you help me to explain what is wrong here?\r\n\r\n**test.pyx**\r\n```\r\ncdef int test () except -1:\r\n    return -1\r\n\r\ncdef public void run ():\r\n    try:\r\n        print 'Try block'\r\n        test ()\r\n    except:\r\n        print 'Catch block'\r\n    finally:\r\n        print 'Finally block'\r\n\r\n    print 'Done'\r\n\r\ndef crash():\r\n    run()\r\n```\r\n\r\nThen run it with\r\n\r\n```\r\ncythonize -i test.pyx\r\npython -c \"import test; test.crash()\"\r\n```\r\n\r\nResult\r\n\r\n```\r\nTry block\r\nCatch block\r\n[1]    80115 segmentation fault  python -c \"import test; test.crash()\"\r\n```\r\n\r\nI am using Cython 0.28 and Anconda (2.7). But i have the same problem on Ubuntu as well\r\n\r\n```\r\ncython -V\r\nCython version 0.28\r\npython -V\r\nPython 2.7.13 :: Anaconda custom (x86_64)\r\n```\r\n",
    "closed_at": "2018-03-20T20:33:04Z",
    "comment_data": [
        {
            "author_association": "NONE",
            "body": "Interestingly, if i comment out the `except` block, i will get it runs without segment fault\r\n\r\n```\r\ncdef int test () except -1:\r\n    return -1\r\n\r\ncdef public void run ():\r\n    try:\r\n        print 'Try block'\r\n        test ()\r\n    #except:\r\n    #    traceback.print_exc()\r\n    #    print 'Catch block'\r\n    finally:\r\n        print 'Finally block'\r\n\r\n    print 'Done'\r\n\r\ndef crash():\r\n    run()\r\n```\r\n\r\n```\r\nTry block\r\nFinally block\r\nException  in 'test.run' ignored\r\n```\r\n",
            "created_at": "2018-03-19T19:10:28Z",
            "html_url": "https://github.com/cython/cython/issues/2163#issuecomment-374332480",
            "id": 374332480,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2163",
            "node_id": "MDEyOklzc3VlQ29tbWVudDM3NDMzMjQ4MA==",
            "updated_at": "2018-03-19T19:10:28Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/374332480",
            "user": {
                "avatar_url": "https://avatars1.githubusercontent.com/u/177742?v=4",
                "events_url": "https://api.github.com/users/nqbao/events{/privacy}",
                "followers_url": "https://api.github.com/users/nqbao/followers",
                "following_url": "https://api.github.com/users/nqbao/following{/other_user}",
                "gists_url": "https://api.github.com/users/nqbao/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/nqbao",
                "id": 177742,
                "login": "nqbao",
                "node_id": "MDQ6VXNlcjE3Nzc0Mg==",
                "organizations_url": "https://api.github.com/users/nqbao/orgs",
                "received_events_url": "https://api.github.com/users/nqbao/received_events",
                "repos_url": "https://api.github.com/users/nqbao/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/nqbao/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/nqbao/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/nqbao"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Please read the documentation on [exception handling](http://docs.cython.org/en/latest/src/userguide/language_basics.html#error-return-values), and use the mailing list instead of the bug tracker for support questions.",
            "created_at": "2018-03-20T20:33:04Z",
            "html_url": "https://github.com/cython/cython/issues/2163#issuecomment-374746605",
            "id": 374746605,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2163",
            "node_id": "MDEyOklzc3VlQ29tbWVudDM3NDc0NjYwNQ==",
            "updated_at": "2018-03-20T20:33:04Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/374746605",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "author_association": "NONE",
            "body": "Thanks, i will post it to the mailing list. I thought it could be a bug of Cython so I posted it here.",
            "created_at": "2018-03-20T20:36:21Z",
            "html_url": "https://github.com/cython/cython/issues/2163#issuecomment-374747607",
            "id": 374747607,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2163",
            "node_id": "MDEyOklzc3VlQ29tbWVudDM3NDc0NzYwNw==",
            "updated_at": "2018-03-20T20:36:21Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/374747607",
            "user": {
                "avatar_url": "https://avatars1.githubusercontent.com/u/177742?v=4",
                "events_url": "https://api.github.com/users/nqbao/events{/privacy}",
                "followers_url": "https://api.github.com/users/nqbao/followers",
                "following_url": "https://api.github.com/users/nqbao/following{/other_user}",
                "gists_url": "https://api.github.com/users/nqbao/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/nqbao",
                "id": 177742,
                "login": "nqbao",
                "node_id": "MDQ6VXNlcjE3Nzc0Mg==",
                "organizations_url": "https://api.github.com/users/nqbao/orgs",
                "received_events_url": "https://api.github.com/users/nqbao/received_events",
                "repos_url": "https://api.github.com/users/nqbao/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/nqbao/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/nqbao/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/nqbao"
            }
        }
    ],
    "comments": 3,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/2163/comments",
    "created_at": "2018-03-18T23:57:26Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2018-03-20T20:33:04Z",
            "event": "closed",
            "id": 1531920883,
            "node_id": "MDExOkNsb3NlZEV2ZW50MTUzMTkyMDg4Mw==",
            "url": "https://api.github.com/repos/cython/cython/issues/events/1531920883"
        },
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2018-03-20T20:33:13Z",
            "event": "labeled",
            "id": 1531921164,
            "label": {
                "color": "fef2c0",
                "name": "support question"
            },
            "node_id": "MDEyOkxhYmVsZWRFdmVudDE1MzE5MjExNjQ=",
            "url": "https://api.github.com/repos/cython/cython/issues/events/1531921164"
        }
    ],
    "events_url": "https://api.github.com/repos/cython/cython/issues/2163/events",
    "html_url": "https://github.com/cython/cython/issues/2163",
    "id": 306298673,
    "labels": [
        {
            "color": "fef2c0",
            "default": false,
            "id": 414800623,
            "name": "support question",
            "node_id": "MDU6TGFiZWw0MTQ4MDA2MjM=",
            "url": "https://api.github.com/repos/cython/cython/labels/support%20question"
        }
    ],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/2163/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDU6SXNzdWUzMDYyOTg2NzM=",
    "number": 2163,
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "closed",
    "title": "Segment fault when handling exception",
    "updated_at": "2018-03-20T20:36:21Z",
    "url": "https://api.github.com/repos/cython/cython/issues/2163",
    "user": {
        "avatar_url": "https://avatars1.githubusercontent.com/u/177742?v=4",
        "events_url": "https://api.github.com/users/nqbao/events{/privacy}",
        "followers_url": "https://api.github.com/users/nqbao/followers",
        "following_url": "https://api.github.com/users/nqbao/following{/other_user}",
        "gists_url": "https://api.github.com/users/nqbao/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/nqbao",
        "id": 177742,
        "login": "nqbao",
        "node_id": "MDQ6VXNlcjE3Nzc0Mg==",
        "organizations_url": "https://api.github.com/users/nqbao/orgs",
        "received_events_url": "https://api.github.com/users/nqbao/received_events",
        "repos_url": "https://api.github.com/users/nqbao/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/nqbao/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/nqbao/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/nqbao"
    }
}