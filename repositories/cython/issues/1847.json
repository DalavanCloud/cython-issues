{
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "I have a cython module which depends on a cython module and its pxd file https://github.com/scoder/fastrlock.\r\n\r\nI tried following `setup.py` to install cython modules in `setup_requires`, and then `cythonize` in `sdist`.\r\n\r\nsetup.py\r\n\r\n```python\r\ndef make_extensions(ext):\r\n    \"\"\"Make Extension objects here. ext is .pyx or .c\"\"\"    \r\n\r\nclass custom_sdist(sdist.sdist):\r\n    def cythonize(self):\r\n        cythonize(make_extensions('.pyx'))\r\n\r\n    sub_commands = sdist.sdist.sub_commands + [('cythonize', cythonize)]\r\n\r\nclass custom_build_ext(build_ext.build_ext):\r\n    def run(self):\r\n        cythonize(make_extensions('.pyx'))\r\n        build_ext.build_ext.run(self)\r\n\r\nsetup( \r\n    setup_requires=[ \r\n        'fastrlock>=0.3',\r\n    ], \r\n    ext_modules=make_extensions('.c'),\r\n    cmdclass={'build_ext': custom_build_ext, 'sdist': custom_sdist}, \r\n)\r\n```\r\n\r\nBut, this did not work well. `python setup.py sdist` did not generate a tar file including c files.\r\nIt seemed that c files have to exist before running `setup`.\r\n\r\nI need a proper way to install cython modules before cythonizing, and include c files in a generated tar file.\r\n\r\nIn my understanding, cython currently does not provide a good way, but if there is already a proper way, please let me know.",
    "closed_at": "2017-08-30T17:38:32Z",
    "comment_data": [
        {
            "author_association": "NONE",
            "body": "Sorry, it was my bad. Below worked.\r\n\r\n```python\r\ndef make_extensions(ext):\r\n    \"\"\"Make Extension objects here. ext is .pyx or .c\"\"\"    \r\n\r\nclass custom_sdist(sdist.sdist):\r\n    def __init__(self, *args, **kwargs):\r\n        cythonize(make_extensions('.pyx'))\r\n        sdist.sdist.__init__(self, *args, **kwargs)\r\n\r\nclass custom_build_ext(build_ext.build_ext):\r\n    def run(self):\r\n        cythonize(make_extensions('.pyx'))\r\n        build_ext.build_ext.run(self)\r\n\r\nsetup( \r\n    setup_requires=[ \r\n        'fastrlock>=0.3',\r\n    ], \r\n    ext_modules=make_extensions('.c'),\r\n    cmdclass={'build_ext': custom_build_ext, 'sdist': custom_sdist}, \r\n)\r\n```",
            "created_at": "2017-08-30T17:38:30Z",
            "html_url": "https://github.com/cython/cython/issues/1847#issuecomment-326064965",
            "id": 326064965,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/1847",
            "updated_at": "2017-08-30T17:53:29Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/326064965",
            "user": {
                "avatar_url": "https://avatars2.githubusercontent.com/u/2290461?v=4",
                "events_url": "https://api.github.com/users/sonots/events{/privacy}",
                "followers_url": "https://api.github.com/users/sonots/followers",
                "following_url": "https://api.github.com/users/sonots/following{/other_user}",
                "gists_url": "https://api.github.com/users/sonots/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/sonots",
                "id": 2290461,
                "login": "sonots",
                "organizations_url": "https://api.github.com/users/sonots/orgs",
                "received_events_url": "https://api.github.com/users/sonots/received_events",
                "repos_url": "https://api.github.com/users/sonots/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/sonots/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/sonots/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/sonots"
            }
        }
    ],
    "comments": 1,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/1847/comments",
    "created_at": "2017-08-29T14:08:28Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars2.githubusercontent.com/u/2290461?v=4",
                "events_url": "https://api.github.com/users/sonots/events{/privacy}",
                "followers_url": "https://api.github.com/users/sonots/followers",
                "following_url": "https://api.github.com/users/sonots/following{/other_user}",
                "gists_url": "https://api.github.com/users/sonots/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/sonots",
                "id": 2290461,
                "login": "sonots",
                "organizations_url": "https://api.github.com/users/sonots/orgs",
                "received_events_url": "https://api.github.com/users/sonots/received_events",
                "repos_url": "https://api.github.com/users/sonots/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/sonots/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/sonots/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/sonots"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2017-08-30T17:38:32Z",
            "event": "closed",
            "id": 1228091224,
            "url": "https://api.github.com/repos/cython/cython/issues/events/1228091224"
        }
    ],
    "events_url": "https://api.github.com/repos/cython/cython/issues/1847/events",
    "html_url": "https://github.com/cython/cython/issues/1847",
    "id": 253675591,
    "labels": [],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/1847/labels{/name}",
    "locked": false,
    "milestone": null,
    "number": 1847,
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "closed",
    "title": "Need a way to install cython modules before cythonizing",
    "updated_at": "2017-08-30T17:53:29Z",
    "url": "https://api.github.com/repos/cython/cython/issues/1847",
    "user": {
        "avatar_url": "https://avatars2.githubusercontent.com/u/2290461?v=4",
        "events_url": "https://api.github.com/users/sonots/events{/privacy}",
        "followers_url": "https://api.github.com/users/sonots/followers",
        "following_url": "https://api.github.com/users/sonots/following{/other_user}",
        "gists_url": "https://api.github.com/users/sonots/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/sonots",
        "id": 2290461,
        "login": "sonots",
        "organizations_url": "https://api.github.com/users/sonots/orgs",
        "received_events_url": "https://api.github.com/users/sonots/received_events",
        "repos_url": "https://api.github.com/users/sonots/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/sonots/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/sonots/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/sonots"
    }
}