{
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "We semi-recently started using `cythonize` in pandas, and I'm thinking some of the wrapping code used there might be worth pushing upstream.  I'd like to get opinions before making PR(s) here.\r\n\r\n- Integrate optional tempita rendering: https://github.com/pandas-dev/pandas/blob/master/setup.py#L97\r\n\r\n- Avoid running cythonize during `python setup.py clean`: https://github.com/pandas-dev/pandas/blob/master/setup.py#L463\r\n\r\n- Enable cython coverage: https://github.com/pandas-dev/pandas/blob/master/setup.py#L442\r\n",
    "closed_at": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "I think enabling coverage/tracing support via an environment variable would be nice. There's always a certain risk that people might naively/accidentally export it globally and then get unexpected results from their next pip installation, but I guess that's just their fault then.\r\n\r\nRegarding tempita templates, well, we ship the template engine, so making that a general feature seems like it could help some use cases. People have been requesting some kind of code generation support in the past, although that was also before fused types existed. Note that this would suggest some kind of original source line tracking, because error reporting on generated code can be confusing. Not sure if it's worth going down that road …\r\n\r\nFinally, `clean` isn't the only command where compilation gets in the way. `setup.py --help-commands` lists quite a few, especially when `setuptools` is used. I think that basically brings us back to wanting better integration with setuptools in general.",
            "created_at": "2018-09-07T07:11:05Z",
            "html_url": "https://github.com/cython/cython/issues/2596#issuecomment-419345237",
            "id": 419345237,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2596",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQxOTM0NTIzNw==",
            "updated_at": "2018-09-07T07:11:05Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/419345237",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "IIRC, the consensus on templating was that we should make it easy for users\nto use a templating engine of their choice, rather than force one on the\nusers (or embed this as part of the language). Fused types did away with\nmuch of the need for this, but still aren't a complete solution. As\nmentioned, some way of tracking to the original line numbers should be\npreserved.\n\nCertainly worth writing up a proposal.\n\nOn Fri, Sep 7, 2018 at 9:11 AM scoder <notifications@github.com> wrote:\n\n> I think enabling coverage/tracing support via an environment variable\n> would be nice. There's always a certain risk that people might\n> naively/accidentally export it globally and then get unexpected results\n> from their next pip installation, but I guess that's just their fault then.\n>\n> Regarding tempita templates, well, we ship the template engine, so making\n> that a general feature seems like it could help some use cases. People have\n> been requesting some kind of code generation support in the past, although\n> that was also before fused types existed. Note that this would suggest some\n> kind of original source line tracking, because error reporting on generated\n> code can be confusing. Not sure if it's worth going down that road …\n>\n> Finally, clean isn't the only command where compilation gets in the way. setup.py\n> --help-commands lists quite a few, especially when setuptools is used. I\n> think that basically brings us back to wanting better integration with\n> setuptools in general.\n>\n> —\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/cython/cython/issues/2596#issuecomment-419345237>, or mute\n> the thread\n> <https://github.com/notifications/unsubscribe-auth/AAdqgTl2w_P48Z85vXZWyUWQM8wW9zQpks5uYhwKgaJpZM4WeASw>\n> .\n>\n",
            "created_at": "2018-09-07T08:18:15Z",
            "html_url": "https://github.com/cython/cython/issues/2596#issuecomment-419361264",
            "id": 419361264,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2596",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQxOTM2MTI2NA==",
            "updated_at": "2018-09-07T08:18:15Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/419361264",
            "user": {
                "avatar_url": "https://avatars3.githubusercontent.com/u/486017?v=4",
                "events_url": "https://api.github.com/users/robertwb/events{/privacy}",
                "followers_url": "https://api.github.com/users/robertwb/followers",
                "following_url": "https://api.github.com/users/robertwb/following{/other_user}",
                "gists_url": "https://api.github.com/users/robertwb/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/robertwb",
                "id": 486017,
                "login": "robertwb",
                "node_id": "MDQ6VXNlcjQ4NjAxNw==",
                "organizations_url": "https://api.github.com/users/robertwb/orgs",
                "received_events_url": "https://api.github.com/users/robertwb/received_events",
                "repos_url": "https://api.github.com/users/robertwb/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/robertwb/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/robertwb/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/robertwb"
            }
        },
        {
            "author_association": "NONE",
            "body": "> Certainly worth writing up a proposal.\r\n\r\nGreat.  Is there a particular process for that?  Usually after discussing in an Issue I'd open a PR, but it sounds like that isn't what you have in mind.\r\n",
            "created_at": "2018-09-07T16:17:56Z",
            "html_url": "https://github.com/cython/cython/issues/2596#issuecomment-419490939",
            "id": 419490939,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2596",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQxOTQ5MDkzOQ==",
            "updated_at": "2018-09-07T16:17:56Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/419490939",
            "user": {
                "avatar_url": "https://avatars1.githubusercontent.com/u/8078968?v=4",
                "events_url": "https://api.github.com/users/jbrockmendel/events{/privacy}",
                "followers_url": "https://api.github.com/users/jbrockmendel/followers",
                "following_url": "https://api.github.com/users/jbrockmendel/following{/other_user}",
                "gists_url": "https://api.github.com/users/jbrockmendel/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/jbrockmendel",
                "id": 8078968,
                "login": "jbrockmendel",
                "node_id": "MDQ6VXNlcjgwNzg5Njg=",
                "organizations_url": "https://api.github.com/users/jbrockmendel/orgs",
                "received_events_url": "https://api.github.com/users/jbrockmendel/received_events",
                "repos_url": "https://api.github.com/users/jbrockmendel/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/jbrockmendel/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/jbrockmendel/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/jbrockmendel"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "I think the coverage envvar is ready for a PR, but the template engine idea deserves some more discussion first. We can continue it here and I'll rename the ticket.\r\n\r\nBetter build system support is being discussed in #2531.",
            "created_at": "2018-09-07T16:37:58Z",
            "html_url": "https://github.com/cython/cython/issues/2596#issuecomment-419496592",
            "id": 419496592,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2596",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQxOTQ5NjU5Mg==",
            "updated_at": "2018-09-07T16:37:58Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/419496592",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        }
    ],
    "comments": 4,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/2596/comments",
    "created_at": "2018-09-07T00:54:26Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2018-09-07T16:41:47Z",
            "event": "renamed",
            "id": 1833286218,
            "node_id": "MDE3OlJlbmFtZWRUaXRsZUV2ZW50MTgzMzI4NjIxOA==",
            "rename": {
                "from": "ENH: upstream tempita/cythonize wrappers",
                "to": "Support (tempita/template) based code generation"
            },
            "url": "https://api.github.com/repos/cython/cython/issues/events/1833286218"
        },
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2018-09-07T16:43:29Z",
            "event": "labeled",
            "id": 1833289192,
            "label": {
                "color": "c2e0c6",
                "name": "feature"
            },
            "node_id": "MDEyOkxhYmVsZWRFdmVudDE4MzMyODkxOTI=",
            "url": "https://api.github.com/repos/cython/cython/issues/events/1833289192"
        },
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2018-09-07T16:43:29Z",
            "event": "labeled",
            "id": 1833289195,
            "label": {
                "color": "444444",
                "name": "Build System"
            },
            "node_id": "MDEyOkxhYmVsZWRFdmVudDE4MzMyODkxOTU=",
            "url": "https://api.github.com/repos/cython/cython/issues/events/1833289195"
        },
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2018-09-07T16:43:29Z",
            "event": "labeled",
            "id": 1833289197,
            "label": {
                "color": "444444",
                "name": "Tools"
            },
            "node_id": "MDEyOkxhYmVsZWRFdmVudDE4MzMyODkxOTc=",
            "url": "https://api.github.com/repos/cython/cython/issues/events/1833289197"
        }
    ],
    "events_url": "https://api.github.com/repos/cython/cython/issues/2596/events",
    "html_url": "https://github.com/cython/cython/issues/2596",
    "id": 357881106,
    "labels": [
        {
            "color": "444444",
            "default": false,
            "id": 425556353,
            "name": "Build System",
            "node_id": "MDU6TGFiZWw0MjU1NTYzNTM=",
            "url": "https://api.github.com/repos/cython/cython/labels/Build%20System"
        },
        {
            "color": "444444",
            "default": false,
            "id": 425563280,
            "name": "Tools",
            "node_id": "MDU6TGFiZWw0MjU1NjMyODA=",
            "url": "https://api.github.com/repos/cython/cython/labels/Tools"
        },
        {
            "color": "c2e0c6",
            "default": false,
            "id": 414805463,
            "name": "feature",
            "node_id": "MDU6TGFiZWw0MTQ4MDU0NjM=",
            "url": "https://api.github.com/repos/cython/cython/labels/feature"
        }
    ],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/2596/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDU6SXNzdWUzNTc4ODExMDY=",
    "number": 2596,
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "open",
    "title": "Support (tempita/template) based code generation",
    "updated_at": "2018-09-07T16:43:29Z",
    "url": "https://api.github.com/repos/cython/cython/issues/2596",
    "user": {
        "avatar_url": "https://avatars1.githubusercontent.com/u/8078968?v=4",
        "events_url": "https://api.github.com/users/jbrockmendel/events{/privacy}",
        "followers_url": "https://api.github.com/users/jbrockmendel/followers",
        "following_url": "https://api.github.com/users/jbrockmendel/following{/other_user}",
        "gists_url": "https://api.github.com/users/jbrockmendel/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/jbrockmendel",
        "id": 8078968,
        "login": "jbrockmendel",
        "node_id": "MDQ6VXNlcjgwNzg5Njg=",
        "organizations_url": "https://api.github.com/users/jbrockmendel/orgs",
        "received_events_url": "https://api.github.com/users/jbrockmendel/received_events",
        "repos_url": "https://api.github.com/users/jbrockmendel/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/jbrockmendel/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/jbrockmendel/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/jbrockmendel"
    }
}