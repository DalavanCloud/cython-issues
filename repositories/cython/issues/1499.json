{
    "assignee": null,
    "assignees": [],
    "body": "I'm not sure whether this is a Cython or a pip issue, but building Cython using\r\npip install --upgrade cython\r\nfailed for me on two quite different python-2.7 installations during the step of building  the Cython.Runtime.refnanny extension.\r\nOne machine was Mac OS X Sierra with python installed from homebrew and using virtualenv.\r\nThe other machine was on our linux cluster running CentOs. Virtualenv was present in both cases.\r\n\r\n```\r\nbash-4.1$ pip install --upgrade cython\r\nDownloading/unpacking cython\r\n  Downloading Cython-0.25.tar.gz (1.7Mb): 1.7Mb downloaded\r\n  Running setup.py egg_info for package cython\r\n    Unable to find pgen, not compiling formal grammar.\r\n    \r\n .... skipping lots ...\r\n\r\n\r\n    gcc -pthread -shared build/temp.linux-x86_64-2.7/home/xxx/virtualenvs/volker-py27/build/cython/Cython/Compiler/Code.o -L/g/software/linux/pack/python-2.7/lib -lpython2.7 -o build/lib.linux-x86_64-2.7/Cython/Compiler/Code.so\r\n    building 'Cython.Runtime.refnanny' extension\r\n    gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -I/g/software/linux/pack/python-2.7/include/python2.7 -c /home/xxx/virtualenvs/volker-py27/build/cython/Cython/Runtime/refnanny.c -o build/temp.linux-x86_64-2.7/home/xxx/virtualenvs/volker-py27/build/cython/Cython/Runtime/refnanny.o\r\n    gcc: /home/xxx/virtualenvs/volker-py27/build/cython/Cython/Runtime/refnanny.c: No such file or directory \r\n\r\n```\r\npathnames above slightly anonymized",
    "closed_at": "2016-10-27T07:58:31Z",
    "comment_data": [
        {
            "body": "Any ideas what would differ between Ubuntu and CentOS, or Sierra and El Capitan, that could cause this? Could you post a bit more of your log? Do you see\r\n\r\n    [ 9/10] Cythonizing /usr/local/google/home/robertwb/scratch/refnanny/cython/Cython/Runtime/refnanny.pyx",
            "created_at": "2016-10-26T16:15:13Z",
            "html_url": "https://github.com/cython/cython/issues/1499#issuecomment-256399728",
            "id": 256399728,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/1499",
            "updated_at": "2016-10-26T16:15:13Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/256399728",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/486017?v=3",
                "events_url": "https://api.github.com/users/robertwb/events{/privacy}",
                "followers_url": "https://api.github.com/users/robertwb/followers",
                "following_url": "https://api.github.com/users/robertwb/following{/other_user}",
                "gists_url": "https://api.github.com/users/robertwb/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/robertwb",
                "id": 486017,
                "login": "robertwb",
                "organizations_url": "https://api.github.com/users/robertwb/orgs",
                "received_events_url": "https://api.github.com/users/robertwb/received_events",
                "repos_url": "https://api.github.com/users/robertwb/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/robertwb/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/robertwb/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/robertwb"
            }
        },
        {
            "body": "Nope, the file never gets cythonized, it does work if I do it by hand.\r\nFWIW: I have about 50 different build distro VMs (including OSX and win32), and only CentOS 6.x fail out of all of them (all versions from 6.4 to 6.8, and both i386 and x86_64).",
            "created_at": "2016-10-26T16:23:35Z",
            "html_url": "https://github.com/cython/cython/issues/1499#issuecomment-256402143",
            "id": 256402143,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/1499",
            "updated_at": "2016-10-26T16:23:35Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/256402143",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1049737?v=3",
                "events_url": "https://api.github.com/users/totaam/events{/privacy}",
                "followers_url": "https://api.github.com/users/totaam/followers",
                "following_url": "https://api.github.com/users/totaam/following{/other_user}",
                "gists_url": "https://api.github.com/users/totaam/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/totaam",
                "id": 1049737,
                "login": "totaam",
                "organizations_url": "https://api.github.com/users/totaam/orgs",
                "received_events_url": "https://api.github.com/users/totaam/received_events",
                "repos_url": "https://api.github.com/users/totaam/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/totaam/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/totaam/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/totaam"
            }
        },
        {
            "body": "I was able to reproduce this on a fresh CentOS 6.x install. Still scratching my head as to what the difference is though...",
            "created_at": "2016-10-26T16:50:46Z",
            "html_url": "https://github.com/cython/cython/issues/1499#issuecomment-256409807",
            "id": 256409807,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/1499",
            "updated_at": "2016-10-26T16:50:46Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/256409807",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/486017?v=3",
                "events_url": "https://api.github.com/users/robertwb/events{/privacy}",
                "followers_url": "https://api.github.com/users/robertwb/followers",
                "following_url": "https://api.github.com/users/robertwb/following{/other_user}",
                "gists_url": "https://api.github.com/users/robertwb/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/robertwb",
                "id": 486017,
                "login": "robertwb",
                "organizations_url": "https://api.github.com/users/robertwb/orgs",
                "received_events_url": "https://api.github.com/users/robertwb/received_events",
                "repos_url": "https://api.github.com/users/robertwb/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/robertwb/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/robertwb/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/robertwb"
            }
        },
        {
            "body": "And now I can't get it to fail (and getting virtualenv up and running on CentOS is much more of a pain than I had hoped). Any poking around you could do here would be greatly appreciated. ",
            "created_at": "2016-10-26T17:15:43Z",
            "html_url": "https://github.com/cython/cython/issues/1499#issuecomment-256416498",
            "id": 256416498,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/1499",
            "updated_at": "2016-10-26T17:15:43Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/256416498",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/486017?v=3",
                "events_url": "https://api.github.com/users/robertwb/events{/privacy}",
                "followers_url": "https://api.github.com/users/robertwb/followers",
                "following_url": "https://api.github.com/users/robertwb/following{/other_user}",
                "gists_url": "https://api.github.com/users/robertwb/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/robertwb",
                "id": 486017,
                "login": "robertwb",
                "organizations_url": "https://api.github.com/users/robertwb/orgs",
                "received_events_url": "https://api.github.com/users/robertwb/received_events",
                "repos_url": "https://api.github.com/users/robertwb/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/robertwb/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/robertwb/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/robertwb"
            }
        },
        {
            "body": "I created a fresh CentOS 6.x VM\r\n\r\n    uname -a\r\n    Linux centos 2.6.32-642.6.2.el6.x86_64 #1 SMP Wed Oct 26 06:52:09 UTC 2016 x86_64 x86_64 x86_64 GNU/Linux\r\n\r\ninstalled python and virtualevn according to https://www.digitalocean.com/community/tutorials/how-to-set-up-python-2-7-6-and-3-3-3-on-centos-6-4\r\n\r\nIn a virtual environment, both `pip install --no-use-wheel cython` and cloning Cython and doing `python setup.py build` succeed. ",
            "created_at": "2016-10-26T18:45:38Z",
            "html_url": "https://github.com/cython/cython/issues/1499#issuecomment-256441084",
            "id": 256441084,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/1499",
            "updated_at": "2016-10-26T18:45:38Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/256441084",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/486017?v=3",
                "events_url": "https://api.github.com/users/robertwb/events{/privacy}",
                "followers_url": "https://api.github.com/users/robertwb/followers",
                "following_url": "https://api.github.com/users/robertwb/following{/other_user}",
                "gists_url": "https://api.github.com/users/robertwb/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/robertwb",
                "id": 486017,
                "login": "robertwb",
                "organizations_url": "https://api.github.com/users/robertwb/orgs",
                "received_events_url": "https://api.github.com/users/robertwb/received_events",
                "repos_url": "https://api.github.com/users/robertwb/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/robertwb/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/robertwb/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/robertwb"
            }
        },
        {
            "body": "Meanwhile I tried by downloading the master branch onto my Mac and building it using `python setup.py install`. Same error. \r\nWhen I downloaded the 0.24.x branch the build succeeded without issue. \r\n(I was previously on a very outdated version).\r\nI will try with CentOS on our cluster tomorrow. \r\n",
            "created_at": "2016-10-26T19:51:02Z",
            "html_url": "https://github.com/cython/cython/issues/1499#issuecomment-256457751",
            "id": 256457751,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/1499",
            "updated_at": "2016-10-26T19:51:02Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/256457751",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2210044?v=3",
                "events_url": "https://api.github.com/users/VolkerH/events{/privacy}",
                "followers_url": "https://api.github.com/users/VolkerH/followers",
                "following_url": "https://api.github.com/users/VolkerH/following{/other_user}",
                "gists_url": "https://api.github.com/users/VolkerH/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/VolkerH",
                "id": 2210044,
                "login": "VolkerH",
                "organizations_url": "https://api.github.com/users/VolkerH/orgs",
                "received_events_url": "https://api.github.com/users/VolkerH/received_events",
                "repos_url": "https://api.github.com/users/VolkerH/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/VolkerH/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/VolkerH/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/VolkerH"
            }
        },
        {
            "body": "Wait. Maybe it's working because of virtualenv?\r\nIs Python 2.6 no longer supported? Why not install directly using the system python?\r\n(Cython 0.24.x worked with Python 2.6 and I didn't see anything in the release announcements to indicate that it had been dropped)",
            "created_at": "2016-10-27T02:26:29Z",
            "html_url": "https://github.com/cython/cython/issues/1499#issuecomment-256529965",
            "id": 256529965,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/1499",
            "updated_at": "2016-10-27T02:26:29Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/256529965",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1049737?v=3",
                "events_url": "https://api.github.com/users/totaam/events{/privacy}",
                "followers_url": "https://api.github.com/users/totaam/followers",
                "following_url": "https://api.github.com/users/totaam/following{/other_user}",
                "gists_url": "https://api.github.com/users/totaam/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/totaam",
                "id": 1049737,
                "login": "totaam",
                "organizations_url": "https://api.github.com/users/totaam/orgs",
                "received_events_url": "https://api.github.com/users/totaam/received_events",
                "repos_url": "https://api.github.com/users/totaam/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/totaam/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/totaam/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/totaam"
            }
        },
        {
            "body": "Python 2.6 is still supported, though in my CentoOS install the system Python did not have development headers which is of course a blocker for using Cython. ",
            "created_at": "2016-10-27T04:20:17Z",
            "html_url": "https://github.com/cython/cython/issues/1499#issuecomment-256543036",
            "id": 256543036,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/1499",
            "updated_at": "2016-10-27T04:20:17Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/256543036",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/486017?v=3",
                "events_url": "https://api.github.com/users/robertwb/events{/privacy}",
                "followers_url": "https://api.github.com/users/robertwb/followers",
                "following_url": "https://api.github.com/users/robertwb/following{/other_user}",
                "gists_url": "https://api.github.com/users/robertwb/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/robertwb",
                "id": 486017,
                "login": "robertwb",
                "organizations_url": "https://api.github.com/users/robertwb/orgs",
                "received_events_url": "https://api.github.com/users/robertwb/received_events",
                "repos_url": "https://api.github.com/users/robertwb/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/robertwb/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/robertwb/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/robertwb"
            }
        },
        {
            "body": "`yum install python-devel gcc`\r\nIIRC, that's all I needed on centos 6.x to build Cython.",
            "created_at": "2016-10-27T06:29:27Z",
            "html_url": "https://github.com/cython/cython/issues/1499#issuecomment-256557725",
            "id": 256557725,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/1499",
            "updated_at": "2016-10-27T06:29:27Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/256557725",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1049737?v=3",
                "events_url": "https://api.github.com/users/totaam/events{/privacy}",
                "followers_url": "https://api.github.com/users/totaam/followers",
                "following_url": "https://api.github.com/users/totaam/following{/other_user}",
                "gists_url": "https://api.github.com/users/totaam/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/totaam",
                "id": 1049737,
                "login": "totaam",
                "organizations_url": "https://api.github.com/users/totaam/orgs",
                "received_events_url": "https://api.github.com/users/totaam/received_events",
                "repos_url": "https://api.github.com/users/totaam/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/totaam/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/totaam/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/totaam"
            }
        },
        {
            "body": "I think I figured this out. It was due to a really old version of setuptools being used. ",
            "created_at": "2016-10-27T07:58:42Z",
            "html_url": "https://github.com/cython/cython/issues/1499#issuecomment-256573440",
            "id": 256573440,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/1499",
            "updated_at": "2016-10-27T07:58:42Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/256573440",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/486017?v=3",
                "events_url": "https://api.github.com/users/robertwb/events{/privacy}",
                "followers_url": "https://api.github.com/users/robertwb/followers",
                "following_url": "https://api.github.com/users/robertwb/following{/other_user}",
                "gists_url": "https://api.github.com/users/robertwb/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/robertwb",
                "id": 486017,
                "login": "robertwb",
                "organizations_url": "https://api.github.com/users/robertwb/orgs",
                "received_events_url": "https://api.github.com/users/robertwb/received_events",
                "repos_url": "https://api.github.com/users/robertwb/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/robertwb/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/robertwb/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/robertwb"
            }
        }
    ],
    "comments": 10,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/1499/comments",
    "created_at": "2016-10-26T14:26:07Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/486017?v=3",
                "events_url": "https://api.github.com/users/robertwb/events{/privacy}",
                "followers_url": "https://api.github.com/users/robertwb/followers",
                "following_url": "https://api.github.com/users/robertwb/following{/other_user}",
                "gists_url": "https://api.github.com/users/robertwb/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/robertwb",
                "id": 486017,
                "login": "robertwb",
                "organizations_url": "https://api.github.com/users/robertwb/orgs",
                "received_events_url": "https://api.github.com/users/robertwb/received_events",
                "repos_url": "https://api.github.com/users/robertwb/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/robertwb/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/robertwb/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/robertwb"
            },
            "commit_id": "749d8fd43f0b938ba46824aa5bf6363fa755cc54",
            "commit_url": "https://api.github.com/repos/cython/cython/commits/749d8fd43f0b938ba46824aa5bf6363fa755cc54",
            "created_at": "2016-10-27T07:58:31Z",
            "event": "closed",
            "id": 838209501,
            "url": "https://api.github.com/repos/cython/cython/issues/events/838209501"
        }
    ],
    "events_url": "https://api.github.com/repos/cython/cython/issues/1499/events",
    "html_url": "https://github.com/cython/cython/issues/1499",
    "id": 185409189,
    "labels": [],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/1499/labels{/name}",
    "locked": false,
    "milestone": null,
    "number": 1499,
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "closed",
    "title": "Cython installation fails with pip - Cython.Runtime.refnanny extension",
    "updated_at": "2016-10-27T07:58:42Z",
    "url": "https://api.github.com/repos/cython/cython/issues/1499",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/2210044?v=3",
        "events_url": "https://api.github.com/users/VolkerH/events{/privacy}",
        "followers_url": "https://api.github.com/users/VolkerH/followers",
        "following_url": "https://api.github.com/users/VolkerH/following{/other_user}",
        "gists_url": "https://api.github.com/users/VolkerH/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/VolkerH",
        "id": 2210044,
        "login": "VolkerH",
        "organizations_url": "https://api.github.com/users/VolkerH/orgs",
        "received_events_url": "https://api.github.com/users/VolkerH/received_events",
        "repos_url": "https://api.github.com/users/VolkerH/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/VolkerH/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/VolkerH/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/VolkerH"
    }
}