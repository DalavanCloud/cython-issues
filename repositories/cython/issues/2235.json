{
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "Using `tests/run/libcpp_all.pyx` from tag 0.28.2 [link](https://github.com/cython/cython/blob/0.28.2/tests/run/libcpp_all.pyx), and the following boiler-plate `setup.py`:\r\n\r\n```python\r\nfrom distutils.core import (setup, Extension)\r\nfrom Cython.Build import cythonize\r\n\r\nsetup(ext_modules = cythonize(Extension(\r\n           \"libcpp_all\",                    # the extension name\r\n           sources=[\"libcpp_all.pyx\"],      # the Cython source and\r\n                                            # additional C++ source files\r\n           language=\"c++\",                  # generate and compile C++ code\r\n      )))\r\n```\r\n\r\nUsing Cython 0.28.2 and Python 3.6.4 on CentOS with GCC 4.4.7 and building the extension in-place with\r\n\r\n```\r\npython setup.py build_ext --inplace\r\n```\r\n\r\nthe generated module fails to import and `python -c 'import libcpp_all'` seg-faults.\r\n\r\nThe module compiles and imports fine with Cython 0.27.3 and the same old compiler.\r\n\r\nBacktrace in gdb is as follows:\r\n\r\n```\r\n>>> import libcpp_all\r\n\r\nProgram received signal SIGSEGV, Segmentation fault.\r\n<<skipped>>\r\n(gdb) bt\r\n#0  std::_Rb_tree_insert_and_rebalance(bool, std::_Rb_tree_node_base*, std::_Rb_tree_node_base*, std::_Rb_tree_node_base&) ()\r\n    at /opt/conda/conda-bld/compilers_linux-64_1520532893746/work/.build/src/gcc-7.2.0/libstdc++-v3/src/c++98/tree.cc:214\r\n#1  0x00007ffff65d0614 in std::_Rb_tree<int, std::pair<int const, int>, std::_Select1st<std::pair<int const, int> >, std::less<int>, std::allocator<std::pair<int const, int> > >::_insert_ (this=0x7fffffffce20, __x=<value optimized out>, __p=0x0, __v=...) at /usr/lib/gcc/x86_64-redhat-linux/4.4.7/../../../../include/c++/4.4.7/bits/stl_tree.h:883\r\n#2  0x00007ffff65cfa91 in _M_insert_unique () at /usr/lib/gcc/x86_64-redhat-linux/4.4.7/../../../../include/c++/4.4.7/bits/stl_tree.h:1182\r\n#3  insert () at /usr/lib/gcc/x86_64-redhat-linux/4.4.7/../../../../include/c++/4.4.7/bits/stl_map.h:500\r\n#4  PyInit_libcpp_all () at libcpp_all.cpp:2441\r\n```\r\n\r\n",
    "closed_at": "2018-05-18T16:35:57Z",
    "comment_data": [
        {
            "author_association": "NONE",
            "body": "Please indicate whether this worth pursuing, and if so, whether devs would like me to provide any further diagnostics.  Thank you.",
            "created_at": "2018-05-08T13:30:26Z",
            "html_url": "https://github.com/cython/cython/issues/2235#issuecomment-387402577",
            "id": 387402577,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2235",
            "node_id": "MDEyOklzc3VlQ29tbWVudDM4NzQwMjU3Nw==",
            "updated_at": "2018-05-08T13:30:26Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/387402577",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/21087696?v=4",
                "events_url": "https://api.github.com/users/oleksandr-pavlyk/events{/privacy}",
                "followers_url": "https://api.github.com/users/oleksandr-pavlyk/followers",
                "following_url": "https://api.github.com/users/oleksandr-pavlyk/following{/other_user}",
                "gists_url": "https://api.github.com/users/oleksandr-pavlyk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/oleksandr-pavlyk",
                "id": 21087696,
                "login": "oleksandr-pavlyk",
                "node_id": "MDQ6VXNlcjIxMDg3Njk2",
                "organizations_url": "https://api.github.com/users/oleksandr-pavlyk/orgs",
                "received_events_url": "https://api.github.com/users/oleksandr-pavlyk/received_events",
                "repos_url": "https://api.github.com/users/oleksandr-pavlyk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/oleksandr-pavlyk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/oleksandr-pavlyk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/oleksandr-pavlyk"
            }
        },
        {
            "author_association": "NONE",
            "body": "ping.",
            "created_at": "2018-05-17T19:16:08Z",
            "html_url": "https://github.com/cython/cython/issues/2235#issuecomment-389978183",
            "id": 389978183,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2235",
            "node_id": "MDEyOklzc3VlQ29tbWVudDM4OTk3ODE4Mw==",
            "updated_at": "2018-05-17T19:16:08Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/389978183",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/21087696?v=4",
                "events_url": "https://api.github.com/users/oleksandr-pavlyk/events{/privacy}",
                "followers_url": "https://api.github.com/users/oleksandr-pavlyk/followers",
                "following_url": "https://api.github.com/users/oleksandr-pavlyk/following{/other_user}",
                "gists_url": "https://api.github.com/users/oleksandr-pavlyk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/oleksandr-pavlyk",
                "id": 21087696,
                "login": "oleksandr-pavlyk",
                "node_id": "MDQ6VXNlcjIxMDg3Njk2",
                "organizations_url": "https://api.github.com/users/oleksandr-pavlyk/orgs",
                "received_events_url": "https://api.github.com/users/oleksandr-pavlyk/received_events",
                "repos_url": "https://api.github.com/users/oleksandr-pavlyk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/oleksandr-pavlyk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/oleksandr-pavlyk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/oleksandr-pavlyk"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Does\n\n    python runtests.py libcpp_all\n\nwork for you?\n\nOn Thu, May 17, 2018 at 12:16 PM, Oleksandr Pavlyk <notifications@github.com\n> wrote:\n\n> ping.\n>\n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/cython/cython/issues/2235#issuecomment-389978183>, or mute\n> the thread\n> <https://github.com/notifications/unsubscribe-auth/AAdqgTMRGn_KiIhMcM-b59Q8VlRo5Kq-ks5tzcx5gaJpZM4TxmqL>\n> .\n>\n",
            "created_at": "2018-05-17T21:09:22Z",
            "html_url": "https://github.com/cython/cython/issues/2235#issuecomment-390012477",
            "id": 390012477,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2235",
            "node_id": "MDEyOklzc3VlQ29tbWVudDM5MDAxMjQ3Nw==",
            "updated_at": "2018-05-17T21:09:22Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/390012477",
            "user": {
                "avatar_url": "https://avatars3.githubusercontent.com/u/486017?v=4",
                "events_url": "https://api.github.com/users/robertwb/events{/privacy}",
                "followers_url": "https://api.github.com/users/robertwb/followers",
                "following_url": "https://api.github.com/users/robertwb/following{/other_user}",
                "gists_url": "https://api.github.com/users/robertwb/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/robertwb",
                "id": 486017,
                "login": "robertwb",
                "node_id": "MDQ6VXNlcjQ4NjAxNw==",
                "organizations_url": "https://api.github.com/users/robertwb/orgs",
                "received_events_url": "https://api.github.com/users/robertwb/received_events",
                "repos_url": "https://api.github.com/users/robertwb/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/robertwb/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/robertwb/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/robertwb"
            }
        },
        {
            "author_association": "NONE",
            "body": "No, it does not. This is how I discovered the problem, but thought it's best to provide a stand-alone reproducer.\r\n\r\nHere are the steps. Spin docker container for centos, which has\r\n\r\n```\r\nbash-4.1$ gcc --version\r\ngcc (GCC) 4.4.7 20120313 (Red Hat 4.4.7-18)\r\nCopyright (C) 2010 Free Software Foundation, Inc.\r\nThis is free software; see the source for copying conditions.  There is NO\r\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\r\n```\r\n\r\nDownload miniconda3, and create environment with Cython in it: `conda create -n anac cython numpy`.\r\n\r\nClone cython github repo, `cd` into it. \r\n\r\n```\r\n(anac) bash-4.1$ python runtests.py libcpp_all\r\nPython 3.6.5 |Anaconda, Inc.| (default, Apr 29 2018, 16:14:56)\r\n[GCC 7.2.0]\r\n\r\nRunning tests against Cython 0.28.2 956985df34a9ca8a14d5f061043c0be89734a1e6\r\nBackends: c,cpp\r\n\r\nSegmentation fault (core dumped)\r\n```\r\n\r\nDowngrading Cython to 0.27.3 makes the crash go away:\r\n\r\n```\r\n(anac5) bash-4.1$ git checkout 0.27.3\r\nNote: checking out '0.27.3'.\r\n\r\nYou are in 'detached HEAD' state. You can look around, make experimental\r\nchanges and commit them, and you can discard any commits you make in this\r\nstate without impacting any branches by performing another checkout.\r\n\r\nIf you want to create a new branch to retain commits you create, you may\r\ndo so (now or later) by using -b with the checkout command again. Example:\r\n\r\n  git checkout -b new_branch_name\r\n\r\nHEAD is now at 8ad16fc... Fix another direct usage of \"tstate->exc_type\" which changed in Py3.7. Closes #1955.\r\n(anac5) bash-4.1$ python runtests.py libcpp_all\r\nPython 3.6.5 |Anaconda, Inc.| (default, Apr 29 2018, 16:14:56)\r\n[GCC 7.2.0]\r\n\r\nRunning tests against Cython 0.27.3\r\nBackends: c,cpp\r\n\r\n----------------------------------------------------------------------\r\nRan 4 tests in 2.203s\r\n\r\nOK\r\nALL DONE\r\n```\r\n\r\nThe test also seg-faults for tags 0.28 and 0.28.1",
            "created_at": "2018-05-18T14:27:33Z",
            "html_url": "https://github.com/cython/cython/issues/2235#issuecomment-390224731",
            "id": 390224731,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2235",
            "node_id": "MDEyOklzc3VlQ29tbWVudDM5MDIyNDczMQ==",
            "updated_at": "2018-05-18T14:27:33Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/390224731",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/21087696?v=4",
                "events_url": "https://api.github.com/users/oleksandr-pavlyk/events{/privacy}",
                "followers_url": "https://api.github.com/users/oleksandr-pavlyk/followers",
                "following_url": "https://api.github.com/users/oleksandr-pavlyk/following{/other_user}",
                "gists_url": "https://api.github.com/users/oleksandr-pavlyk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/oleksandr-pavlyk",
                "id": 21087696,
                "login": "oleksandr-pavlyk",
                "node_id": "MDQ6VXNlcjIxMDg3Njk2",
                "organizations_url": "https://api.github.com/users/oleksandr-pavlyk/orgs",
                "received_events_url": "https://api.github.com/users/oleksandr-pavlyk/received_events",
                "repos_url": "https://api.github.com/users/oleksandr-pavlyk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/oleksandr-pavlyk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/oleksandr-pavlyk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/oleksandr-pavlyk"
            }
        },
        {
            "author_association": "NONE",
            "body": "The test passes with `git checkout 9f3f99f`, but seg-faults with `git checkout 486421f`, which narrows it down to one of these:\r\n\r\n```\r\nbash-4.1$ git log --oneline 9f3f99f..486421f\r\n486421f Merge branch 'master' into readonly_buffers\r\n969dbad Explicitly disable CYTHON_SMALL_CODE in clang.\r\nf56f402 Make CYTHON_SMALL_CODE macro work with g++.\r\n74173e2 Allow users to override the CYTHON_SMALL_CODE macro.\r\n969765b Optimise the module init function for small code size regardless of the externally provided CFLAGS. See #2102.\r\n56aa4c1 Suppress C compiler warnings about switch-case fall-throughs in buffer type parsing code.\r\n151c05d Do not try to automatically infer ctuple types if one of the items is a memoryview.\r\n3efa9f9 Merge branch 'master' into readonly_buffers\r\nc09f9af Fix compiler crash when index base does not have an 'entry'.\r\n1800cbd Initial attempt at implementing read-only memoryviews. (Github issue #1605)\r\n```\r\n\r\nThe test passes with  `git checkout 56aa4c1`",
            "created_at": "2018-05-18T14:31:01Z",
            "html_url": "https://github.com/cython/cython/issues/2235#issuecomment-390225836",
            "id": 390225836,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2235",
            "node_id": "MDEyOklzc3VlQ29tbWVudDM5MDIyNTgzNg==",
            "updated_at": "2018-05-18T14:31:01Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/390225836",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/21087696?v=4",
                "events_url": "https://api.github.com/users/oleksandr-pavlyk/events{/privacy}",
                "followers_url": "https://api.github.com/users/oleksandr-pavlyk/followers",
                "following_url": "https://api.github.com/users/oleksandr-pavlyk/following{/other_user}",
                "gists_url": "https://api.github.com/users/oleksandr-pavlyk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/oleksandr-pavlyk",
                "id": 21087696,
                "login": "oleksandr-pavlyk",
                "node_id": "MDQ6VXNlcjIxMDg3Njk2",
                "organizations_url": "https://api.github.com/users/oleksandr-pavlyk/orgs",
                "received_events_url": "https://api.github.com/users/oleksandr-pavlyk/received_events",
                "repos_url": "https://api.github.com/users/oleksandr-pavlyk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/oleksandr-pavlyk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/oleksandr-pavlyk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/oleksandr-pavlyk"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Can you try adding `-D CYTHON_SMALL_CODE=` to your CFLAGS ?",
            "created_at": "2018-05-18T14:36:26Z",
            "html_url": "https://github.com/cython/cython/issues/2235#issuecomment-390227527",
            "id": 390227527,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2235",
            "node_id": "MDEyOklzc3VlQ29tbWVudDM5MDIyNzUyNw==",
            "updated_at": "2018-05-18T14:36:26Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/390227527",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "author_association": "NONE",
            "body": "Yes, this is the culprit:\r\n\r\n```\r\n(anac) bash-4.1$ CFLAGS=\"-D CYTHON_SMALL_CODE= $CFLAGS\" python runtests.py libcpp_all\r\nPython 3.6.5 |Anaconda, Inc.| (default, Apr 29 2018, 16:14:56)\r\n[GCC 7.2.0]\r\n\r\nRunning tests against Cython 0.28a0 486421f66ce44f9f1992ade6c2d6d1cb880226c5\r\nBackends: c,cpp\r\n\r\n----------------------------------------------------------------------\r\nRan 4 tests in 2.186s\r\n\r\nOK\r\nALL DONE\r\n```\r\n\r\nBut crashes without it:\r\n\r\n```\r\n(anac) bash-4.1$ python runtests.py libcpp_all\r\nPython 3.6.5 |Anaconda, Inc.| (default, Apr 29 2018, 16:14:56)\r\n[GCC 7.2.0]\r\n\r\nRunning tests against Cython 0.28a0 486421f66ce44f9f1992ade6c2d6d1cb880226c5\r\nBackends: c,cpp\r\n\r\nSegmentation fault (core dumped)\r\n```",
            "created_at": "2018-05-18T15:34:30Z",
            "html_url": "https://github.com/cython/cython/issues/2235#issuecomment-390245622",
            "id": 390245622,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2235",
            "node_id": "MDEyOklzc3VlQ29tbWVudDM5MDI0NTYyMg==",
            "updated_at": "2018-05-18T15:34:30Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/390245622",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/21087696?v=4",
                "events_url": "https://api.github.com/users/oleksandr-pavlyk/events{/privacy}",
                "followers_url": "https://api.github.com/users/oleksandr-pavlyk/followers",
                "following_url": "https://api.github.com/users/oleksandr-pavlyk/following{/other_user}",
                "gists_url": "https://api.github.com/users/oleksandr-pavlyk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/oleksandr-pavlyk",
                "id": 21087696,
                "login": "oleksandr-pavlyk",
                "node_id": "MDQ6VXNlcjIxMDg3Njk2",
                "organizations_url": "https://api.github.com/users/oleksandr-pavlyk/orgs",
                "received_events_url": "https://api.github.com/users/oleksandr-pavlyk/received_events",
                "repos_url": "https://api.github.com/users/oleksandr-pavlyk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/oleksandr-pavlyk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/oleksandr-pavlyk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/oleksandr-pavlyk"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Ok, I'll disable that feature for GCC <= 4.4 then. Or, if I understand correctly, then disabling it for g++ (i.e. C++ mode) might actually be enough.\r\n\r\nOne more thing to know, could you check if it also crashes when compiling with `-Os` (and the `-D` macro) ? Because that's what the macro does in gcc when you do _not_ define it, it enables `-Os` selectively for the module init function to reduce its size (since it's only executed once).",
            "created_at": "2018-05-18T16:17:31Z",
            "html_url": "https://github.com/cython/cython/issues/2235#issuecomment-390258150",
            "id": 390258150,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2235",
            "node_id": "MDEyOklzc3VlQ29tbWVudDM5MDI1ODE1MA==",
            "updated_at": "2018-05-18T16:36:00Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/390258150",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "author_association": "NONE",
            "body": "Per your request, using 0.28.2 tagged revision:\r\n\r\n```\r\n(anac) bash-4.1$ git checkout 0.28.2\r\nNote: checking out '0.28.2'.\r\n\r\nYou are in 'detached HEAD' state. You can look around, make experimental\r\nchanges and commit them, and you can discard any commits you make in this\r\nstate without impacting any branches by performing another checkout.\r\n\r\nIf you want to create a new branch to retain commits you create, you may\r\ndo so (now or later) by using -b with the checkout command again. Example:\r\n\r\n  git checkout -b new_branch_name\r\n\r\nHEAD is now at 93e3bb9... Prepare release of 0.28.2.\r\n```\r\n\r\n\r\n\r\n```\r\n(anac) bash-4.1$ python runtests.py libcpp_all\r\nPython 3.6.5 |Anaconda, Inc.| (default, Apr 29 2018, 16:14:56)\r\n[GCC 7.2.0]\r\n\r\nRunning tests against Cython 0.28.2\r\nBackends: c,cpp\r\n\r\nSegmentation fault (core dumped)\r\n```\r\n\r\nSetting `CYTHON_SMALL_CODE` to empty and using `-Os` strangely results in no seg-fault:\r\n\r\n```\r\n(anac) bash-4.1$ CFLAGS=\"-DCYTHON_SMALL_CODE= -Os $CFLAGS\" python runtests.py libcpp_all\r\nPython 3.6.5 |Anaconda, Inc.| (default, Apr 29 2018, 16:14:56)\r\n[GCC 7.2.0]\r\n\r\nRunning tests against Cython 0.28.2\r\nBackends: c,cpp\r\n\r\n----------------------------------------------------------------------\r\nRan 4 tests in 1.507s\r\n\r\nOK\r\nALL DONE\r\n```\r\n\r\nI can confirm that the change that closed this issue resolves it on my end:\r\n\r\n```\r\n(anac) bash-4.1$ python runtests.py libcpp_all\r\nPython 3.6.5 |Anaconda, Inc.| (default, Apr 29 2018, 16:14:56)\r\n[GCC 7.2.0]\r\n\r\nRunning tests against Cython 0.28.2 0c3e3613554f73080f266fafeb0efdc4f354c3ce\r\nBackends: c,cpp\r\n\r\n----------------------------------------------------------------------\r\nRan 6 tests in 2.059s\r\n\r\nOK\r\nALL DONE\r\n```\r\n\r\nThank you.",
            "created_at": "2018-05-18T16:46:41Z",
            "html_url": "https://github.com/cython/cython/issues/2235#issuecomment-390265892",
            "id": 390265892,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2235",
            "node_id": "MDEyOklzc3VlQ29tbWVudDM5MDI2NTg5Mg==",
            "updated_at": "2018-05-18T16:46:41Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/390265892",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/21087696?v=4",
                "events_url": "https://api.github.com/users/oleksandr-pavlyk/events{/privacy}",
                "followers_url": "https://api.github.com/users/oleksandr-pavlyk/followers",
                "following_url": "https://api.github.com/users/oleksandr-pavlyk/following{/other_user}",
                "gists_url": "https://api.github.com/users/oleksandr-pavlyk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/oleksandr-pavlyk",
                "id": 21087696,
                "login": "oleksandr-pavlyk",
                "node_id": "MDQ6VXNlcjIxMDg3Njk2",
                "organizations_url": "https://api.github.com/users/oleksandr-pavlyk/orgs",
                "received_events_url": "https://api.github.com/users/oleksandr-pavlyk/received_events",
                "repos_url": "https://api.github.com/users/oleksandr-pavlyk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/oleksandr-pavlyk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/oleksandr-pavlyk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/oleksandr-pavlyk"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Thanks for confirming the fix.\r\nJust in case you have a `-O...` option in your `$CFLAGS`, it's the last one that wins, not the first one.",
            "created_at": "2018-05-18T16:52:33Z",
            "html_url": "https://github.com/cython/cython/issues/2235#issuecomment-390267519",
            "id": 390267519,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2235",
            "node_id": "MDEyOklzc3VlQ29tbWVudDM5MDI2NzUxOQ==",
            "updated_at": "2018-05-18T16:52:33Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/390267519",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "author_association": "NONE",
            "body": "Of course the last optimization spec takes precedence. Silly me. \r\n\r\nHowever, moving `-Os` to the end does not seem to elicit the seg-fault.\r\n\r\n```\r\n(anac) bash-4.1$ CFLAGS=\"$CFLAGS -DCYTHON_SMALL_CODE= -Os\" python runtests.py --verbose libcpp_all\r\nPython 3.6.5 |Anaconda, Inc.| (default, Apr 29 2018, 16:14:56)\r\n[GCC 7.2.0]\r\n\r\nRunning tests against Cython 0.28.2\r\nBackends: c,cpp\r\n\r\n...\r\n----------------------------------------------------------------------\r\nRan 4 tests in 1.514s\r\n\r\nOK\r\nALL DONE\r\n```\r\n\r\nMysterious are compiler's ways...",
            "created_at": "2018-05-18T18:02:20Z",
            "html_url": "https://github.com/cython/cython/issues/2235#issuecomment-390286215",
            "id": 390286215,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2235",
            "node_id": "MDEyOklzc3VlQ29tbWVudDM5MDI4NjIxNQ==",
            "updated_at": "2018-05-18T18:02:20Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/390286215",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/21087696?v=4",
                "events_url": "https://api.github.com/users/oleksandr-pavlyk/events{/privacy}",
                "followers_url": "https://api.github.com/users/oleksandr-pavlyk/followers",
                "following_url": "https://api.github.com/users/oleksandr-pavlyk/following{/other_user}",
                "gists_url": "https://api.github.com/users/oleksandr-pavlyk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/oleksandr-pavlyk",
                "id": 21087696,
                "login": "oleksandr-pavlyk",
                "node_id": "MDQ6VXNlcjIxMDg3Njk2",
                "organizations_url": "https://api.github.com/users/oleksandr-pavlyk/orgs",
                "received_events_url": "https://api.github.com/users/oleksandr-pavlyk/received_events",
                "repos_url": "https://api.github.com/users/oleksandr-pavlyk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/oleksandr-pavlyk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/oleksandr-pavlyk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/oleksandr-pavlyk"
            }
        }
    ],
    "comments": 11,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/2235/comments",
    "created_at": "2018-05-03T18:53:53Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": "8e618b58edbfc145c81b23f8bb7208cce0d3221c",
            "commit_url": "https://api.github.com/repos/cython/cython/commits/8e618b58edbfc145c81b23f8bb7208cce0d3221c",
            "created_at": "2018-05-18T16:35:28Z",
            "event": "referenced",
            "id": 1634680591,
            "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDE2MzQ2ODA1OTE=",
            "url": "https://api.github.com/repos/cython/cython/issues/events/1634680591"
        },
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": "8e618b58edbfc145c81b23f8bb7208cce0d3221c",
            "commit_url": "https://api.github.com/repos/cython/cython/commits/8e618b58edbfc145c81b23f8bb7208cce0d3221c",
            "created_at": "2018-05-18T16:35:57Z",
            "event": "closed",
            "id": 1634681500,
            "node_id": "MDExOkNsb3NlZEV2ZW50MTYzNDY4MTUwMA==",
            "url": "https://api.github.com/repos/cython/cython/issues/events/1634681500"
        },
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2018-05-18T16:37:14Z",
            "event": "labeled",
            "id": 1634683690,
            "label": {
                "color": "f9d0c4",
                "name": "C++"
            },
            "node_id": "MDEyOkxhYmVsZWRFdmVudDE2MzQ2ODM2OTA=",
            "url": "https://api.github.com/repos/cython/cython/issues/events/1634683690"
        },
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2018-05-18T16:37:14Z",
            "event": "labeled",
            "id": 1634683692,
            "label": {
                "color": "444444",
                "name": "defect"
            },
            "node_id": "MDEyOkxhYmVsZWRFdmVudDE2MzQ2ODM2OTI=",
            "url": "https://api.github.com/repos/cython/cython/issues/events/1634683692"
        },
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2018-05-18T16:37:14Z",
            "event": "labeled",
            "id": 1634683695,
            "label": {
                "color": "444444",
                "name": "Code Generation"
            },
            "node_id": "MDEyOkxhYmVsZWRFdmVudDE2MzQ2ODM2OTU=",
            "url": "https://api.github.com/repos/cython/cython/issues/events/1634683695"
        },
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2018-05-18T16:37:20Z",
            "event": "milestoned",
            "id": 1634683905,
            "milestone": {
                "title": "0.28.3"
            },
            "node_id": "MDE1Ok1pbGVzdG9uZWRFdmVudDE2MzQ2ODM5MDU=",
            "url": "https://api.github.com/repos/cython/cython/issues/events/1634683905"
        }
    ],
    "events_url": "https://api.github.com/repos/cython/cython/issues/2235/events",
    "html_url": "https://github.com/cython/cython/issues/2235",
    "id": 320038774,
    "labels": [
        {
            "color": "f9d0c4",
            "default": false,
            "id": 414805136,
            "name": "C++",
            "node_id": "MDU6TGFiZWw0MTQ4MDUxMzY=",
            "url": "https://api.github.com/repos/cython/cython/labels/C++"
        },
        {
            "color": "444444",
            "default": false,
            "id": 425556330,
            "name": "Code Generation",
            "node_id": "MDU6TGFiZWw0MjU1NTYzMzA=",
            "url": "https://api.github.com/repos/cython/cython/labels/Code%20Generation"
        },
        {
            "color": "444444",
            "default": false,
            "id": 425553654,
            "name": "defect",
            "node_id": "MDU6TGFiZWw0MjU1NTM2NTQ=",
            "url": "https://api.github.com/repos/cython/cython/labels/defect"
        }
    ],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/2235/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 2,
        "created_at": "2018-05-03T10:22:51Z",
        "creator": {
            "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
            "events_url": "https://api.github.com/users/scoder/events{/privacy}",
            "followers_url": "https://api.github.com/users/scoder/followers",
            "following_url": "https://api.github.com/users/scoder/following{/other_user}",
            "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/scoder",
            "id": 491659,
            "login": "scoder",
            "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
            "organizations_url": "https://api.github.com/users/scoder/orgs",
            "received_events_url": "https://api.github.com/users/scoder/received_events",
            "repos_url": "https://api.github.com/users/scoder/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/scoder"
        },
        "description": null,
        "due_on": null,
        "html_url": "https://github.com/cython/cython/milestone/54",
        "id": 3317331,
        "labels_url": "https://api.github.com/repos/cython/cython/milestones/54/labels",
        "node_id": "MDk6TWlsZXN0b25lMzMxNzMzMQ==",
        "number": 54,
        "open_issues": 0,
        "state": "open",
        "title": "0.28.3",
        "updated_at": "2018-06-03T20:11:54Z",
        "url": "https://api.github.com/repos/cython/cython/milestones/54"
    },
    "node_id": "MDU6SXNzdWUzMjAwMzg3NzQ=",
    "number": 2235,
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "closed",
    "title": "Cython extension libcpp_all.pyx generated with Cython 0.28.2 and GCC 4.4.7 segfaults on import",
    "updated_at": "2018-05-18T18:02:21Z",
    "url": "https://api.github.com/repos/cython/cython/issues/2235",
    "user": {
        "avatar_url": "https://avatars0.githubusercontent.com/u/21087696?v=4",
        "events_url": "https://api.github.com/users/oleksandr-pavlyk/events{/privacy}",
        "followers_url": "https://api.github.com/users/oleksandr-pavlyk/followers",
        "following_url": "https://api.github.com/users/oleksandr-pavlyk/following{/other_user}",
        "gists_url": "https://api.github.com/users/oleksandr-pavlyk/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/oleksandr-pavlyk",
        "id": 21087696,
        "login": "oleksandr-pavlyk",
        "node_id": "MDQ6VXNlcjIxMDg3Njk2",
        "organizations_url": "https://api.github.com/users/oleksandr-pavlyk/orgs",
        "received_events_url": "https://api.github.com/users/oleksandr-pavlyk/received_events",
        "repos_url": "https://api.github.com/users/oleksandr-pavlyk/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/oleksandr-pavlyk/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/oleksandr-pavlyk/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/oleksandr-pavlyk"
    }
}