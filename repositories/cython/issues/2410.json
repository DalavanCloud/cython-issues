{
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "Assignment of a large Python integer object to a Cython int variable appears to cause an overflow without raising an error.\r\nThis happens with either value of the `overflowcheck` directive.\r\n\r\nIf this is intended behaviour, could someone point me towards the documentation please?\r\n\r\n```\r\ndef int_test():\r\n    cdef object object_var = 1000000000000000000  # i.e. 10 ** 18\r\n    cdef int int_var = 1000000000000000000  # i.e. 10 ** 18\r\n\r\n    print(object_var)  #  Correct: 1000000000000000000\r\n    print(int_var)  #  Incorrect: -1486618624\r\n\r\nint_test()\r\n```\r\n\r\nCython: 0.28.3\r\nPython: 3.6.5\r\nOS: MacOS Seirra 10.12.6 (16G29)",
    "closed_at": "2018-06-27T10:17:42Z",
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "I understand that you are giving an example here, but is there actual real-world code where you run into this problem?\n",
            "created_at": "2018-06-26T15:10:34Z",
            "html_url": "https://github.com/cython/cython/issues/2410#issuecomment-400345684",
            "id": 400345684,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2410",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQwMDM0NTY4NA==",
            "updated_at": "2018-06-26T15:10:34Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/400345684",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "author_association": "NONE",
            "body": "@scoder Yeah, when you call the builtin Python `hash()`, you get back an int with a greater range than the Cython int type, so you get an overflow which causes hash collision.",
            "created_at": "2018-06-26T15:36:40Z",
            "html_url": "https://github.com/cython/cython/issues/2410#issuecomment-400355375",
            "id": 400355375,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2410",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQwMDM1NTM3NQ==",
            "updated_at": "2018-06-26T15:36:40Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/400355375",
            "user": {
                "avatar_url": "https://avatars3.githubusercontent.com/u/21367539?v=4",
                "events_url": "https://api.github.com/users/philipCrunchboards/events{/privacy}",
                "followers_url": "https://api.github.com/users/philipCrunchboards/followers",
                "following_url": "https://api.github.com/users/philipCrunchboards/following{/other_user}",
                "gists_url": "https://api.github.com/users/philipCrunchboards/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/philipCrunchboards",
                "id": 21367539,
                "login": "philipCrunchboards",
                "node_id": "MDQ6VXNlcjIxMzY3NTM5",
                "organizations_url": "https://api.github.com/users/philipCrunchboards/orgs",
                "received_events_url": "https://api.github.com/users/philipCrunchboards/received_events",
                "repos_url": "https://api.github.com/users/philipCrunchboards/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/philipCrunchboards/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/philipCrunchboards/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/philipCrunchboards"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Well, Cython can actually infer the type of such a variable based on the assignment (unless you do unsafe operations with it later on, in which case it will play the safer \"object\" card). So, you may get away with not typing it at all.\r\n\r\nIn any case, the correct C integer type for the result of a Python hash function is `Py_hash_t`, not `int`.\r\n\r\nBasically, your code above is explicitly asking for trouble. Cython could issue a warning in this case about a (potential) implicit value range reduction, but since it cannot know the final platform specific sizes when generating the (portable) C code, such a warning would be by best effort and would result in false positives. Meaning, it could easily end up being more annoying than helpful, especially for existing code bases. Your C compiler should be able to generate such a warning for you, though, and correctly so.",
            "created_at": "2018-06-26T19:36:01Z",
            "html_url": "https://github.com/cython/cython/issues/2410#issuecomment-400436333",
            "id": 400436333,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2410",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQwMDQzNjMzMw==",
            "updated_at": "2018-06-26T19:36:01Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/400436333",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "author_association": "NONE",
            "body": "This works correctly when Cython infers the type, so I'll stick with that.\r\nI see what you mean about warnings. I'm not sure why my C compiler isn't generating a warning when there's an overflow converting from `Py_hash_t` to `int`.\r\nIt looks like there's nothing that can realistically be done about this in Cython, so I'm closing this issue.\r\n\r\nThanks for your help with this @scoder.",
            "created_at": "2018-06-27T10:17:42Z",
            "html_url": "https://github.com/cython/cython/issues/2410#issuecomment-400619761",
            "id": 400619761,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2410",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQwMDYxOTc2MQ==",
            "updated_at": "2018-06-27T10:17:42Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/400619761",
            "user": {
                "avatar_url": "https://avatars3.githubusercontent.com/u/21367539?v=4",
                "events_url": "https://api.github.com/users/philipCrunchboards/events{/privacy}",
                "followers_url": "https://api.github.com/users/philipCrunchboards/followers",
                "following_url": "https://api.github.com/users/philipCrunchboards/following{/other_user}",
                "gists_url": "https://api.github.com/users/philipCrunchboards/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/philipCrunchboards",
                "id": 21367539,
                "login": "philipCrunchboards",
                "node_id": "MDQ6VXNlcjIxMzY3NTM5",
                "organizations_url": "https://api.github.com/users/philipCrunchboards/orgs",
                "received_events_url": "https://api.github.com/users/philipCrunchboards/received_events",
                "repos_url": "https://api.github.com/users/philipCrunchboards/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/philipCrunchboards/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/philipCrunchboards/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/philipCrunchboards"
            }
        }
    ],
    "comments": 4,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/2410/comments",
    "created_at": "2018-06-25T08:33:57Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars3.githubusercontent.com/u/21367539?v=4",
                "events_url": "https://api.github.com/users/philipCrunchboards/events{/privacy}",
                "followers_url": "https://api.github.com/users/philipCrunchboards/followers",
                "following_url": "https://api.github.com/users/philipCrunchboards/following{/other_user}",
                "gists_url": "https://api.github.com/users/philipCrunchboards/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/philipCrunchboards",
                "id": 21367539,
                "login": "philipCrunchboards",
                "node_id": "MDQ6VXNlcjIxMzY3NTM5",
                "organizations_url": "https://api.github.com/users/philipCrunchboards/orgs",
                "received_events_url": "https://api.github.com/users/philipCrunchboards/received_events",
                "repos_url": "https://api.github.com/users/philipCrunchboards/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/philipCrunchboards/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/philipCrunchboards/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/philipCrunchboards"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2018-06-25T08:47:24Z",
            "event": "renamed",
            "id": 1698344799,
            "node_id": "MDE3OlJlbmFtZWRUaXRsZUV2ZW50MTY5ODM0NDc5OQ==",
            "rename": {
                "from": "Overflow check not raised on variable assignment",
                "to": "Overflow error check not raised on variable assignment"
            },
            "url": "https://api.github.com/repos/cython/cython/issues/events/1698344799"
        },
        {
            "actor": {
                "avatar_url": "https://avatars3.githubusercontent.com/u/21367539?v=4",
                "events_url": "https://api.github.com/users/philipCrunchboards/events{/privacy}",
                "followers_url": "https://api.github.com/users/philipCrunchboards/followers",
                "following_url": "https://api.github.com/users/philipCrunchboards/following{/other_user}",
                "gists_url": "https://api.github.com/users/philipCrunchboards/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/philipCrunchboards",
                "id": 21367539,
                "login": "philipCrunchboards",
                "node_id": "MDQ6VXNlcjIxMzY3NTM5",
                "organizations_url": "https://api.github.com/users/philipCrunchboards/orgs",
                "received_events_url": "https://api.github.com/users/philipCrunchboards/received_events",
                "repos_url": "https://api.github.com/users/philipCrunchboards/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/philipCrunchboards/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/philipCrunchboards/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/philipCrunchboards"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2018-06-25T08:47:34Z",
            "event": "renamed",
            "id": 1698345102,
            "node_id": "MDE3OlJlbmFtZWRUaXRsZUV2ZW50MTY5ODM0NTEwMg==",
            "rename": {
                "from": "Overflow error check not raised on variable assignment",
                "to": "Overflow error not raised on variable assignment"
            },
            "url": "https://api.github.com/repos/cython/cython/issues/events/1698345102"
        },
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2018-06-26T15:36:40Z",
            "event": "mentioned",
            "id": 1701761890,
            "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTcwMTc2MTg5MA==",
            "url": "https://api.github.com/repos/cython/cython/issues/events/1701761890"
        },
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2018-06-26T15:36:40Z",
            "event": "subscribed",
            "id": 1701761891,
            "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDE3MDE3NjE4OTE=",
            "url": "https://api.github.com/repos/cython/cython/issues/events/1701761891"
        },
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2018-06-27T10:17:42Z",
            "event": "mentioned",
            "id": 1703516429,
            "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTcwMzUxNjQyOQ==",
            "url": "https://api.github.com/repos/cython/cython/issues/events/1703516429"
        },
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2018-06-27T10:17:42Z",
            "event": "subscribed",
            "id": 1703516430,
            "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDE3MDM1MTY0MzA=",
            "url": "https://api.github.com/repos/cython/cython/issues/events/1703516430"
        },
        {
            "actor": {
                "avatar_url": "https://avatars3.githubusercontent.com/u/21367539?v=4",
                "events_url": "https://api.github.com/users/philipCrunchboards/events{/privacy}",
                "followers_url": "https://api.github.com/users/philipCrunchboards/followers",
                "following_url": "https://api.github.com/users/philipCrunchboards/following{/other_user}",
                "gists_url": "https://api.github.com/users/philipCrunchboards/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/philipCrunchboards",
                "id": 21367539,
                "login": "philipCrunchboards",
                "node_id": "MDQ6VXNlcjIxMzY3NTM5",
                "organizations_url": "https://api.github.com/users/philipCrunchboards/orgs",
                "received_events_url": "https://api.github.com/users/philipCrunchboards/received_events",
                "repos_url": "https://api.github.com/users/philipCrunchboards/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/philipCrunchboards/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/philipCrunchboards/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/philipCrunchboards"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2018-06-27T10:17:42Z",
            "event": "closed",
            "id": 1703516438,
            "node_id": "MDExOkNsb3NlZEV2ZW50MTcwMzUxNjQzOA==",
            "url": "https://api.github.com/repos/cython/cython/issues/events/1703516438"
        }
    ],
    "events_url": "https://api.github.com/repos/cython/cython/issues/2410/events",
    "html_url": "https://github.com/cython/cython/issues/2410",
    "id": 335309099,
    "labels": [],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/2410/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDU6SXNzdWUzMzUzMDkwOTk=",
    "number": 2410,
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "closed",
    "title": "Overflow error not raised on variable assignment",
    "updated_at": "2018-06-27T10:17:42Z",
    "url": "https://api.github.com/repos/cython/cython/issues/2410",
    "user": {
        "avatar_url": "https://avatars3.githubusercontent.com/u/21367539?v=4",
        "events_url": "https://api.github.com/users/philipCrunchboards/events{/privacy}",
        "followers_url": "https://api.github.com/users/philipCrunchboards/followers",
        "following_url": "https://api.github.com/users/philipCrunchboards/following{/other_user}",
        "gists_url": "https://api.github.com/users/philipCrunchboards/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/philipCrunchboards",
        "id": 21367539,
        "login": "philipCrunchboards",
        "node_id": "MDQ6VXNlcjIxMzY3NTM5",
        "organizations_url": "https://api.github.com/users/philipCrunchboards/orgs",
        "received_events_url": "https://api.github.com/users/philipCrunchboards/received_events",
        "repos_url": "https://api.github.com/users/philipCrunchboards/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/philipCrunchboards/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/philipCrunchboards/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/philipCrunchboards"
    }
}