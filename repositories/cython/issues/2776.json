{
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "Hi,\r\n\r\nI build a simple pyx with ``gevent`` module (https://github.com/wjsi/test_cython_cov/blob/master/test_cov.pyx) and try to use Cython.Coverage to get code coverage, it produces an error when ``coverage report`` is executed:\r\n\r\n```\r\n$ coverage run test_file.py\r\n$ coverage report\r\nPlugin 'Cython.Coverage.Plugin' did not provide a file reporter for '/Users/wenjun.swj/miniconda3/lib/python3.7/site-packages/gevent/_hub_local.py'.\r\n```\r\n\r\nWhen gevent is removed, for instance, replaced with ``time`` module, no errors raised and the report is shown normally.\r\n\r\nI uploaded all test files in https://github.com/wjsi/test_cython_cov. I'm running on MacOS 10.14 with Anaconda Python 3.7.1, cython==0.29.2 and coverage==4.5.2.",
    "closed_at": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "Thanks for the report. I have no idea what gevent does here, so this needs more investigation to find out how this differs from normal CPython behaviour and what can be done to make this work.",
            "created_at": "2019-01-11T13:51:05Z",
            "html_url": "https://github.com/cython/cython/issues/2776#issuecomment-453522584",
            "id": 453522584,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2776",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MzUyMjU4NA==",
            "updated_at": "2019-01-11T13:51:05Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/453522584",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "author_association": "NONE",
            "body": "@scoder during compilation, gevent compiles its ``_hub_local.py`` in https://github.com/gevent/gevent/blob/master/setup.py#L117 using cython into ``__hub_local.so`` and then import the compiled lib on the bottom of https://github.com/gevent/gevent/blob/master/src/gevent/_hub_local.py#L101 to get itself accelerated, which produces a ``_hub_local.c`` with path ``gevent/src/gevent/_hub_local.c``. However, when installed as a wheel package, the path becomes ``gevent/_hub_local.c``, therefore Cython.Coverage cannot spot the path of ``_hub_local.py``. When creating the tracer, it reports no errors. However, when creating the reporter, no source file can be spotted and the error occurs.\r\nI've written a test case to reproduce this error in #2784.",
            "created_at": "2019-01-11T14:04:33Z",
            "html_url": "https://github.com/cython/cython/issues/2776#issuecomment-453526553",
            "id": 453526553,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2776",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MzUyNjU1Mw==",
            "updated_at": "2019-01-11T14:05:28Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/453526553",
            "user": {
                "avatar_url": "https://avatars1.githubusercontent.com/u/8284922?v=4",
                "events_url": "https://api.github.com/users/wjsi/events{/privacy}",
                "followers_url": "https://api.github.com/users/wjsi/followers",
                "following_url": "https://api.github.com/users/wjsi/following{/other_user}",
                "gists_url": "https://api.github.com/users/wjsi/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/wjsi",
                "id": 8284922,
                "login": "wjsi",
                "node_id": "MDQ6VXNlcjgyODQ5MjI=",
                "organizations_url": "https://api.github.com/users/wjsi/orgs",
                "received_events_url": "https://api.github.com/users/wjsi/received_events",
                "repos_url": "https://api.github.com/users/wjsi/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/wjsi/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/wjsi/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/wjsi"
            }
        }
    ],
    "comments": 2,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/2776/comments",
    "created_at": "2019-01-02T04:55:15Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2019-01-11T14:04:33Z",
            "event": "mentioned",
            "id": 2068619565,
            "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MjA2ODYxOTU2NQ==",
            "url": "https://api.github.com/repos/cython/cython/issues/events/2068619565"
        },
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2019-01-11T14:04:33Z",
            "event": "subscribed",
            "id": 2068619566,
            "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDIwNjg2MTk1NjY=",
            "url": "https://api.github.com/repos/cython/cython/issues/events/2068619566"
        }
    ],
    "events_url": "https://api.github.com/repos/cython/cython/issues/2776/events",
    "html_url": "https://github.com/cython/cython/issues/2776",
    "id": 395149558,
    "labels": [],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/2776/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDU6SXNzdWUzOTUxNDk1NTg=",
    "number": 2776,
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "open",
    "title": "Cython.Coverage produces error when using gevent",
    "updated_at": "2019-01-11T14:05:28Z",
    "url": "https://api.github.com/repos/cython/cython/issues/2776",
    "user": {
        "avatar_url": "https://avatars1.githubusercontent.com/u/8284922?v=4",
        "events_url": "https://api.github.com/users/wjsi/events{/privacy}",
        "followers_url": "https://api.github.com/users/wjsi/followers",
        "following_url": "https://api.github.com/users/wjsi/following{/other_user}",
        "gists_url": "https://api.github.com/users/wjsi/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/wjsi",
        "id": 8284922,
        "login": "wjsi",
        "node_id": "MDQ6VXNlcjgyODQ5MjI=",
        "organizations_url": "https://api.github.com/users/wjsi/orgs",
        "received_events_url": "https://api.github.com/users/wjsi/received_events",
        "repos_url": "https://api.github.com/users/wjsi/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/wjsi/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/wjsi/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/wjsi"
    }
}