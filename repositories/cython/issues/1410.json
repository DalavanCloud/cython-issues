{
    "assignee": null,
    "assignees": [],
    "body": "Cython produces C code that fails to compile (because it contains the identifier `None`) for the following snippet:\n```\ndef f(*args, **kwargs):\n    for k, v in dict(*args, **kwargs).items():\n        pass\n```\n\nOutput of `cythonize -i foo.py`:\n\n```\nCompiling /private/tmp/cythontest/foo.py because it changed.\n[Cythonizing /private/tmp/cythontest/foo.py\nrunning build_ext\nbuilding 'foo' extension\ncreating /private/tmp/cythontest/tmpf3710600/private\ncreating /private/tmp/cythontest/tmpf3710600/private/tmp\ncreating /private/tmp/cythontest/tmpf3710600/private/tmp/cythontest\n/usr/bin/clang -Wno-unused-result -fno-common -dynamic -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -pipe -Os -I/opt/local/Library/Frameworks/Python.framework/Versions/3.4/include/python3.4m -c /private/tmp/cythontest/foo.c -o /private/tmp/cythontest/tmpf3710600/private/tmp/cythontest/foo.o\n/private/tmp/cythontest/foo.c:732:41: error: use of undeclared identifier 'None'\n  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(None, __pyx_n_s_items); if (unli...\n                                        ^\n1 error generated.\nerror: command '/usr/bin/clang' failed with exit status 1\n\n```\n\nA few lines of context from the generated code:\n```\n  __Pyx_RefNannySetupContext(\"f\", 0);\n\n  /* \"foo.py\":2\n * def f(*args, **kwargs):\n *     for k, v in dict(*args, **kwargs).items():             # <<<<<<<<<<<<<<\n *         pass\n */\n  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(None, __pyx_n_s_items); if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0](1/1]); __pyx_lineno = 2; __pyx_clineno = __LINE__; goto __pyx_L1_error;}\n  __Pyx_GOTREF(__pyx_t_2);\n  __pyx_t_3 = NULL;\n  if (CYTHON_COMPILING_IN_CPYTHON && likely(PyMethod_Check(__pyx_t_2))) {\n```\n\nThis occurs in cython 0.22 and 0.23, but not 0.21. Tested on OSX with cpython 3.4 and 2.7.\n\nMigrated from http://trac.cython.org/ticket/856",
    "closed_at": "2015-09-15T18:22:00Z",
    "comment_data": [
        {
            "body": "**scoder** commented\n\nA work-around (and actually an improvement) is to just use `iteritems()` instead.",
            "created_at": "2015-08-14T19:35:04Z",
            "html_url": "https://github.com/cython/cython/issues/1410#issuecomment-240053008",
            "id": 240053008,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/1410",
            "updated_at": "2016-08-16T09:32:07Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/240053008",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/486017?v=3",
                "events_url": "https://api.github.com/users/robertwb/events{/privacy}",
                "followers_url": "https://api.github.com/users/robertwb/followers",
                "following_url": "https://api.github.com/users/robertwb/following{/other_user}",
                "gists_url": "https://api.github.com/users/robertwb/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/robertwb",
                "id": 486017,
                "login": "robertwb",
                "organizations_url": "https://api.github.com/users/robertwb/orgs",
                "received_events_url": "https://api.github.com/users/robertwb/received_events",
                "repos_url": "https://api.github.com/users/robertwb/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/robertwb/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/robertwb/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/robertwb"
            }
        },
        {
            "body": "**scoder** commented\n\nThis was hiding another bug that prevented iteration over `dict(..., **kwargs).items()` from being optimised.\n\nhttps://github.com/cython/cython/commit/591199d1307b79112fee38b1a746484529ebb17d",
            "created_at": "2015-08-14T19:47:21Z",
            "html_url": "https://github.com/cython/cython/issues/1410#issuecomment-240053009",
            "id": 240053009,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/1410",
            "updated_at": "2016-08-16T09:32:07Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/240053009",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/486017?v=3",
                "events_url": "https://api.github.com/users/robertwb/events{/privacy}",
                "followers_url": "https://api.github.com/users/robertwb/followers",
                "following_url": "https://api.github.com/users/robertwb/following{/other_user}",
                "gists_url": "https://api.github.com/users/robertwb/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/robertwb",
                "id": 486017,
                "login": "robertwb",
                "organizations_url": "https://api.github.com/users/robertwb/orgs",
                "received_events_url": "https://api.github.com/users/robertwb/received_events",
                "repos_url": "https://api.github.com/users/robertwb/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/robertwb/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/robertwb/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/robertwb"
            }
        },
        {
            "body": "**scoder** commented\n\nThe test can be reduced to `dict(*args, **kwargs).items()` generating broken C code.",
            "created_at": "2015-08-14T19:55:31Z",
            "html_url": "https://github.com/cython/cython/issues/1410#issuecomment-240053011",
            "id": 240053011,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/1410",
            "updated_at": "2016-08-16T09:32:07Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/240053011",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/486017?v=3",
                "events_url": "https://api.github.com/users/robertwb/events{/privacy}",
                "followers_url": "https://api.github.com/users/robertwb/followers",
                "following_url": "https://api.github.com/users/robertwb/following{/other_user}",
                "gists_url": "https://api.github.com/users/robertwb/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/robertwb",
                "id": 486017,
                "login": "robertwb",
                "organizations_url": "https://api.github.com/users/robertwb/orgs",
                "received_events_url": "https://api.github.com/users/robertwb/received_events",
                "repos_url": "https://api.github.com/users/robertwb/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/robertwb/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/robertwb/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/robertwb"
            }
        },
        {
            "body": "**scoder** changed **milestone** from `wishlist` to `0.23.1`\n**owner** from `somebody` to `scoder`\n**status** from `new` to `assigned`\ncommented\n\nFixed here:\n\nhttps://github.com/cython/cython/commit/00bd02fdf8a6d5d1d5ba80b660f62d68bce42680",
            "created_at": "2015-08-15T20:02:06Z",
            "html_url": "https://github.com/cython/cython/issues/1410#issuecomment-240053013",
            "id": 240053013,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/1410",
            "updated_at": "2016-08-16T09:32:07Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/240053013",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/486017?v=3",
                "events_url": "https://api.github.com/users/robertwb/events{/privacy}",
                "followers_url": "https://api.github.com/users/robertwb/followers",
                "following_url": "https://api.github.com/users/robertwb/following{/other_user}",
                "gists_url": "https://api.github.com/users/robertwb/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/robertwb",
                "id": 486017,
                "login": "robertwb",
                "organizations_url": "https://api.github.com/users/robertwb/orgs",
                "received_events_url": "https://api.github.com/users/robertwb/received_events",
                "repos_url": "https://api.github.com/users/robertwb/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/robertwb/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/robertwb/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/robertwb"
            }
        },
        {
            "body": "**scoder** changed **resolution** to `fixed`\n**status** from `assigned` to `closed`\ncommented",
            "created_at": "2015-08-15T20:26:32Z",
            "html_url": "https://github.com/cython/cython/issues/1410#issuecomment-240053014",
            "id": 240053014,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/1410",
            "updated_at": "2016-08-16T09:32:07Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/240053014",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/486017?v=3",
                "events_url": "https://api.github.com/users/robertwb/events{/privacy}",
                "followers_url": "https://api.github.com/users/robertwb/followers",
                "following_url": "https://api.github.com/users/robertwb/following{/other_user}",
                "gists_url": "https://api.github.com/users/robertwb/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/robertwb",
                "id": 486017,
                "login": "robertwb",
                "organizations_url": "https://api.github.com/users/robertwb/orgs",
                "received_events_url": "https://api.github.com/users/robertwb/received_events",
                "repos_url": "https://api.github.com/users/robertwb/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/robertwb/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/robertwb/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/robertwb"
            }
        },
        {
            "body": "**bdarnell** changed **resolution** from `fixed` to empty\n**status** from `closed` to `reopened`\ncommented\n\nThe bug is still present in cython 0.23.2.\n\nThe reduced version without the loop is now fine:\n```\n def good(*args, **kwargs):\n     dict(*args, **kwargs).items()\n```\n\n But the original loop still fails in the same way:\n```\n def bad(*args, **kwargs):\n     for k, v in dict(*args, **kwargs).items():\n         pass\n```\n\n```\n/tmp/cythontest.c:732:41: error: use of undeclared identifier 'None'\n  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(None, __pyx_n_s_items); if ...\n```",
            "created_at": "2015-09-13T15:59:26Z",
            "html_url": "https://github.com/cython/cython/issues/1410#issuecomment-240053015",
            "id": 240053015,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/1410",
            "updated_at": "2016-08-16T09:32:07Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/240053015",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/486017?v=3",
                "events_url": "https://api.github.com/users/robertwb/events{/privacy}",
                "followers_url": "https://api.github.com/users/robertwb/followers",
                "following_url": "https://api.github.com/users/robertwb/following{/other_user}",
                "gists_url": "https://api.github.com/users/robertwb/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/robertwb",
                "id": 486017,
                "login": "robertwb",
                "organizations_url": "https://api.github.com/users/robertwb/orgs",
                "received_events_url": "https://api.github.com/users/robertwb/received_events",
                "repos_url": "https://api.github.com/users/robertwb/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/robertwb/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/robertwb/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/robertwb"
            }
        },
        {
            "body": "**scoder** changed **milestone** from `0.23.1` to `0.23.3`\n**resolution** to `fixed`\n**status** from `reopened` to `closed`\ncommented\n\nOk, but this should fix it:\nhttps://github.com/cython/cython/commit/8710e415b8f0a9be0ee7cd4bf48e453507ec9f6f\n\nThanks for insisting.",
            "created_at": "2015-09-15T18:22:00Z",
            "html_url": "https://github.com/cython/cython/issues/1410#issuecomment-240053016",
            "id": 240053016,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/1410",
            "updated_at": "2016-08-16T09:32:07Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/240053016",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/486017?v=3",
                "events_url": "https://api.github.com/users/robertwb/events{/privacy}",
                "followers_url": "https://api.github.com/users/robertwb/followers",
                "following_url": "https://api.github.com/users/robertwb/following{/other_user}",
                "gists_url": "https://api.github.com/users/robertwb/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/robertwb",
                "id": 486017,
                "login": "robertwb",
                "organizations_url": "https://api.github.com/users/robertwb/orgs",
                "received_events_url": "https://api.github.com/users/robertwb/received_events",
                "repos_url": "https://api.github.com/users/robertwb/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/robertwb/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/robertwb/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/robertwb"
            }
        }
    ],
    "comments": 7,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/1410/comments",
    "created_at": "2015-08-09T16:11:49Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/486017?v=3",
                "events_url": "https://api.github.com/users/robertwb/events{/privacy}",
                "followers_url": "https://api.github.com/users/robertwb/followers",
                "following_url": "https://api.github.com/users/robertwb/following{/other_user}",
                "gists_url": "https://api.github.com/users/robertwb/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/robertwb",
                "id": 486017,
                "login": "robertwb",
                "organizations_url": "https://api.github.com/users/robertwb/orgs",
                "received_events_url": "https://api.github.com/users/robertwb/received_events",
                "repos_url": "https://api.github.com/users/robertwb/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/robertwb/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/robertwb/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/robertwb"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2016-08-16T09:32:06Z",
            "event": "labeled",
            "id": 756788269,
            "label": {
                "color": "444444",
                "name": "Code Generation"
            },
            "url": "https://api.github.com/repos/cython/cython/issues/events/756788269"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/486017?v=3",
                "events_url": "https://api.github.com/users/robertwb/events{/privacy}",
                "followers_url": "https://api.github.com/users/robertwb/followers",
                "following_url": "https://api.github.com/users/robertwb/following{/other_user}",
                "gists_url": "https://api.github.com/users/robertwb/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/robertwb",
                "id": 486017,
                "login": "robertwb",
                "organizations_url": "https://api.github.com/users/robertwb/orgs",
                "received_events_url": "https://api.github.com/users/robertwb/received_events",
                "repos_url": "https://api.github.com/users/robertwb/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/robertwb/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/robertwb/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/robertwb"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2016-08-16T09:32:06Z",
            "event": "labeled",
            "id": 756788270,
            "label": {
                "color": "444444",
                "name": "defect"
            },
            "url": "https://api.github.com/repos/cython/cython/issues/events/756788270"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/486017?v=3",
                "events_url": "https://api.github.com/users/robertwb/events{/privacy}",
                "followers_url": "https://api.github.com/users/robertwb/followers",
                "following_url": "https://api.github.com/users/robertwb/following{/other_user}",
                "gists_url": "https://api.github.com/users/robertwb/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/robertwb",
                "id": 486017,
                "login": "robertwb",
                "organizations_url": "https://api.github.com/users/robertwb/orgs",
                "received_events_url": "https://api.github.com/users/robertwb/received_events",
                "repos_url": "https://api.github.com/users/robertwb/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/robertwb/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/robertwb/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/robertwb"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2016-08-16T09:32:06Z",
            "event": "milestoned",
            "id": 756788272,
            "milestone": {
                "title": "0.23.3"
            },
            "url": "https://api.github.com/repos/cython/cython/issues/events/756788272"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/486017?v=3",
                "events_url": "https://api.github.com/users/robertwb/events{/privacy}",
                "followers_url": "https://api.github.com/users/robertwb/followers",
                "following_url": "https://api.github.com/users/robertwb/following{/other_user}",
                "gists_url": "https://api.github.com/users/robertwb/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/robertwb",
                "id": 486017,
                "login": "robertwb",
                "organizations_url": "https://api.github.com/users/robertwb/orgs",
                "received_events_url": "https://api.github.com/users/robertwb/received_events",
                "repos_url": "https://api.github.com/users/robertwb/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/robertwb/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/robertwb/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/robertwb"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2015-09-15T18:22:00Z",
            "event": "closed",
            "id": 756788274,
            "url": "https://api.github.com/repos/cython/cython/issues/events/756788274"
        }
    ],
    "events_url": "https://api.github.com/repos/cython/cython/issues/1410/events",
    "html_url": "https://github.com/cython/cython/issues/1410",
    "id": 171365117,
    "labels": [
        {
            "color": "444444",
            "name": "Code Generation",
            "url": "https://api.github.com/repos/cython/cython/labels/Code%20Generation"
        },
        {
            "color": "444444",
            "name": "defect",
            "url": "https://api.github.com/repos/cython/cython/labels/defect"
        }
    ],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/1410/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 5,
        "created_at": "2016-08-16T08:39:08Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/486017?v=3",
            "events_url": "https://api.github.com/users/robertwb/events{/privacy}",
            "followers_url": "https://api.github.com/users/robertwb/followers",
            "following_url": "https://api.github.com/users/robertwb/following{/other_user}",
            "gists_url": "https://api.github.com/users/robertwb/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/robertwb",
            "id": 486017,
            "login": "robertwb",
            "organizations_url": "https://api.github.com/users/robertwb/orgs",
            "received_events_url": "https://api.github.com/users/robertwb/received_events",
            "repos_url": "https://api.github.com/users/robertwb/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/robertwb/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/robertwb/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/robertwb"
        },
        "description": "",
        "due_on": null,
        "html_url": "https://github.com/cython/cython/milestones/0.23.3",
        "id": 1944477,
        "labels_url": "https://api.github.com/repos/cython/cython/milestones/39/labels",
        "number": 39,
        "open_issues": 0,
        "state": "open",
        "title": "0.23.3",
        "updated_at": "2016-08-16T09:32:47Z",
        "url": "https://api.github.com/repos/cython/cython/milestones/39"
    },
    "number": 1410,
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "closed",
    "title": "Cython emits \"None\" into C code",
    "updated_at": "2015-09-15T18:22:00Z",
    "url": "https://api.github.com/repos/cython/cython/issues/1410",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/486017?v=3",
        "events_url": "https://api.github.com/users/robertwb/events{/privacy}",
        "followers_url": "https://api.github.com/users/robertwb/followers",
        "following_url": "https://api.github.com/users/robertwb/following{/other_user}",
        "gists_url": "https://api.github.com/users/robertwb/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/robertwb",
        "id": 486017,
        "login": "robertwb",
        "organizations_url": "https://api.github.com/users/robertwb/orgs",
        "received_events_url": "https://api.github.com/users/robertwb/received_events",
        "repos_url": "https://api.github.com/users/robertwb/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/robertwb/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/robertwb/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/robertwb"
    }
}