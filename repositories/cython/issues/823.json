{
    "assignee": null,
    "assignees": [],
    "body": "C modules often implement certain classes that can only get instantiated internally through factories, such as proxy wrappers for C structures. It is a commmon pattern to do something like this:\n```\ncdef class Artist:\n     def __init__(self):\n         raise TypeError(\"This class cannot be instantiated from Python\")\n\ncdef extern from \"some_external_header.h\":\n     cdef Artist NEW_ARTIST \"PY_NEW\" (object t)\n\n##\n# in \"some_external_header.h\":\n# #define PY_NEW(T) \\\n#     (((PyTypeObject*)(T))->tp_new( \\\n#             (PyTypeObject*)(T), __pyx_empty_tuple, NULL))\n\ncdef Artist _create_artist(artist* artist, bool take_owner=False):\n     cdef Artist instance\n\n     instance = NEW_ARTIST(Artist)\n     instance.artist = artist\n     instance.take_owner = take_owner\n     return instance\n```\n\nIt would be nice if Cython could handle that, e.g. like this:\n```\n    cdef private class Artist:\n        ...\n```\n(although \"private\" is currently the default for cdef classes).\n\nThe class name would then not appear in the module dict. It would still be available from instances, so this is not \"secure\", but it would make it clear that this is not a publicly instantiable class.\n\nInstantiation from Cython code could (potentially) use ```tp_new()``` if the class does not implement ```__init__()```. We might also forbid implementing ```__init__()``` in this case.\n\nNote that the \"private\" flag must not be automatically inherited by subtypes.\n\nMigrated from http://trac.cython.org/ticket/263",
    "closed_at": "2010-10-30T18:49:42Z",
    "comment_data": [
        {
            "body": "**scoder** commented\n\nA decorator would work nicely here, e.g.\n```\n@cython.python_visible(False)\ncdef class MyType:\n    ...\n```\nor maybe extend the ```cclass``` decorator in pure mode, as in\n```\n@cython.cclass(visible=False)\nclass MyType(object):\n    ...\n```",
            "created_at": "2010-05-04T09:04:57Z",
            "html_url": "https://github.com/cython/cython/issues/823#issuecomment-240043997",
            "id": 240043997,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/823",
            "updated_at": "2016-08-16T08:57:35Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/240043997",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/486017?v=3",
                "events_url": "https://api.github.com/users/robertwb/events{/privacy}",
                "followers_url": "https://api.github.com/users/robertwb/followers",
                "following_url": "https://api.github.com/users/robertwb/following{/other_user}",
                "gists_url": "https://api.github.com/users/robertwb/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/robertwb",
                "id": 486017,
                "login": "robertwb",
                "organizations_url": "https://api.github.com/users/robertwb/orgs",
                "received_events_url": "https://api.github.com/users/robertwb/received_events",
                "repos_url": "https://api.github.com/users/robertwb/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/robertwb/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/robertwb/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/robertwb"
            }
        },
        {
            "body": "**scoder** changed **owner** from `somebody` to `scoder`\n**status** from `new` to `assigned`\ncommented",
            "created_at": "2010-10-30T18:45:52Z",
            "html_url": "https://github.com/cython/cython/issues/823#issuecomment-240043998",
            "id": 240043998,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/823",
            "updated_at": "2016-08-16T08:57:35Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/240043998",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/486017?v=3",
                "events_url": "https://api.github.com/users/robertwb/events{/privacy}",
                "followers_url": "https://api.github.com/users/robertwb/followers",
                "following_url": "https://api.github.com/users/robertwb/following{/other_user}",
                "gists_url": "https://api.github.com/users/robertwb/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/robertwb",
                "id": 486017,
                "login": "robertwb",
                "organizations_url": "https://api.github.com/users/robertwb/orgs",
                "received_events_url": "https://api.github.com/users/robertwb/received_events",
                "repos_url": "https://api.github.com/users/robertwb/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/robertwb/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/robertwb/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/robertwb"
            }
        },
        {
            "body": "**scoder** changed **component** from `Code Generation` to `Language Feature`\n**description** from\n\nC modules often implement certain classes that can only get instantiated internally through factories, such as proxy wrappers for C structures. It is a commmon pattern to do something like this:\n```\ncdef class Artist:\n     def __init__(self):\n         raise TypeError(\"This class cannot be instantiated from Python\")\n\ncdef extern from \"some_external_header.h\":\n     cdef Artist NEW_ARTIST \"PY_NEW\" (object t)\n\n##\n# in \"some_external_header.h\":\n# #define PY_NEW(T) \\\n#     (((PyTypeObject*)(T))->tp_new( \\\n#             (PyTypeObject*)(T), __pyx_empty_tuple, NULL))\n\ncdef Artist _create_artist(artist* artist, bool take_owner=False):\n     cdef Artist instance\n\n     instance = NEW_TRACK(Artist)\n     instance.artist = artist\n     instance.take_owner = take_owner\n     return instance\n```\n\nIt would be nice if Cython could handle that, e.g. like this:\n```\n    cdef private class Artist:\n        ...\n```\n(although \"private\" is currently the default for cdef classes).\n\nThe class name would then not appear in the module dict. It would still be available from instances, so this is not \"secure\", but it would make it clear that this is not a publicly instantiable class.\n\nInstantiation from Cython code could (potentially) use ```tp_new()``` if the class does not implement ```__init__()```. We might also forbid implementing ```__init__()``` in this case.\n\nNote that the \"private\" flag must not be automatically inherited by subtypes.\n\n\nto\n\nC modules often implement certain classes that can only get instantiated internally through factories, such as proxy wrappers for C structures. It is a commmon pattern to do something like this:\n```\ncdef class Artist:\n     def __init__(self):\n         raise TypeError(\"This class cannot be instantiated from Python\")\n\ncdef extern from \"some_external_header.h\":\n     cdef Artist NEW_ARTIST \"PY_NEW\" (object t)\n\n##\n# in \"some_external_header.h\":\n# #define PY_NEW(T) \\\n#     (((PyTypeObject*)(T))->tp_new( \\\n#             (PyTypeObject*)(T), __pyx_empty_tuple, NULL))\n\ncdef Artist _create_artist(artist* artist, bool take_owner=False):\n     cdef Artist instance\n\n     instance = NEW_ARTIST(Artist)\n     instance.artist = artist\n     instance.take_owner = take_owner\n     return instance\n```\n\nIt would be nice if Cython could handle that, e.g. like this:\n```\n    cdef private class Artist:\n        ...\n```\n(although \"private\" is currently the default for cdef classes).\n\nThe class name would then not appear in the module dict. It would still be available from instances, so this is not \"secure\", but it would make it clear that this is not a publicly instantiable class.\n\nInstantiation from Cython code could (potentially) use ```tp_new()``` if the class does not implement ```__init__()```. We might also forbid implementing ```__init__()``` in this case.\n\nNote that the \"private\" flag must not be automatically inherited by subtypes.\n**milestone** from `wishlist` to `0.13.1`\n**resolution** to `fixed`\n**status** from `assigned` to `closed`\ncommented\n\nImplemented here:\n\nhttp://hg.cython.org/cython-devel/rev/231825465784\n\nCurrently uses a directive called \"internal\", as in\n```\n@cython.internal\ncdef class InternalClass:\n    pass\n```",
            "created_at": "2010-10-30T18:49:42Z",
            "html_url": "https://github.com/cython/cython/issues/823#issuecomment-240043999",
            "id": 240043999,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/823",
            "updated_at": "2016-08-16T08:57:35Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/240043999",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/486017?v=3",
                "events_url": "https://api.github.com/users/robertwb/events{/privacy}",
                "followers_url": "https://api.github.com/users/robertwb/followers",
                "following_url": "https://api.github.com/users/robertwb/following{/other_user}",
                "gists_url": "https://api.github.com/users/robertwb/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/robertwb",
                "id": 486017,
                "login": "robertwb",
                "organizations_url": "https://api.github.com/users/robertwb/orgs",
                "received_events_url": "https://api.github.com/users/robertwb/received_events",
                "repos_url": "https://api.github.com/users/robertwb/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/robertwb/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/robertwb/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/robertwb"
            }
        }
    ],
    "comments": 3,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/823/comments",
    "created_at": "2009-03-27T18:43:07Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/486017?v=3",
                "events_url": "https://api.github.com/users/robertwb/events{/privacy}",
                "followers_url": "https://api.github.com/users/robertwb/followers",
                "following_url": "https://api.github.com/users/robertwb/following{/other_user}",
                "gists_url": "https://api.github.com/users/robertwb/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/robertwb",
                "id": 486017,
                "login": "robertwb",
                "organizations_url": "https://api.github.com/users/robertwb/orgs",
                "received_events_url": "https://api.github.com/users/robertwb/received_events",
                "repos_url": "https://api.github.com/users/robertwb/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/robertwb/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/robertwb/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/robertwb"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2016-08-16T08:57:34Z",
            "event": "labeled",
            "id": 756744655,
            "label": {
                "color": "444444",
                "name": "Cython Language Feature"
            },
            "url": "https://api.github.com/repos/cython/cython/issues/events/756744655"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/486017?v=3",
                "events_url": "https://api.github.com/users/robertwb/events{/privacy}",
                "followers_url": "https://api.github.com/users/robertwb/followers",
                "following_url": "https://api.github.com/users/robertwb/following{/other_user}",
                "gists_url": "https://api.github.com/users/robertwb/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/robertwb",
                "id": 486017,
                "login": "robertwb",
                "organizations_url": "https://api.github.com/users/robertwb/orgs",
                "received_events_url": "https://api.github.com/users/robertwb/received_events",
                "repos_url": "https://api.github.com/users/robertwb/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/robertwb/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/robertwb/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/robertwb"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2016-08-16T08:57:34Z",
            "event": "labeled",
            "id": 756744656,
            "label": {
                "color": "444444",
                "name": "P: minor"
            },
            "url": "https://api.github.com/repos/cython/cython/issues/events/756744656"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/486017?v=3",
                "events_url": "https://api.github.com/users/robertwb/events{/privacy}",
                "followers_url": "https://api.github.com/users/robertwb/followers",
                "following_url": "https://api.github.com/users/robertwb/following{/other_user}",
                "gists_url": "https://api.github.com/users/robertwb/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/robertwb",
                "id": 486017,
                "login": "robertwb",
                "organizations_url": "https://api.github.com/users/robertwb/orgs",
                "received_events_url": "https://api.github.com/users/robertwb/received_events",
                "repos_url": "https://api.github.com/users/robertwb/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/robertwb/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/robertwb/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/robertwb"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2016-08-16T08:57:34Z",
            "event": "labeled",
            "id": 756744657,
            "label": {
                "color": "444444",
                "name": "enhancement"
            },
            "url": "https://api.github.com/repos/cython/cython/issues/events/756744657"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/486017?v=3",
                "events_url": "https://api.github.com/users/robertwb/events{/privacy}",
                "followers_url": "https://api.github.com/users/robertwb/followers",
                "following_url": "https://api.github.com/users/robertwb/following{/other_user}",
                "gists_url": "https://api.github.com/users/robertwb/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/robertwb",
                "id": 486017,
                "login": "robertwb",
                "organizations_url": "https://api.github.com/users/robertwb/orgs",
                "received_events_url": "https://api.github.com/users/robertwb/received_events",
                "repos_url": "https://api.github.com/users/robertwb/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/robertwb/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/robertwb/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/robertwb"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2016-08-16T08:57:35Z",
            "event": "milestoned",
            "id": 756744658,
            "milestone": {
                "title": "0.14"
            },
            "url": "https://api.github.com/repos/cython/cython/issues/events/756744658"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/486017?v=3",
                "events_url": "https://api.github.com/users/robertwb/events{/privacy}",
                "followers_url": "https://api.github.com/users/robertwb/followers",
                "following_url": "https://api.github.com/users/robertwb/following{/other_user}",
                "gists_url": "https://api.github.com/users/robertwb/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/robertwb",
                "id": 486017,
                "login": "robertwb",
                "organizations_url": "https://api.github.com/users/robertwb/orgs",
                "received_events_url": "https://api.github.com/users/robertwb/received_events",
                "repos_url": "https://api.github.com/users/robertwb/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/robertwb/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/robertwb/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/robertwb"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2010-10-30T18:49:42Z",
            "event": "closed",
            "id": 756744660,
            "url": "https://api.github.com/repos/cython/cython/issues/events/756744660"
        }
    ],
    "events_url": "https://api.github.com/repos/cython/cython/issues/823/events",
    "html_url": "https://github.com/cython/cython/issues/823",
    "id": 171357951,
    "labels": [
        {
            "color": "444444",
            "name": "Cython Language Feature",
            "url": "https://api.github.com/repos/cython/cython/labels/Cython%20Language%20Feature"
        },
        {
            "color": "444444",
            "name": "enhancement",
            "url": "https://api.github.com/repos/cython/cython/labels/enhancement"
        },
        {
            "color": "444444",
            "name": "P: minor",
            "url": "https://api.github.com/repos/cython/cython/labels/P:%20minor"
        }
    ],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/823/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": "2016-08-16T08:38:58Z",
        "closed_issues": 50,
        "created_at": "2016-08-16T08:38:58Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/486017?v=3",
            "events_url": "https://api.github.com/users/robertwb/events{/privacy}",
            "followers_url": "https://api.github.com/users/robertwb/followers",
            "following_url": "https://api.github.com/users/robertwb/following{/other_user}",
            "gists_url": "https://api.github.com/users/robertwb/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/robertwb",
            "id": 486017,
            "login": "robertwb",
            "organizations_url": "https://api.github.com/users/robertwb/orgs",
            "received_events_url": "https://api.github.com/users/robertwb/received_events",
            "repos_url": "https://api.github.com/users/robertwb/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/robertwb/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/robertwb/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/robertwb"
        },
        "description": "",
        "due_on": "2012-01-01T00:00:00Z",
        "html_url": "https://github.com/cython/cython/milestones/0.14",
        "id": 1944457,
        "labels_url": "https://api.github.com/repos/cython/cython/milestones/20/labels",
        "number": 20,
        "open_issues": 0,
        "state": "closed",
        "title": "0.14",
        "updated_at": "2016-08-16T09:11:36Z",
        "url": "https://api.github.com/repos/cython/cython/milestones/20"
    },
    "number": 823,
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "closed",
    "title": "module local (private) cdef classes",
    "updated_at": "2010-10-30T18:49:42Z",
    "url": "https://api.github.com/repos/cython/cython/issues/823",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/486017?v=3",
        "events_url": "https://api.github.com/users/robertwb/events{/privacy}",
        "followers_url": "https://api.github.com/users/robertwb/followers",
        "following_url": "https://api.github.com/users/robertwb/following{/other_user}",
        "gists_url": "https://api.github.com/users/robertwb/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/robertwb",
        "id": 486017,
        "login": "robertwb",
        "organizations_url": "https://api.github.com/users/robertwb/orgs",
        "received_events_url": "https://api.github.com/users/robertwb/received_events",
        "repos_url": "https://api.github.com/users/robertwb/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/robertwb/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/robertwb/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/robertwb"
    }
}