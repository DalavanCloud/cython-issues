{
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "body": "There's a pylintrc file, but pylint throws a bunch of complaints, so it doesn't appear to be enforced.\r\n\r\nWhat's the policy on \"cleanup\" PRs, modernization, etc?",
    "closed_at": null,
    "comment_data": [
        {
            "author_association": "CONTRIBUTOR",
            "body": "Collecting a few potential-cleanup targets as I find them, in case the answer is \"go for it!\"\r\n\r\n- [ ] `Cython.Compiler.TreePath` appears unused outside of tests, may be unnecessary.\r\n- [ ] commented-out code in `Cython.Plex` that can presumably be removed\r\n- [ ] a lot of compatibility code could be simplified by using `six`\r\n- [ ] #1845 if jedityper is unsupported and non-functional, might not be worth keeping around\r\n- [ ] I don't totally get what Plex.Timing is supposed to do, looks like `time.time()` might be simpler?\r\n\r\nBigger-picture, coming at this from a direction of a newcomer interested in solving #1628, #1461, and implementing linting for cython files, it seems like there would need to be a stronger separation between the \"parsing cython\" part of the pipeline and the \"turning it into C\" part.",
            "created_at": "2019-02-07T22:12:35Z",
            "html_url": "https://github.com/cython/cython/issues/2825#issuecomment-461614353",
            "id": 461614353,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2825",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ2MTYxNDM1Mw==",
            "updated_at": "2019-02-08T02:35:23Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/461614353",
            "user": {
                "avatar_url": "https://avatars1.githubusercontent.com/u/8078968?v=4",
                "events_url": "https://api.github.com/users/jbrockmendel/events{/privacy}",
                "followers_url": "https://api.github.com/users/jbrockmendel/followers",
                "following_url": "https://api.github.com/users/jbrockmendel/following{/other_user}",
                "gists_url": "https://api.github.com/users/jbrockmendel/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/jbrockmendel",
                "id": 8078968,
                "login": "jbrockmendel",
                "node_id": "MDQ6VXNlcjgwNzg5Njg=",
                "organizations_url": "https://api.github.com/users/jbrockmendel/orgs",
                "received_events_url": "https://api.github.com/users/jbrockmendel/received_events",
                "repos_url": "https://api.github.com/users/jbrockmendel/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/jbrockmendel/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/jbrockmendel/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/jbrockmendel"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Thanks for volunteering. I agree that improving the linting coverage would be nice. Cython has a very old code base (since 2001), and we only recently added a simple initial linting configuration at all. But read on.\r\n\r\n`TreePath` is used inside of the compiler pipeline for tests, so it should stay. It implements an XPath-like language that executes assertions on the parse tree, normally right before code generation. It's important for verifying that specific optimisations or other changes in the tree were really applied.\r\n\r\nCleaning up Plex seems good. It's been mostly unchanged since we inherited it from Pyrex (where it already was a copy of some old Plex version), and it's unlikely to receive many changes in the future. It does what it should, and it does it well. So, stripping down the code to what's actually used is reasonable. But again, read on.\r\n\r\nI doubt that using `six` would provide major simplifications. In any case, Py2 support is scheduled for removal in the course of this year, so any earlier changes in that regard would be a waste of time. That will also be the right time for broader modernisation changes in the code base.\r\n\r\nRemoving the `jedityper` seems reasonable. A new tool would best start from scratch anyway (and probably not be part of Cython itself).\r\n\r\n`Plex.Timing` is unused and seems obsolete. The scanner hasn't been a bottleneck ever since we started, so we're unlikely to become interested in tuning it in the future.\r\n\r\nI'm not sure what you mean by \"a stronger separation\" between parsing and code generation. Both are independent steps in the compiler pipeline that are connected by a parse tree. The main issue in #1628 is that this parse tree was not meant as a user facing AST, so it a) lacks some abstraction and b) is not meant as a stable API. Committing to it as it stands would reduce our future flexibility to evolve Cython as a language, so I'm not very eager to open it up at this point.\r\n\r\nIf you're interested in the parser part, then look at `Cython/Parser/`. It contains an initial attempt at a `pgen` grammar that is a little outdated by now, but was a first step (by @robertwb) towards replacing the custom parser in `Parsing.py` with a \"standard\" generated parser, based on the CPython grammar. Note that the C-implemented CPython `pgen` tool is [up for removal](https://bugs.python.org/issue35808), but there is already a Python replacement [in lib2to3](https://github.com/python/cpython/tree/master/Lib/lib2to3/pgen2).\r\n\r\nThat's not an easy project, though. In order to make sure the grammar does not get stale again, we'd best use it ourselves as a parser in Cython, which means that we'd have to extract some smartness from the existing parser into later pipeline steps. That should be somewhat straight forward in most cases, but needs some work. And it also has a somewhat open outcome in that the result needs to convince us to give up the current convenience of just being able to do stuff in the existing parser. The main advantage would certainly be that such a parser could be reused and extended by external tools, such as a linter. Although I don't know of any linting tools that are directly based on Python's Grammar fileâ€¦ Anyway, #1628 is the right ticket for that.\r\n\r\n#1461 seems unrelated. It's mostly about fixing the way Cython generates line tracing calls. Probably trivial to fix once we know when/where exactly to report the line execution.",
            "created_at": "2019-02-08T06:58:13Z",
            "html_url": "https://github.com/cython/cython/issues/2825#issuecomment-461709677",
            "id": 461709677,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2825",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ2MTcwOTY3Nw==",
            "updated_at": "2019-02-08T06:58:13Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/461709677",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "> Cleaning up Plex seems good\r\n\r\nI'll put together a PR.\r\n\r\n> I doubt that using `six` would provide major simplifications.\r\n\r\nsix is nixed, got it.\r\n\r\n> Removing the `jedityper` seems reasonable.\r\n\r\nWill do, probably a separate PR (I hope you're OK with the multiple-self-contained-PRs style)\r\n\r\n> I'm not sure what you mean by \"a stronger separation\" between parsing and code generation.\r\n\r\n> Anyway, #1628 is the right ticket for that.\r\n\r\n> #1461 seems unrelated.\r\n\r\nThe three are connected in as much as the complex dependency graph makes a serious barrier to entry for newcomers (at least this one).  The \"stronger separation\" suggestion is speculation about refactoring that might make this easier; even if that were a high priority, mine is not a particularly expert opinion.  I'll take this part of the conversation to #1628.",
            "created_at": "2019-02-08T17:04:39Z",
            "html_url": "https://github.com/cython/cython/issues/2825#issuecomment-461873165",
            "id": 461873165,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2825",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ2MTg3MzE2NQ==",
            "updated_at": "2019-02-08T17:04:39Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/461873165",
            "user": {
                "avatar_url": "https://avatars1.githubusercontent.com/u/8078968?v=4",
                "events_url": "https://api.github.com/users/jbrockmendel/events{/privacy}",
                "followers_url": "https://api.github.com/users/jbrockmendel/followers",
                "following_url": "https://api.github.com/users/jbrockmendel/following{/other_user}",
                "gists_url": "https://api.github.com/users/jbrockmendel/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/jbrockmendel",
                "id": 8078968,
                "login": "jbrockmendel",
                "node_id": "MDQ6VXNlcjgwNzg5Njg=",
                "organizations_url": "https://api.github.com/users/jbrockmendel/orgs",
                "received_events_url": "https://api.github.com/users/jbrockmendel/received_events",
                "repos_url": "https://api.github.com/users/jbrockmendel/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/jbrockmendel/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/jbrockmendel/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/jbrockmendel"
            }
        }
    ],
    "comments": 3,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/2825/comments",
    "created_at": "2019-02-07T19:28:21Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars3.githubusercontent.com/u/486017?v=4",
                "events_url": "https://api.github.com/users/robertwb/events{/privacy}",
                "followers_url": "https://api.github.com/users/robertwb/followers",
                "following_url": "https://api.github.com/users/robertwb/following{/other_user}",
                "gists_url": "https://api.github.com/users/robertwb/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/robertwb",
                "id": 486017,
                "login": "robertwb",
                "node_id": "MDQ6VXNlcjQ4NjAxNw==",
                "organizations_url": "https://api.github.com/users/robertwb/orgs",
                "received_events_url": "https://api.github.com/users/robertwb/received_events",
                "repos_url": "https://api.github.com/users/robertwb/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/robertwb/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/robertwb/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/robertwb"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2019-02-08T06:58:13Z",
            "event": "mentioned",
            "id": 2126340836,
            "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MjEyNjM0MDgzNg==",
            "url": "https://api.github.com/repos/cython/cython/issues/events/2126340836"
        },
        {
            "actor": {
                "avatar_url": "https://avatars3.githubusercontent.com/u/486017?v=4",
                "events_url": "https://api.github.com/users/robertwb/events{/privacy}",
                "followers_url": "https://api.github.com/users/robertwb/followers",
                "following_url": "https://api.github.com/users/robertwb/following{/other_user}",
                "gists_url": "https://api.github.com/users/robertwb/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/robertwb",
                "id": 486017,
                "login": "robertwb",
                "node_id": "MDQ6VXNlcjQ4NjAxNw==",
                "organizations_url": "https://api.github.com/users/robertwb/orgs",
                "received_events_url": "https://api.github.com/users/robertwb/received_events",
                "repos_url": "https://api.github.com/users/robertwb/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/robertwb/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/robertwb/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/robertwb"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2019-02-08T06:58:13Z",
            "event": "subscribed",
            "id": 2126340837,
            "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDIxMjYzNDA4Mzc=",
            "url": "https://api.github.com/repos/cython/cython/issues/events/2126340837"
        },
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2019-02-08T06:58:48Z",
            "event": "renamed",
            "id": 2126341518,
            "node_id": "MDE3OlJlbmFtZWRUaXRsZUV2ZW50MjEyNjM0MTUxOA==",
            "rename": {
                "from": "Linting policy?",
                "to": "Code base cleanups"
            },
            "url": "https://api.github.com/repos/cython/cython/issues/events/2126341518"
        }
    ],
    "events_url": "https://api.github.com/repos/cython/cython/issues/2825/events",
    "html_url": "https://github.com/cython/cython/issues/2825",
    "id": 407860391,
    "labels": [],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/2825/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDU6SXNzdWU0MDc4NjAzOTE=",
    "number": 2825,
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "open",
    "title": "Code base cleanups",
    "updated_at": "2019-02-08T17:04:40Z",
    "url": "https://api.github.com/repos/cython/cython/issues/2825",
    "user": {
        "avatar_url": "https://avatars1.githubusercontent.com/u/8078968?v=4",
        "events_url": "https://api.github.com/users/jbrockmendel/events{/privacy}",
        "followers_url": "https://api.github.com/users/jbrockmendel/followers",
        "following_url": "https://api.github.com/users/jbrockmendel/following{/other_user}",
        "gists_url": "https://api.github.com/users/jbrockmendel/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/jbrockmendel",
        "id": 8078968,
        "login": "jbrockmendel",
        "node_id": "MDQ6VXNlcjgwNzg5Njg=",
        "organizations_url": "https://api.github.com/users/jbrockmendel/orgs",
        "received_events_url": "https://api.github.com/users/jbrockmendel/received_events",
        "repos_url": "https://api.github.com/users/jbrockmendel/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/jbrockmendel/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/jbrockmendel/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/jbrockmendel"
    }
}