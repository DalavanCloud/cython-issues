{
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "body": "222334c0b91eae41de2af2692daec6183cdaf243 which looks like it is part of the code from https://github.com/cython/cython/pull/2559 has broken building of scipy and pandas. In both cases I see failures like:\r\n\r\n\r\n```\r\n   gcc -pthread -Wno-unused-result -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -fPIC -Ipandas/_libs -I./pandas/_libs -Ipandas/_libs/src/klib -Ipandas/_libs/src -I/home/tcaswell/.virtualenvs/bleeding/lib/python3.8/site-packages/numpy/core/include -I/home/tcaswell/.virtualenvs/bleeding/include -I/home/tcaswell/source/other_source/cpython/Include -I/home/tcaswell/source/other_source/cpython -c pandas/_libs/window.cpp -o build/temp.linux-x86_64-3.8/pandas/_libs/window.o -Wno-unused-function\r\n    In file included from /home/tcaswell/.virtualenvs/bleeding/lib/python3.8/site-packages/numpy/core/include/numpy/ndarraytypes.h:1821,\r\n                     from /home/tcaswell/.virtualenvs/bleeding/lib/python3.8/site-packages/numpy/core/include/numpy/ndarrayobject.h:18,\r\n                     from /home/tcaswell/.virtualenvs/bleeding/lib/python3.8/site-packages/numpy/core/include/numpy/arrayobject.h:4,\r\n                     from pandas/_libs/window.cpp:656:\r\n    /home/tcaswell/.virtualenvs/bleeding/lib/python3.8/site-packages/numpy/core/include/numpy/npy_1_7_deprecated_api.h:15:2: warning: #warning \"Using deprecated NumPy API, disable it by \" \"#defining NPY_NO_DEPRECATED_API NPY_1_7_API_VERSION\" [-Wcpp]\r\n     #warning \"Using deprecated NumPy API, disable it by \" \\\r\n      ^~~~~~~\r\n    pandas/_libs/window.cpp: In function ‘PyObject* __pyx_pf_6pandas_5_libs_6window_30ewmcov(PyObject*, __Pyx_memviewslice, __Pyx_memviewslice, __pyx_t_5numpy_double_t, int, int, int, int)’:\r\n    pandas/_libs/window.cpp:45373:27: warning: comparison of integer expressions of different signedness: ‘size_t’ {aka ‘long unsigned int’} and ‘Py_ssize_t’ {aka ‘long int’} [-Wsign-compare]\r\n       __pyx_t_2 = ((__pyx_t_1 != __pyx_v_N) != 0);\r\n                     ~~~~~~~~~~^~~~~~~~~~~~\r\n    In file included from /home/tcaswell/.virtualenvs/bleeding/lib/python3.8/site-packages/numpy/core/include/numpy/ndarrayobject.h:18,\r\n                     from /home/tcaswell/.virtualenvs/bleeding/lib/python3.8/site-packages/numpy/core/include/numpy/arrayobject.h:4,\r\n                     from pandas/_libs/window.cpp:656:\r\n    pandas/_libs/window.cpp: In function ‘int __pyx_pf_5numpy_7ndarray___getbuffer__(PyArrayObject*, Py_buffer*, int)’:\r\n    /home/tcaswell/.virtualenvs/bleeding/lib/python3.8/site-packages/numpy/core/include/numpy/ndarraytypes.h:1571:67: error: cannot convert ‘PyArray_Descr*’ {aka ‘_PyArray_Descr*’} to ‘PyObject*’ {aka ‘_object*’} in assignment\r\n     #define PyArray_DESCR(obj) (((PyArrayObject_fields *)(obj))->descr)\r\n                                                                       ^\r\n    pandas/_libs/window.cpp:48256:15: note: in expansion of macro ‘PyArray_DESCR’\r\n       __pyx_t_7 = PyArray_DESCR(__pyx_v_self);\r\n                   ^~~~~~~~~~~~~\r\n    error: command 'gcc' failed with exit status 1\r\nerror\r\n```\r\nand\r\n\r\n```\r\n    compiling C++ sources\r\n    C compiler: g++ -pthread -Wno-unused-result -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -march=x86-64 -mtune=generic -O2 -pipe -fstack-protector-strong -fno-plt -flto -fuse-linker-plugin -ffat-lto-objects -flto-partition=none -march=x86-64 -mtune=generic -O2 -pipe -fstack-protector-strong -fno-plt -march=x86-64 -mtune=generic -O2 -pipe -fstack-protector-strong -fno-plt -fPIC\r\n\r\n    compile options: '-I/usr/include/python3.7m -I/tmp/scipy_test/lib/python3.7/site-packages/numpy/core/include -Iscipy/_lib -Iscipy/spatial/ckdtree/src -I/tmp/scipy_test/lib/python3.7/site-packages/numpy/core/include -I/tmp/scipy_test/include -I/usr/include/python3.7m -c'\r\n    g++: scipy/spatial/ckdtree.cxx\r\n    In file included from /tmp/scipy_test/lib/python3.7/site-packages/numpy/core/include/numpy/ndarraytypes.h:1821,\r\n                     from /tmp/scipy_test/lib/python3.7/site-packages/numpy/core/include/numpy/ndarrayobject.h:18,\r\n                     from /tmp/scipy_test/lib/python3.7/site-packages/numpy/core/include/numpy/arrayobject.h:4,\r\n                     from scipy/spatial/ckdtree.cxx:616:\r\n    /tmp/scipy_test/lib/python3.7/site-packages/numpy/core/include/numpy/npy_1_7_deprecated_api.h:15:2: warning: #warning \"Using deprecated NumPy API, disable it by \" \"#defining NPY_NO_DEPRECATED_API NPY_1_7_API_VERSION\" [-Wcpp]\r\n     #warning \"Using deprecated NumPy API, disable it by \" \\\r\n      ^~~~~~~\r\n    In file included from /tmp/scipy_test/lib/python3.7/site-packages/numpy/core/include/numpy/ndarrayobject.h:18,\r\n                     from /tmp/scipy_test/lib/python3.7/site-packages/numpy/core/include/numpy/arrayobject.h:4,\r\n                     from scipy/spatial/ckdtree.cxx:616:\r\n    scipy/spatial/ckdtree.cxx: In function ‘int __pyx_pf_5numpy_7ndarray___getbuffer__(PyArrayObject*, Py_buffer*, int)’:\r\n    /tmp/scipy_test/lib/python3.7/site-packages/numpy/core/include/numpy/ndarraytypes.h:1571:67: error: cannot convert ‘PyArray_Descr*’ {aka ‘_PyArray_Descr*’} to ‘PyObject*’ {aka ‘_object*’} in assignment\r\n     #define PyArray_DESCR(obj) (((PyArrayObject_fields *)(obj))->descr)\r\n                                                                       ^\r\n    scipy/spatial/ckdtree.cxx:16607:15: note: in expansion of macro ‘PyArray_DESCR’\r\n       __pyx_t_7 = PyArray_DESCR(__pyx_v_self);\r\n                   ^~~~~~~~~~~~~\r\n    In file included from /tmp/scipy_test/lib/python3.7/site-packages/numpy/core/include/numpy/ndarraytypes.h:1821,\r\n                     from /tmp/scipy_test/lib/python3.7/site-packages/numpy/core/include/numpy/ndarrayobject.h:18,\r\n                     from /tmp/scipy_test/lib/python3.7/site-packages/numpy/core/include/numpy/arrayobject.h:4,\r\n                     from scipy/spatial/ckdtree.cxx:616:\r\n    /tmp/scipy_test/lib/python3.7/site-packages/numpy/core/include/numpy/npy_1_7_deprecated_api.h:15:2: warning: #warning \"Using deprecated NumPy API, disable it by \" \"#defining NPY_NO_DEPRECATED_API NPY_1_7_API_VERSION\" [-Wcpp]\r\n     #warning \"Using deprecated NumPy API, disable it by \" \\\r\n      ^~~~~~~\r\n    In file included from /tmp/scipy_test/lib/python3.7/site-packages/numpy/core/include/numpy/ndarrayobject.h:18,\r\n                     from /tmp/scipy_test/lib/python3.7/site-packages/numpy/core/include/numpy/arrayobject.h:4,\r\n                     from scipy/spatial/ckdtree.cxx:616:\r\n    scipy/spatial/ckdtree.cxx: In function ‘int __pyx_pf_5numpy_7ndarray___getbuffer__(PyArrayObject*, Py_buffer*, int)’:\r\n    /tmp/scipy_test/lib/python3.7/site-packages/numpy/core/include/numpy/ndarraytypes.h:1571:67: error: cannot convert ‘PyArray_Descr*’ {aka ‘_PyArray_Descr*’} to ‘PyObject*’ {aka ‘_object*’} in assignment\r\n     #define PyArray_DESCR(obj) (((PyArrayObject_fields *)(obj))->descr)\r\n                                                                       ^\r\n    scipy/spatial/ckdtree.cxx:16607:15: note: in expansion of macro ‘PyArray_DESCR’\r\n       __pyx_t_7 = PyArray_DESCR(__pyx_v_self);\r\n                   ^~~~~~~~~~~~~\r\n    error: Command \"g++ -pthread -Wno-unused-result -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -march=x86-64 -mtune=generic -O2 -pipe -fstack-protector-strong -fno-plt -flto -fuse-linker-plugin -ffat-lto-objects -flto-partition=none -march=x86-64 -mtune=generic -O2 -pipe -fstack-protector-strong -fno-plt -march=x86-64 -mtune=generic -O2 -pipe -fstack-protector-strong -fno-plt -fPIC -I/usr/include/python3.7m -I/tmp/scipy_test/lib/python3.7/site-packages/numpy/core/include -Iscipy/_lib -Iscipy/spatial/ckdtree/src -I/tmp/scipy_test/lib/python3.7/site-packages/numpy/core/include -I/tmp/scipy_test/include -I/usr/include/python3.7m -c scipy/spatial/ckdtree.cxx -o build/temp.linux-x86_64-3.7/scipy/spatial/ckdtree.o -MMD -MF build/temp.linux-x86_64-3.7/scipy/spatial/ckdtree.o.d\" failed with exit status 1\r\nerror\r\n```\r\n\r\nReverting to 387c5032f36d91cc5844d5c9dd0c24afd7ef4849 builds both pandas and scipy without error.\r\n\r\nI am in significantly over my head and do not know where to start getting a minimal example, sorry.",
    "closed_at": "2018-08-23T15:33:44Z",
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "Sorry about that, and thanks for the quick heads-up. Should be fixed by 5000e1a3caf04a284e487773646f18cf972a15a6.",
            "created_at": "2018-08-23T15:33:44Z",
            "html_url": "https://github.com/cython/cython/issues/2569#issuecomment-415461431",
            "id": 415461431,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2569",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQxNTQ2MTQzMQ==",
            "updated_at": "2018-08-23T15:33:55Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/415461431",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        }
    ],
    "comments": 1,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/2569/comments",
    "created_at": "2018-08-22T18:13:28Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2018-08-23T15:33:44Z",
            "event": "closed",
            "id": 1805609532,
            "node_id": "MDExOkNsb3NlZEV2ZW50MTgwNTYwOTUzMg==",
            "url": "https://api.github.com/repos/cython/cython/issues/events/1805609532"
        }
    ],
    "events_url": "https://api.github.com/repos/cython/cython/issues/2569/events",
    "html_url": "https://github.com/cython/cython/issues/2569",
    "id": 353066048,
    "labels": [],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/2569/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDU6SXNzdWUzNTMwNjYwNDg=",
    "number": 2569,
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "closed",
    "title": "removal of deprecated numpy APIs breaks pandas/scipy builds",
    "updated_at": "2018-08-23T15:33:55Z",
    "url": "https://api.github.com/repos/cython/cython/issues/2569",
    "user": {
        "avatar_url": "https://avatars3.githubusercontent.com/u/199813?v=4",
        "events_url": "https://api.github.com/users/tacaswell/events{/privacy}",
        "followers_url": "https://api.github.com/users/tacaswell/followers",
        "following_url": "https://api.github.com/users/tacaswell/following{/other_user}",
        "gists_url": "https://api.github.com/users/tacaswell/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/tacaswell",
        "id": 199813,
        "login": "tacaswell",
        "node_id": "MDQ6VXNlcjE5OTgxMw==",
        "organizations_url": "https://api.github.com/users/tacaswell/orgs",
        "received_events_url": "https://api.github.com/users/tacaswell/received_events",
        "repos_url": "https://api.github.com/users/tacaswell/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/tacaswell/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/tacaswell/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/tacaswell"
    }
}