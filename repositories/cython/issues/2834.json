{
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "I have this code in python to change to Cython -> to C\r\nPYTHON:\r\nclass Foo(threading.Thread): \r\n      def init(self, threadid, name, counter):\r\n      int x,y,z,v,b,n float some_float\r\n\r\nAs we know Python threads are threading.Thread (contrary to Cython threads)\r\n\r\n*I cannot do cdef class Foo(): because it inherits from threading.Thread which is Python, not the Cython parallelism concept\r\n\r\nInside the init function, I have dozens of variables that I have to convert to cdef\r\n\r\nEventually I cannot just type cdef int x,y,z,...., because of the rule in the language basics \"\"When subclassing an extension type with a Python class, def methods can override cpdef methods but not cdef methods:\"\"\r\n\r\nIs this still under development?\r\nAny approach to get this problem resolved please?\r\nThanks",
    "closed_at": "2019-02-11T18:18:28Z",
    "comment_data": [
        {
            "author_association": "NONE",
            "body": "Instead of subclassing `threading.Thread`, you should instead define a `cpdef` function that takes in Python objects as input, converts them to C values, then releases the GIL and does its expensive computational work. Then you pass that function and its arguments as the target and arguments of a `threading.Thread` object and use it as-is.\r\n\r\n```cython\r\nimport threading\r\n\r\ncpdef my_task(int threadid, bytes name, int counter):\r\n  cdef:\r\n      char* cname\r\n      float some_float\r\n  # coerce to C values\r\n  cname = name\r\n  with nogil:\r\n       # do the hard work here\r\n\r\ntask = threading.Thread(target=my_task, args=(1, b\"foo\", 0))\r\ntask.start()\r\nprint(1)\r\n```\r\n\r\nAlternatively, you subclass `threading.Thread` as a Python class but in it's `run` method, you have it pass its data to a C function that also releases the GIL.\r\n\r\nCython itself does not have its own threading implementation. It allows you to use OpenMP, a compiler feature, or an external C threading library, which is essentially a feature of your operating system. It exposes the Python C-API for threads as well, but these are not nearly as expressive an abstraction as the Python-level interface, and lack fundamental components like a GIL-less thread-safe collection (e.g. `queue.Queue`).",
            "created_at": "2019-02-11T01:03:40Z",
            "html_url": "https://github.com/cython/cython/issues/2834#issuecomment-462198777",
            "id": 462198777,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2834",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ2MjE5ODc3Nw==",
            "updated_at": "2019-02-11T01:03:40Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/462198777",
            "user": {
                "avatar_url": "https://avatars2.githubusercontent.com/u/1426041?v=4",
                "events_url": "https://api.github.com/users/mobiusklein/events{/privacy}",
                "followers_url": "https://api.github.com/users/mobiusklein/followers",
                "following_url": "https://api.github.com/users/mobiusklein/following{/other_user}",
                "gists_url": "https://api.github.com/users/mobiusklein/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mobiusklein",
                "id": 1426041,
                "login": "mobiusklein",
                "node_id": "MDQ6VXNlcjE0MjYwNDE=",
                "organizations_url": "https://api.github.com/users/mobiusklein/orgs",
                "received_events_url": "https://api.github.com/users/mobiusklein/received_events",
                "repos_url": "https://api.github.com/users/mobiusklein/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mobiusklein/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mobiusklein/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mobiusklein"
            }
        },
        {
            "author_association": "NONE",
            "body": "Thanks I will try this approach, it will take some time - heads up.",
            "created_at": "2019-02-11T12:15:30Z",
            "html_url": "https://github.com/cython/cython/issues/2834#issuecomment-462307476",
            "id": 462307476,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2834",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ2MjMwNzQ3Ng==",
            "updated_at": "2019-02-11T12:15:30Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/462307476",
            "user": {
                "avatar_url": "https://avatars1.githubusercontent.com/u/47497198?v=4",
                "events_url": "https://api.github.com/users/SarmadEdward/events{/privacy}",
                "followers_url": "https://api.github.com/users/SarmadEdward/followers",
                "following_url": "https://api.github.com/users/SarmadEdward/following{/other_user}",
                "gists_url": "https://api.github.com/users/SarmadEdward/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/SarmadEdward",
                "id": 47497198,
                "login": "SarmadEdward",
                "node_id": "MDQ6VXNlcjQ3NDk3MTk4",
                "organizations_url": "https://api.github.com/users/SarmadEdward/orgs",
                "received_events_url": "https://api.github.com/users/SarmadEdward/received_events",
                "repos_url": "https://api.github.com/users/SarmadEdward/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/SarmadEdward/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/SarmadEdward/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/SarmadEdward"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Also note that you do not even need a `cdef class` to compile methods. That works perfectly fine for Python classes as well.\r\n\r\nNot a bug.",
            "created_at": "2019-02-11T18:18:28Z",
            "html_url": "https://github.com/cython/cython/issues/2834#issuecomment-462435694",
            "id": 462435694,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2834",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ2MjQzNTY5NA==",
            "updated_at": "2019-02-11T18:18:28Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/462435694",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        }
    ],
    "comments": 3,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/2834/comments",
    "created_at": "2019-02-10T12:06:16Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2019-02-11T18:18:28Z",
            "event": "closed",
            "id": 2131384438,
            "node_id": "MDExOkNsb3NlZEV2ZW50MjEzMTM4NDQzOA==",
            "url": "https://api.github.com/repos/cython/cython/issues/events/2131384438"
        },
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2019-02-11T18:18:47Z",
            "event": "labeled",
            "id": 2131385237,
            "label": {
                "color": "fef2c0",
                "name": "support question"
            },
            "node_id": "MDEyOkxhYmVsZWRFdmVudDIxMzEzODUyMzc=",
            "url": "https://api.github.com/repos/cython/cython/issues/events/2131385237"
        }
    ],
    "events_url": "https://api.github.com/repos/cython/cython/issues/2834/events",
    "html_url": "https://github.com/cython/cython/issues/2834",
    "id": 408528487,
    "labels": [
        {
            "color": "fef2c0",
            "default": false,
            "id": 414800623,
            "name": "support question",
            "node_id": "MDU6TGFiZWw0MTQ4MDA2MjM=",
            "url": "https://api.github.com/repos/cython/cython/labels/support%20question"
        }
    ],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/2834/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDU6SXNzdWU0MDg1Mjg0ODc=",
    "number": 2834,
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "closed",
    "title": "cython class inheritance with python threading",
    "updated_at": "2019-02-11T18:18:47Z",
    "url": "https://api.github.com/repos/cython/cython/issues/2834",
    "user": {
        "avatar_url": "https://avatars1.githubusercontent.com/u/47497198?v=4",
        "events_url": "https://api.github.com/users/SarmadEdward/events{/privacy}",
        "followers_url": "https://api.github.com/users/SarmadEdward/followers",
        "following_url": "https://api.github.com/users/SarmadEdward/following{/other_user}",
        "gists_url": "https://api.github.com/users/SarmadEdward/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/SarmadEdward",
        "id": 47497198,
        "login": "SarmadEdward",
        "node_id": "MDQ6VXNlcjQ3NDk3MTk4",
        "organizations_url": "https://api.github.com/users/SarmadEdward/orgs",
        "received_events_url": "https://api.github.com/users/SarmadEdward/received_events",
        "repos_url": "https://api.github.com/users/SarmadEdward/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/SarmadEdward/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/SarmadEdward/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/SarmadEdward"
    }
}