{
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "On [Dipy project](github.com/nipy/dipy), Travis tests our code for the future release and we found Cython 0.28 to be crashing when compiling on Linux. This problem holds all PR and our future release. Is there any workaround? Thank you for your answer.\r\n\r\n### Reduced test to reproduce the issue\r\ntest.pyx\r\n```\r\ncimport cython\r\nctypedef cython.floating floating\r\n\r\ndef test_basic(floating[:, :, :] d=None):\r\n    pass\r\n```\r\n### Stack trace\r\n```\r\nError compiling Cython file:\r\n------------------------------------------------------------\r\n...\r\ncimport cython\r\nctypedef cython.floating floating\r\n\r\n\r\ndef test_basic(floating[:, :, :] d=None):\r\n^\r\n------------------------------------------------------------\r\n\r\ntest_struct_mmview.pyx:5:0: Compiler crash in AnalyseExpressionsTransform\r\n\r\nFile 'Nodes.py', line 432, in analyse_expressions: StatListNode(test_struct_mmview.pyx:1:0)\r\nFile 'Nodes.py', line 432, in analyse_expressions: StatListNode(test_struct_mmview.pyx:5:0)\r\nFile 'ExprNodes.py', line 533, in analyse_expressions: DictNode(test_struct_mmview.pyx:5:0,\r\n    is_dict_literal = True,\r\n    is_temp = 1,\r\n    obj_conversion_errors = [...]/0,\r\n    result_is_used = True,\r\n    use_managed_ref = True)\r\nFile 'ExprNodes.py', line 8577, in analyse_types: DictNode(test_struct_mmview.pyx:5:0,\r\n    is_dict_literal = True,\r\n    is_temp = 1,\r\n    obj_conversion_errors = [...]/0,\r\n    result_is_used = True,\r\n    use_managed_ref = True)\r\nFile 'ExprNodes.py', line 8725, in analyse_types: DictItemNode(test_struct_mmview.pyx:5:0,\r\n    result_is_used = True,\r\n    use_managed_ref = True)\r\nFile 'ExprNodes.py', line 9092, in analyse_types: PyCFunctionNode(test_struct_mmview.pyx:5:0,\r\n    binding = True,\r\n    defaults = [...]/0,\r\n    is_specialization = True,\r\n    is_temp = 1,\r\n    pymethdef_cname = '__pyx_fuse_0__pyx_mdef_10numthreads_3test_basic',\r\n    result_is_used = True,\r\n    use_managed_ref = True)\r\nFile 'ExprNodes.py', line 9155, in analyse_default_args: PyCFunctionNode(test_struct_mmview.pyx:5:0,\r\n    binding = True,\r\n    defaults = [...]/0,\r\n    is_specialization = True,\r\n    is_temp = 1,\r\n    pymethdef_cname = '__pyx_fuse_0__pyx_mdef_10numthreads_3test_basic',\r\n    result_is_used = True,\r\n    use_managed_ref = True)\r\n\r\nCompiler crash traceback from this point on:\r\n  File \"/Users/koudoro/anaconda/envs/dipy-pre-env-3/lib/python3.6/site-packages/Cython/Compiler/ExprNodes.py\", line 9155, in analyse_default_args\r\n    allow_pyobject=False)\r\n  File \"/Users/koudoro/anaconda/envs/dipy-pre-env-3/lib/python3.6/site-packages/Cython/Compiler/Symtab.py\", line 1880, in declare_var\r\n    error(pos, \"C struct/union member cannot be a memory view\")\r\n  File \"/Users/koudoro/anaconda/envs/dipy-pre-env-3/lib/python3.6/site-packages/Cython/Compiler/Errors.py\", line 178, in error\r\n    raise InternalError(message)\r\nInternalError: Internal compiler error: C struct/union member cannot be a memory view\r\n```",
    "closed_at": null,
    "comment_data": [],
    "comments": 0,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/2114/comments",
    "created_at": "2018-02-22T15:08:09Z",
    "event_data": [],
    "events_url": "https://api.github.com/repos/cython/cython/issues/2114/events",
    "html_url": "https://github.com/cython/cython/issues/2114",
    "id": 299388793,
    "labels": [],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/2114/labels{/name}",
    "locked": false,
    "milestone": null,
    "number": 2114,
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "open",
    "title": "Compiler crash in AnalyseExpressionsTransform (cython 0.28)",
    "updated_at": "2018-02-22T15:08:09Z",
    "url": "https://api.github.com/repos/cython/cython/issues/2114",
    "user": {
        "avatar_url": "https://avatars2.githubusercontent.com/u/23106443?v=4",
        "events_url": "https://api.github.com/users/skoudoro/events{/privacy}",
        "followers_url": "https://api.github.com/users/skoudoro/followers",
        "following_url": "https://api.github.com/users/skoudoro/following{/other_user}",
        "gists_url": "https://api.github.com/users/skoudoro/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/skoudoro",
        "id": 23106443,
        "login": "skoudoro",
        "organizations_url": "https://api.github.com/users/skoudoro/orgs",
        "received_events_url": "https://api.github.com/users/skoudoro/received_events",
        "repos_url": "https://api.github.com/users/skoudoro/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/skoudoro/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/skoudoro/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/skoudoro"
    }
}